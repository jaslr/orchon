import"../chunks/DsnmJJEf.js";import{p as va,s as ft,b as pa,u as ga,d as k,e as T,k as r,l as i,g as t,t as y,a as c,h as xa,j as _a,$ as ha,r as a,n as B,m as de,i as X,c as Q,f as C,v as Ht,x as ma}from"../chunks/Dnd2HTQh.js";import{s as m}from"../chunks/BDR25Ma5.js";import{i as Y}from"../chunks/DKZzDoih.js";import{s as Wt,a as tt,e as et}from"../chunks/C4TM4onk.js";import{h as ua}from"../chunks/DoDuvpHD.js";import{s as F}from"../chunks/H3ICmHr2.js";import{d as fa,e as Ce}from"../chunks/Dc2clUla.js";import{b as ya}from"../chunks/BxCSoznQ.js";import{S as ba}from"../chunks/H0G3jxI6.js";import{Z as wa,a as Pa,F as ka,A as $a}from"../chunks/CyIEH-U8.js";import{A as Ca}from"../chunks/DvOicAbW.js";import{B as Ye}from"../chunks/DjzREpZG.js";import{S as zt,N as He}from"../chunks/C4qq8lPG.js";import{P as Ya}from"../chunks/BTxy6n0L.js";import{G as Ha}from"../chunks/Dbpxzosl.js";import{E as Yt}from"../chunks/BFTGOLv7.js";import{F as Ne}from"../chunks/BH6OhVQf.js";import{S as Xe}from"../chunks/B_HwfPhO.js";var Na=Ht('<path fill="none" stroke="rgba(16, 185, 129, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(16, 185, 129)"></circle>',1),Xa=Ht('<path fill="none" stroke="rgba(139, 92, 246, 0.5)" stroke-width="2"></path><!>',1),Ia=Ht('<path fill="none" stroke="rgba(75, 85, 99, 0.6)" stroke-width="2" stroke-dasharray="4 4"></path><circle r="4" fill="rgb(107, 114, 128)"></circle>',1),Ma=T('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[10px] text-gray-500 hover:text-gray-400 mt-1.5 group"><!> <span class="truncate"> </span> <!></a>'),Ta=T('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-xs text-emerald-400 hover:text-emerald-300 group"><span class="truncate"> </span> <!></a>'),Aa=T('<div class="absolute bg-gray-900 border-2 border-emerald-500 rounded-lg overflow-hidden shadow-xl shadow-emerald-500/10"><div class="px-4 py-2.5 bg-emerald-950/50 border-b border-emerald-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm">Org Portal</span></div> <div class="text-[9px] text-emerald-300/70 mt-0.5">junipa-organisations</div></div> <div class="px-4 py-2"><!> <div class="text-[9px] text-gray-500 mt-1 font-mono"> </div></div></div>'),Da=T('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Ra=T('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-1.5 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-1.5"><!> <div class="text-[9px] text-gray-500 mt-0.5 font-mono"> </div></div></div>'),Sa=T('<div class="absolute bg-gray-800/60 border border-gray-700 rounded-lg overflow-hidden"><div class="px-3 py-2"><div class="flex items-center gap-2"><!> <span class="font-medium text-gray-200 text-sm"> </span></div> <!> <div class="text-[10px] text-gray-600 mt-1"> </div></div></div> <!> <!>',1),Ua=Ht('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),Oa=Ht('<path fill="none" stroke="rgba(99, 102, 241, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(99, 102, 241)"></circle>',1),Ea=T('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),La=T('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Ga=T('<div class="text-[10px] text-gray-500 mt-0.5 font-mono"> </div>'),ja=T('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-2 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-2"><!> <!></div></div>'),Fa=T('<div class="absolute bg-gray-900 border-2 border-indigo-500 rounded-lg overflow-hidden shadow-xl shadow-indigo-500/10"><div class="px-4 py-3 bg-indigo-950/50 border-b border-indigo-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <div class="text-[10px] text-indigo-300 mt-1">Source Repository</div></div> <div class="px-4 py-2"><!> <div class="text-[10px] text-gray-500 mt-1"> </div></div></div> <!>',1),Wa=Ht('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),za=T('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Ba=T('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-2 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-sm truncate"> </span></div> <div class="text-[10px] text-gray-500 mt-0.5"> </div></div> <div class="px-3 py-2"><!> <div class="text-[9px] text-gray-500 mt-0.5 font-mono"> </div></div></div>'),Za=T('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Hierarchy:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Client</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Org Portal</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Campus</span></div></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Lines:</span> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-purple-500"></div> <span class="text-xs text-gray-400">to org portal</span></div> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-emerald-500 opacity-60" style="background: repeating-linear-gradient(90deg, rgb(16 185 129 / 0.6) 0px, rgb(16 185 129 / 0.6) 4px, transparent 4px, transparent 8px);"></div> <span class="text-xs text-gray-400">to campus</span></div></div>',1),Va=T('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),Ja=T('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Node Types:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Source Repo</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Deployed Instance</span></div></div>',1),Ka=T('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">View:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">All Campuses</span></div></div>'),qa=T('<div class="flex items-center gap-4 text-xs border-l border-gray-700 pl-4"><div class="flex items-center gap-1.5"><!> <span class="text-gray-400 font-mono"> </span> <span class="text-cyan-400 font-mono"> </span></div> <div class="flex items-center gap-2 text-gray-500"><span> </span> <span class="text-gray-600">|</span> <span> </span></div></div>'),Qa=T('<div class="h-full flex flex-col bg-gray-950 overflow-hidden"><div class="shrink-0 flex items-center justify-between px-4 py-2 bg-gray-900/80 border-b border-gray-800 backdrop-blur-sm z-10"><div class="flex items-center gap-4"><h1 class="text-lg font-semibold text-white">Vast Puddle</h1> <div class="flex items-center gap-1 bg-gray-800 rounded-lg p-0.5"><button>Ownership</button> <button>Repos</button> <button>Flat</button></div> <span class="text-xs text-gray-500"><!></span></div> <div class="flex items-center gap-2"><a href="/infrastructure/settings" class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors" title="Manage GCP Projects"><!> Settings</a> <button class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors"><!> Sort</button> <div class="flex items-center gap-1 ml-2"><button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <span class="text-xs text-gray-400 w-14 text-center"> </span> <button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <button class="flex items-center gap-1.5 px-2 py-1.5 bg-blue-600 hover:bg-blue-500 rounded text-xs text-white font-medium ml-2" title="Fit diagram to view"><!> Fit</button></div></div></div> <div class="shrink-0 px-4 py-1 text-xs text-gray-500 bg-gray-900/50"> </div> <div role="application" tabindex="0"><div class="absolute inset-0 pointer-events-none"></div> <div class="absolute origin-top-left"><!></div></div> <div class="shrink-0 px-4 py-2 bg-gray-900/90 border-t border-gray-800 flex items-center justify-between gap-6 flex-wrap"><div class="flex items-center gap-6 flex-wrap"><!></div> <!></div></div>');function fr(Ie,nt){va(nt,!0);let E=ft("ownership"),yt=ft(!0),Rt=ft(pa({}));ga(()=>{if(typeof window<"u"){const e=localStorage.getItem("gcp-project-overrides");if(e)try{k(Rt,JSON.parse(e),!0)}catch{k(Rt,{},!0)}}});function ce(e,n){return e in t(Rt)?t(Rt)[e]:n}let bt=X(()=>t(yt)?[...nt.data.sourceRepos].sort((e,n)=>e.displayName.localeCompare(n.displayName)):[...nt.data.sourceRepos].sort((e,n)=>n.displayName.localeCompare(e.displayName))),Bt=X(()=>nt.data.clients.map(e=>{const n=e.campuses.filter(d=>ce(d.gcpProject,!0)),l=e.orgPortal?ce(e.orgPortal.gcpProject,!0):!0;return{...e,campuses:n,orgPortal:l?e.orgPortal:void 0}}).filter(e=>e.campuses.length>0||e.orgPortal)),pt=X(()=>t(yt)?[...t(Bt)].sort((e,n)=>e.displayName.localeCompare(n.displayName)):[...t(Bt)].sort((e,n)=>n.displayName.localeCompare(e.displayName))),ve=X(()=>t(Bt).flatMap(e=>e.campuses.map(n=>({...n,clientName:e.displayName,clientId:e.id})))),Zt=X(()=>t(yt)?[...t(ve)].sort((e,n)=>e.displayName.localeCompare(n.displayName)):[...t(ve)].sort((e,n)=>n.displayName.localeCompare(e.displayName))),J=ft(40),K=ft(40),D=ft(1),gt,St=ft(!1),Nt={x:0,y:0,panX:0,panY:0};const Ut=280,Xt=120,Me=240,wt=80,Pt=200,xt=80,It=280,_t=100,Te=240,q=75,it=120,kt=140,at=20,Ot=50,H=60,pe=280,ge=100,$t=20,Et=4,xe={jaslr:"#3b82f6","jvp-ux":"#8b5cf6"};function Mt(e){try{return new URL(e).hostname}catch{return e}}function Ae(e){e.preventDefault();const n=gt.getBoundingClientRect(),l=e.clientX-n.left,d=e.clientY-n.top,p=(l-t(J))/t(D),s=(d-t(K))/t(D),o=e.deltaY>0?.9:1.1,v=Math.max(.1,Math.min(5,t(D)*o));k(J,l-p*v),k(K,d-s*v),k(D,v,!0)}function De(e){e.target.closest("a")||(k(St,!0),Nt={x:e.clientX,y:e.clientY,panX:t(J),panY:t(K)})}function Re(e){t(St)&&(k(J,Nt.panX+(e.clientX-Nt.x)),k(K,Nt.panY+(e.clientY-Nt.y)))}function _e(){k(St,!1)}function Se(){const e=gt.getBoundingClientRect(),n=e.width/2,l=e.height/2,d=(n-t(J))/t(D),p=(l-t(K))/t(D),s=Math.min(5,t(D)*1.25);k(J,n-d*s),k(K,l-p*s),k(D,s,!0)}function Ue(){const e=gt.getBoundingClientRect(),n=e.width/2,l=e.height/2,d=(n-t(J))/t(D),p=(l-t(K))/t(D),s=Math.max(.1,t(D)/1.25);k(J,n-d*s),k(K,l-p*s),k(D,s,!0)}function he(){if(t(E)==="ownership"){let e=H;for(const l of t(pt)){const d=l.campuses.length>0?l.campuses.length*(q+at)-at:q,p=l.orgPortal?_t:0,s=Math.max(xt,p,d);e+=s+Ot}return{width:H+Pt+it+It+kt+Te+H,height:e+H}}else if(t(E)==="repos"){let e=H;for(const n of t(bt)){const l=n.instances.length>0?n.instances.length*(wt+at)-at:0,d=Math.max(Xt,l);e+=d+Ot}return{width:H+Ut+it+Me+H,height:e+H}}else{const e=Math.ceil(t(Zt).length/Et);return{width:H+Et*(pe+$t)-$t+H,height:H+e*(ge+$t)-$t+H}}}function Oe(){if(!gt)return;const e=gt.getBoundingClientRect(),n=60,{width:l,height:d}=he(),p=(e.width-n*2)/l,s=(e.height-n*2)/d,o=Math.min(p,s,1);k(J,(e.width-l*o)/2),k(K,(e.height-d*o)/2),k(D,o,!0)}function Ee(){const e=new Map;let n=H;const l=H,d=H+Pt+it,p=d+It+kt;for(const s of t(pt)){const o=s.campuses.length>0?s.campuses.length*(q+at)-at:q,v=s.orgPortal?_t:0,u=Math.max(xt,v,o),g=l,x=n+(u-xt)/2;let f,$;s.orgPortal&&(f=d,$=n+(u-_t)/2);const L=[],R=n+(u-o)/2;for(let h=0;h<s.campuses.length;h++)L.push({id:s.campuses[h].id,x:p,y:R+h*(q+at)});e.set(s.id,{clientX:g,clientY:x,orgPortalX:f,orgPortalY:$,campusPositions:L}),n+=u+Ot}return e}function Le(){const e=new Map;let n=H;for(const l of t(bt)){const d=l.instances.length>0?l.instances.length*(wt+at)-at:0,p=Math.max(Xt,d),s=H,o=n+(p-Xt)/2,v=[],u=n+(p-d)/2;for(let g=0;g<l.instances.length;g++)v.push({id:l.instances[g].id,x:H+Ut+it,y:u+g*(wt+at)});e.set(l.id,{x:s,y:o,instancePositions:v}),n+=p+Ot}return e}let me=X(Ee),ue=X(Le),Lt=X(he);var Vt=Qa();ua("1lvxyav",e=>{_a(()=>{ha.title="Vast Puddle | Orchon"})});var Jt=r(Vt),Kt=r(Jt),qt=i(r(Kt),2),Qt=r(qt);Qt.__click=()=>k(E,"ownership");var te=i(Qt,2);te.__click=()=>k(E,"repos");var fe=i(te,2);fe.__click=()=>k(E,"flat"),a(qt);var ye=i(qt,2),Ge=r(ye);{var je=e=>{var n=de();y((l,d)=>m(n,`${t(pt).length??""} clients, ${l??""} org portals, ${d??""} campuses`),[()=>t(pt).filter(l=>l.orgPortal).length,()=>t(pt).reduce((l,d)=>l+d.campuses.length,0)]),c(e,n)},Fe=e=>{var n=Q(),l=C(n);{var d=s=>{var o=de();y(v=>m(o,`${t(bt).length??""} repos, ${v??""} instances`),[()=>t(bt).reduce((v,u)=>v+u.instances.length,0)]),c(s,o)},p=s=>{var o=de();y(()=>m(o,`${t(Zt).length??""} campuses`)),c(s,o)};Y(l,s=>{t(E)==="repos"?s(d):s(p,!1)},!0)}c(e,n)};Y(Ge,e=>{t(E)==="ownership"?e(je):e(Fe,!1)})}a(ye),a(Kt);var be=i(Kt,2),ee=r(be),We=r(ee);ba(We,{class:"w-3.5 h-3.5"}),B(),a(ee);var Gt=i(ee,2);Gt.__click=()=>k(yt,!t(yt));var ze=r(Gt);{var Be=e=>{$a(e,{class:"w-3.5 h-3.5"})},Ze=e=>{Ca(e,{class:"w-3.5 h-3.5"})};Y(ze,e=>{t(yt)?e(Be):e(Ze,!1)})}B(),a(Gt);var we=i(Gt,2),jt=r(we);jt.__click=Ue;var Ve=r(jt);wa(Ve,{class:"w-4 h-4"}),a(jt);var ae=i(jt,2),Je=r(ae);a(ae);var Ft=i(ae,2);Ft.__click=Se;var Ke=r(Ft);Pa(Ke,{class:"w-4 h-4"}),a(Ft);var re=i(Ft,2);re.__click=Oe;var qe=r(re);ka(qe,{class:"w-3.5 h-3.5"}),B(),a(re),a(we),a(be),a(Jt);var se=i(Jt,2),Qe=r(se);a(se);var rt=i(se,2);let Pe;rt.__mousedown=De,rt.__mousemove=Re,rt.__mouseup=_e;var ke=r(rt),oe=i(ke,2),ta=r(oe);{var ea=e=>{var n=Ua(),l=C(n);et(l,21,()=>t(pt),p=>p.id,(p,s)=>{const o=X(()=>t(me).get(t(s).id));var v=Q(),u=C(v);{var g=x=>{var f=Q(),$=C(f);{var L=h=>{var w=Xa(),S=C(w),P=i(S);et(P,17,()=>t(o).campusPositions,_=>_.id,(_,b)=>{var I=Na(),A=C(I),lt=i(A);y(()=>{F(A,"d",`M ${t(o).orgPortalX+It} ${t(o).orgPortalY+_t/2}
										   C ${t(o).orgPortalX+It+kt/2} ${t(o).orgPortalY+_t/2},
										     ${t(b).x-kt/2} ${t(b).y+q/2},
										     ${t(b).x??""} ${t(b).y+q/2}`),F(lt,"cx",t(b).x),F(lt,"cy",t(b).y+q/2)}),c(_,I)}),y(()=>F(S,"d",`M ${t(o).clientX+Pt} ${t(o).clientY+xt/2}
									   C ${t(o).clientX+Pt+it/2} ${t(o).clientY+xt/2},
									     ${t(o).orgPortalX-it/2} ${t(o).orgPortalY+_t/2},
									     ${t(o).orgPortalX??""} ${t(o).orgPortalY+_t/2}`)),c(h,w)},R=h=>{var w=Q(),S=C(w);et(S,17,()=>t(o).campusPositions,P=>P.id,(P,_)=>{var b=Ia(),I=C(b),A=i(I);y(()=>{F(I,"d",`M ${t(o).clientX+Pt} ${t(o).clientY+xt/2}
										   C ${t(o).clientX+Pt+(it+It+kt)/2} ${t(o).clientY+xt/2},
										     ${t(_).x-kt/2} ${t(_).y+q/2},
										     ${t(_).x??""} ${t(_).y+q/2}`),F(A,"cx",t(_).x),F(A,"cy",t(_).y+q/2)}),c(P,b)}),c(h,w)};Y($,h=>{t(s).orgPortal&&t(o).orgPortalX!==void 0&&t(o).orgPortalY!==void 0?h(L):h(R,!1)})}c(x,f)};Y(u,x=>{t(o)&&x(g)})}c(p,v)}),a(l);var d=i(l);et(d,17,()=>t(pt),p=>p.id,(p,s)=>{const o=X(()=>t(me).get(t(s).id));var v=Q(),u=C(v);{var g=x=>{var f=Sa(),$=C(f),L=r($),R=r(L),h=r(R);Ye(h,{class:"w-4 h-4 text-gray-400"});var w=i(h,2),S=r(w,!0);a(w),a(R);var P=i(R,2);{var _=G=>{var U=Ma(),z=r(U);Ha(z,{class:"w-3 h-3"});var M=i(z,2),W=r(M,!0);a(M);var N=i(M,2);Yt(N,{class:"w-2 h-2 opacity-50 group-hover:opacity-100"}),a(U),y(O=>{F(U,"href",t(s).marketingUrl),m(W,O)},[()=>Mt(t(s).marketingUrl)]),c(G,U)};Y(P,G=>{t(s).marketingUrl&&G(_)})}var b=i(P,2),I=r(b);a(b),a(L),a($);var A=i($,2);{var lt=G=>{var U=Aa(),z=r(U),M=r(z),W=r(M);He(W,{class:"w-4 h-4 text-emerald-400"}),B(2),a(M),B(2),a(z);var N=i(z,2),O=r(N);{var Z=V=>{var ot=Ta(),ct=r(ot),mt=r(ct,!0);a(ct);var Tt=i(ct,2);Yt(Tt,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(ot),y(()=>{F(ot,"href",t(s).orgPortal.productionUrl),m(mt,t(s).orgPortal.customDomain)}),c(V,ot)};Y(O,V=>{t(s).orgPortal.productionUrl&&V(Z)})}var j=i(O,2),st=r(j,!0);a(j),a(N),a(U),y(()=>{tt(U,`left: ${t(o).orgPortalX??""}px; top: ${t(o).orgPortalY??""}px; width: 280px; min-height: 100px;`),m(st,t(s).orgPortal.gcpProject)}),c(G,U)};Y(A,G=>{t(s).orgPortal&&t(o).orgPortalX!==void 0&&t(o).orgPortalY!==void 0&&G(lt)})}var ht=i(A,2);et(ht,19,()=>t(o).campusPositions,G=>G.id,(G,U,z)=>{const M=X(()=>t(s).campuses[t(z)]);var W=Ra(),N=r(W),O=r(N),Z=r(O);zt(Z,{class:"w-3.5 h-3.5 text-blue-400"});var j=i(Z,2),st=r(j,!0);a(j),a(O),a(N);var V=i(N,2),ot=r(V);{var ct=Ct=>{var ut=Da(),At=r(ut),ie=r(At,!0);a(At);var le=i(At,2);Yt(le,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(ut),y(dt=>{F(ut,"href",t(M).productionUrl),m(ie,dt)},[()=>t(M).customDomain||Mt(t(M).productionUrl)]),c(Ct,ut)};Y(ot,Ct=>{t(M).productionUrl&&Ct(ct)})}var mt=i(ot,2),Tt=r(mt,!0);a(mt),a(V),a(W),y(()=>{tt(W,`left: ${t(U).x??""}px; top: ${t(U).y??""}px; width: 240px; min-height: 75px;`),m(st,t(M).displayName),m(Tt,t(M).gcpProject)}),c(G,W)}),y(()=>{tt($,`left: ${t(o).clientX??""}px; top: ${t(o).clientY??""}px; width: 200px; min-height: 80px;`),m(S,t(s).displayName),m(I,`${t(s).campuses.length??""} campus${t(s).campuses.length!==1?"es":""}`)}),c(x,f)};Y(u,x=>{t(o)&&x(g)})}c(p,v)}),y(()=>tt(l,`width: ${t(Lt).width??""}px; height: ${t(Lt).height??""}px;`)),c(e,n)},aa=e=>{var n=Q(),l=C(n);{var d=s=>{var o=Wa(),v=C(o);et(v,21,()=>t(bt),g=>g.id,(g,x)=>{const f=X(()=>t(ue).get(t(x).id));var $=Q(),L=C($);{var R=h=>{var w=Q(),S=C(w);et(S,17,()=>t(f).instancePositions,P=>P.id,(P,_)=>{var b=Oa(),I=C(b),A=i(I);y(()=>{F(I,"d",`M ${t(f).x+Ut} ${t(f).y+Xt/2}
									   C ${t(f).x+Ut+it/2} ${t(f).y+Xt/2},
									     ${t(_).x-it/2} ${t(_).y+wt/2},
									     ${t(_).x??""} ${t(_).y+wt/2}`),F(A,"cx",t(_).x),F(A,"cy",t(_).y+wt/2)}),c(P,b)}),c(h,w)};Y(L,h=>{t(f)&&t(x).instances.length>0&&h(R)})}c(g,$)}),a(v);var u=i(v);et(u,17,()=>t(bt),g=>g.id,(g,x)=>{const f=X(()=>t(ue).get(t(x).id)),$=X(()=>xe[t(x).identity]||"#6b7280");var L=Q(),R=C(L);{var h=w=>{var S=Fa(),P=C(S),_=r(P),b=r(_),I=r(b);Ne(I,{class:"w-4 h-4 text-indigo-400"});var A=i(I,2),lt=r(A,!0);a(A),a(b),B(2),a(_);var ht=i(_,2),G=r(ht);{var U=N=>{var O=Ea(),Z=r(O),j=r(Z,!0);a(Z);var st=i(Z,2);Yt(st,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(O),y(V=>{F(O,"href",t(x).productionUrl),m(j,V)},[()=>Mt(t(x).productionUrl)]),c(N,O)};Y(G,N=>{t(x).productionUrl&&N(U)})}var z=i(G,2),M=r(z);a(z),a(ht),a(P);var W=i(P,2);et(W,19,()=>t(f).instancePositions,N=>N.id,(N,O,Z)=>{const j=X(()=>t(x).instances[t(Z)]);var st=ja(),V=r(st),ot=r(V),ct=r(ot);Xe(ct,{class:"w-3.5 h-3.5 text-emerald-400"});var mt=i(ct,2),Tt=r(mt,!0);a(mt),a(ot),a(V);var Ct=i(V,2),ut=r(Ct);{var At=dt=>{var vt=La(),Dt=r(vt),la=r(Dt,!0);a(Dt);var da=i(Dt,2);Yt(da,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(vt),y(ca=>{F(vt,"href",t(j).productionUrl),m(la,ca)},[()=>Mt(t(j).productionUrl)]),c(dt,vt)};Y(ut,dt=>{t(j).productionUrl&&dt(At)})}var ie=i(ut,2);{var le=dt=>{var vt=Ga(),Dt=r(vt,!0);a(vt),y(()=>m(Dt,t(j).gcpProject)),c(dt,vt)};Y(ie,dt=>{t(j).gcpProject&&dt(le)})}a(Ct),a(st),y(()=>{tt(st,`left: ${t(O).x??""}px; top: ${t(O).y??""}px; width: 240px; height: 80px;`),m(Tt,t(j).displayName)}),c(N,st)}),y(()=>{tt(P,`left: ${t(f).x??""}px; top: ${t(f).y??""}px; width: 280px; height: 120px; border-left: 4px solid ${t($)??""};`),m(lt,t(x).displayName),m(M,`${t(x).instances.length??""} deployed instance${t(x).instances.length!==1?"s":""}`)}),c(w,S)};Y(R,w=>{t(f)&&w(h)})}c(g,L)}),y(()=>tt(v,`width: ${t(Lt).width??""}px; height: ${t(Lt).height??""}px;`)),c(s,o)},p=s=>{var o=Q(),v=C(o);et(v,19,()=>t(Zt),u=>u.id,(u,g,x)=>{const f=X(()=>t(x)%Et),$=X(()=>Math.floor(t(x)/Et)),L=X(()=>H+t(f)*(pe+$t)),R=X(()=>H+t($)*(ge+$t));var h=Ba(),w=r(h),S=r(w),P=r(S);zt(P,{class:"w-3.5 h-3.5 text-blue-400"});var _=i(P,2),b=r(_,!0);a(_),a(S);var I=i(S,2),A=r(I,!0);a(I),a(w);var lt=i(w,2),ht=r(lt);{var G=M=>{var W=za(),N=r(W),O=r(N,!0);a(N);var Z=i(N,2);Yt(Z,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(W),y(j=>{F(W,"href",t(g).productionUrl),m(O,j)},[()=>t(g).customDomain||Mt(t(g).productionUrl)]),c(M,W)};Y(ht,M=>{t(g).productionUrl&&M(G)})}var U=i(ht,2),z=r(U,!0);a(U),a(lt),a(h),y(()=>{tt(h,`left: ${t(L)??""}px; top: ${t(R)??""}px; width: 280px; height: 100px;`),m(b,t(g).displayName),m(A,t(g).clientName),m(z,t(g).gcpProject)}),c(u,h)}),c(s,o)};Y(l,s=>{t(E)==="repos"?s(d):s(p,!1)},!0)}c(e,n)};Y(ta,e=>{t(E)==="ownership"?e(ea):e(aa,!1)})}a(oe),a(rt),ya(rt,e=>gt=e,()=>gt);var $e=i(rt,2),ne=r($e),ra=r(ne);{var sa=e=>{var n=Za(),l=C(n),d=i(r(l),2),p=r(d);Ye(p,{class:"w-3.5 h-3.5 text-gray-400"}),B(2),a(d);var s=i(d,2),o=r(s);He(o,{class:"w-3.5 h-3.5 text-emerald-400"}),B(2),a(s);var v=i(s,2),u=r(v);zt(u,{class:"w-3.5 h-3.5 text-blue-400"}),B(2),a(v),a(l),B(2),c(e,n)},oa=e=>{var n=Q(),l=C(n);{var d=s=>{var o=Ja(),v=C(o),u=i(r(v),2);et(u,17,()=>Object.entries(xe),([R,h])=>R,(R,h)=>{var w=X(()=>ma(t(h),2));let S=()=>t(w)[0],P=()=>t(w)[1];var _=Va(),b=r(_),I=i(b,2),A=r(I,!0);a(I),a(_),y(()=>{tt(b,`background-color: ${P()??""};`),m(A,S())}),c(R,_)}),a(v);var g=i(v,2),x=i(r(g),2),f=r(x);Ne(f,{class:"w-3.5 h-3.5 text-indigo-400"}),B(2),a(x);var $=i(x,2),L=r($);Xe(L,{class:"w-3.5 h-3.5 text-emerald-400"}),B(2),a($),a(g),c(s,o)},p=s=>{var o=Ka(),v=i(r(o),2),u=r(v);zt(u,{class:"w-3.5 h-3.5 text-blue-400"}),B(2),a(v),a(o),c(s,o)};Y(l,s=>{t(E)==="repos"?s(d):s(p,!1)},!0)}c(e,n)};Y(ra,e=>{t(E)==="ownership"?e(sa):e(oa,!1)})}a(ne);var na=i(ne,2);{var ia=e=>{var n=qa(),l=r(n),d=r(l);Ya(d,{class:"w-3.5 h-3.5 text-cyan-500"});var p=i(d,2),s=r(p,!0);a(p);var o=i(p,2),v=r(o);a(o),a(l);var u=i(l,2),g=r(u),x=r(g);a(g);var f=i(g,4),$=r(f);a(f),a(u),a(n),y(()=>{m(s,nt.data.packageInfo.name),m(v,`v${nt.data.packageInfo.version??""}`),m(x,`${nt.data.packageInfo.dependencyCount??""} deps`),m($,`${nt.data.packageInfo.devDependencyCount??""} dev`)}),c(e,n)};Y(na,e=>{nt.data.packageInfo&&e(ia)})}a($e),a(Vt),y(e=>{Wt(Qt,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(E)==="ownership"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`),Wt(te,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(E)==="repos"?"bg-indigo-600 text-white":"text-gray-400 hover:text-white"}`),Wt(fe,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(E)==="flat"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`),m(Je,`${e??""}%`),m(Qe,`Scroll to zoom | Drag to pan | ${t(E)==="ownership"?"Client ownership hierarchy":t(E)==="repos"?"Source repos with deployed instances":"All campuses"}`),Pe=Wt(rt,1,"flex-1 overflow-hidden relative cursor-grab select-none",null,Pe,{"cursor-grabbing":t(St)}),tt(ke,`
				background-image:
					linear-gradient(rgba(55, 65, 81, 0.3) 1px, transparent 1px),
					linear-gradient(90deg, rgba(55, 65, 81, 0.3) 1px, transparent 1px);
				background-size: ${40*t(D)}px ${40*t(D)}px;
				background-position: ${t(J)??""}px ${t(K)??""}px;
			`),tt(oe,`transform: translate(${t(J)??""}px, ${t(K)??""}px) scale(${t(D)??""});`)},[()=>Math.round(t(D)*100)]),Ce("wheel",rt,Ae),Ce("mouseleave",rt,_e),c(Ie,Vt),xa()}fa(["click","mousedown","mousemove","mouseup"]);export{fr as component};
