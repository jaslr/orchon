import"../chunks/DsnmJJEf.js";import{p as ut,c as V,b as $,n as Ct,a as d,d as mt,an as Mt,a9 as ga,D as xa,aa as O,f as R,M as r,O as n,I as t,L as k,P as ha,ao as _a,N as a,al as rt,ap as he,am as L,ar as Dt,as as Ye}from"../chunks/bOSu8_9I.js";import{s as Yt,d as ua,e as He,a as w}from"../chunks/Ctk_jbRy.js";import{i as S}from"../chunks/C3RYBViL.js";import{I as Ht,a as ee,h as ot,e as et,s as J}from"../chunks/CNoyRSNi.js";import{h as ma}from"../chunks/Bha2itWB.js";import{b as fa}from"../chunks/CMw6ZOtl.js";import{S as ya}from"../chunks/DT_KS8kY.js";import{s as Xt,r as It}from"../chunks/Di9dn3sX.js";import{B as Xe}from"../chunks/v44Eq2zK.js";import{G as ba}from"../chunks/DoOMFIXW.js";import{E as At}from"../chunks/D3M7jnZE.js";import{F as _e}from"../chunks/B4bRJSkD.js";import{S as Ie}from"../chunks/DzKsVWs4.js";function wa(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["path",{d:"m3 16 4 4 4-4"}],["path",{d:"M7 4v16"}],["path",{d:"M15 4h5l-5 6h5"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"}],["path",{d:"M20 18h-5"}]];Ht(K,Xt({name:"arrow-down-z-a"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}function $a(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["path",{d:"m3 8 4-4 4 4"}],["path",{d:"M7 4v16"}],["path",{d:"M20 8h-5"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10"}],["path",{d:"M15 14h5l-5 6h5"}]];Ht(K,Xt({name:"arrow-up-a-z"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}function Pa(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["circle",{cx:"12",cy:"12",r:"3"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}]];Ht(K,Xt({name:"focus"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}function Oe(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}],["path",{d:"M12 12V8"}]];Ht(K,Xt({name:"network"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}function Re(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3"}],["path",{d:"M18 5v16"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11"}],["path",{d:"M6 5v16"}],["circle",{cx:"12",cy:"9",r:"2"}]];Ht(K,Xt({name:"school"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}function ka(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];Ht(K,Xt({name:"zoom-in"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}function Na(K,p){ut(p,!0);let _=It(p,["$$slots","$$events","$$legacy"]);const U=[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]];Ht(K,Xt({name:"zoom-out"},()=>_,{get iconNode(){return U},children:(E,pt)=>{var N=V(),W=$(N);Yt(W,()=>p.children??Ct),d(E,N)},$$slots:{default:!0}})),mt()}var Ma=Dt('<path fill="none" stroke="rgba(16, 185, 129, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(16, 185, 129)"></circle>',1),Ca=Dt('<path fill="none" stroke="rgba(139, 92, 246, 0.5)" stroke-width="2"></path><!>',1),Ya=Dt('<path fill="none" stroke="rgba(75, 85, 99, 0.6)" stroke-width="2" stroke-dasharray="4 4"></path><circle r="4" fill="rgb(107, 114, 128)"></circle>',1),Ha=R('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[10px] text-gray-500 hover:text-gray-400 mt-1.5 group"><!> <span class="truncate"> </span> <!></a>'),Xa=R('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-xs text-emerald-400 hover:text-emerald-300 group"><span class="truncate"> </span> <!></a>'),Ia=R('<div class="absolute bg-gray-900 border-2 border-emerald-500 rounded-lg overflow-hidden shadow-xl shadow-emerald-500/10"><div class="px-4 py-2.5 bg-emerald-950/50 border-b border-emerald-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm">Org Portal</span></div> <div class="text-[9px] text-emerald-300/70 mt-0.5">junipa-organisations</div></div> <div class="px-4 py-2"><!> <div class="text-[9px] text-gray-500 mt-1 font-mono"> </div></div></div>'),Oa=R('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Ra=R('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-1.5 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-1.5"><!> <div class="text-[9px] text-gray-500 mt-0.5 font-mono"> </div></div></div>'),Ta=R('<div class="absolute bg-gray-800/60 border border-gray-700 rounded-lg overflow-hidden"><div class="px-3 py-2"><div class="flex items-center gap-2"><!> <span class="font-medium text-gray-200 text-sm"> </span></div> <!> <div class="text-[10px] text-gray-600 mt-1"> </div></div></div> <!> <!>',1),Sa=Dt('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),Ua=Dt('<path fill="none" stroke="rgba(99, 102, 241, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(99, 102, 241)"></circle>',1),Aa=R('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Da=R('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),La=R('<div class="text-[10px] text-gray-500 mt-0.5 font-mono"> </div>'),Ea=R('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-2 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-2"><!> <!></div></div>'),Ga=R('<div class="absolute bg-gray-900 border-2 border-indigo-500 rounded-lg overflow-hidden shadow-xl shadow-indigo-500/10"><div class="px-4 py-3 bg-indigo-950/50 border-b border-indigo-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <div class="text-[10px] text-indigo-300 mt-1">Source Repository</div></div> <div class="px-4 py-2"><!> <div class="text-[10px] text-gray-500 mt-1"> </div></div></div> <!>',1),za=Dt('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),ja=R('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 mt-1.5 group"><span class="truncate"> </span> <!></a>'),Ba=R('<div class="text-xs text-gray-500 mt-1.5">No production URL</div>'),Va=R('<div class="flex items-center gap-2 px-2 py-1.5 bg-gray-800/50 rounded text-xs"><span class="text-gray-400 w-12 shrink-0"> </span> <span class="text-gray-200 font-medium"> </span></div>'),Wa=R('<div class="bg-gray-900 border border-gray-700 rounded-lg overflow-hidden shadow-xl hover:border-gray-500 transition-colors"><div class="px-4 py-3 bg-gray-800/70 border-b border-gray-700"><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <span class="px-2 py-0.5 rounded text-[10px] font-medium bg-gray-700 text-gray-300"> </span></div> <!> <div class="text-[10px] text-gray-500 mt-1 font-mono"> </div></div> <div class="p-3 space-y-1.5 max-h-[200px] overflow-y-auto"></div></div>'),Za=R('<div class="grid gap-8 p-10" style="grid-template-columns: repeat(4, 280px);"></div>'),Fa=R('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Hierarchy:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Client</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Org Portal</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Campus</span></div></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Lines:</span> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-purple-500"></div> <span class="text-xs text-gray-400">to org portal</span></div> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-emerald-500 opacity-60" style="background: repeating-linear-gradient(90deg, rgb(16 185 129 / 0.6) 0px, rgb(16 185 129 / 0.6) 4px, transparent 4px, transparent 8px);"></div> <span class="text-xs text-gray-400">to campus</span></div></div>',1),qa=R('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),Ja=R('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Node Types:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Source Repo</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Deployed Instance</span></div></div>',1),Ka=R('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),Qa=R('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div>'),tr=R('<div class="h-full flex flex-col bg-gray-950 overflow-hidden"><div class="shrink-0 flex items-center justify-between px-4 py-2 bg-gray-900/80 border-b border-gray-800 backdrop-blur-sm z-10"><div class="flex items-center gap-4"><h1 class="text-lg font-semibold text-white">Infrastructure Map</h1> <div class="flex items-center gap-1 bg-gray-800 rounded-lg p-0.5"><button>Ownership</button> <button>Repos</button> <button>Flat</button></div> <span class="text-xs text-gray-500"><!></span></div> <div class="flex items-center gap-2"><a href="/infrastructure/settings" class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors" title="Manage GCP Projects"><!> Settings</a> <button class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors"><!> Sort</button> <div class="flex items-center gap-1 ml-2"><button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <span class="text-xs text-gray-400 w-14 text-center"> </span> <button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <button class="flex items-center gap-1.5 px-2 py-1.5 bg-blue-600 hover:bg-blue-500 rounded text-xs text-white font-medium ml-2" title="Fit diagram to view"><!> Fit</button></div></div></div> <div class="shrink-0 px-4 py-1 text-xs text-gray-500 bg-gray-900/50"> </div> <div role="application" tabindex="0"><div class="absolute inset-0 pointer-events-none"></div> <div class="absolute origin-top-left"><!></div></div> <div class="shrink-0 px-4 py-2 bg-gray-900/90 border-t border-gray-800 flex items-center gap-6 flex-wrap"><!></div></div>');function hr(K,p){ut(p,!0);let _=Mt("ownership"),U=Mt(!0),E=Mt(ga({}));xa(()=>{if(typeof window<"u"){const e=localStorage.getItem("gcp-project-overrides");if(e)try{O(E,JSON.parse(e),!0)}catch{O(E,{},!0)}}});function pt(e,i){return e in t(E)?t(E)[e]:i}let N=L(()=>p.data.projects.filter(e=>!e.sourceRepo)),W=L(()=>t(U)?[...t(N)].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...t(N)].sort((e,i)=>i.displayName.localeCompare(e.displayName))),Ot=L(()=>t(U)?[...p.data.sourceRepos].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...p.data.sourceRepos].sort((e,i)=>i.displayName.localeCompare(e.displayName))),ue=L(()=>p.data.clients.map(e=>{const i=e.campuses.filter(c=>pt(c.gcpProject,!0)),l=e.orgPortal?pt(e.orgPortal.gcpProject,!0):!0;return{...e,campuses:i,orgPortal:l?e.orgPortal:void 0}}).filter(e=>e.campuses.length>0||e.orgPortal)),ft=L(()=>t(U)?[...t(ue)].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...t(ue)].sort((e,i)=>i.displayName.localeCompare(e.displayName))),st=Mt(40),nt=Mt(40),j=Mt(1),yt,Wt=Mt(!1),Lt={x:0,y:0,panX:0,panY:0};const Zt=280,Et=120,Te=240,Rt=80,Tt=200,bt=80,Gt=280,wt=100,Se=240,it=75,$t=120,St=140,lt=20,Ft=50,tt=60,qt={jaslr:"#3b82f6","jvp-ux":"#8b5cf6"};function zt(e){try{return new URL(e).hostname}catch{return e}}function Ue(e){return e.find(l=>l.category==="hosting")?.provider||"unknown"}function Ae(e){e.preventDefault();const i=yt.getBoundingClientRect(),l=e.clientX-i.left,c=e.clientY-i.top,x=(l-t(st))/t(j),o=(c-t(nt))/t(j),s=e.deltaY>0?.9:1.1,v=Math.max(.1,Math.min(5,t(j)*s));O(st,l-x*v),O(nt,c-o*v),O(j,v,!0)}function De(e){e.target.closest("a")||(O(Wt,!0),Lt={x:e.clientX,y:e.clientY,panX:t(st),panY:t(nt)})}function Le(e){t(Wt)&&(O(st,Lt.panX+(e.clientX-Lt.x)),O(nt,Lt.panY+(e.clientY-Lt.y)))}function me(){O(Wt,!1)}function Ee(){const e=yt.getBoundingClientRect(),i=e.width/2,l=e.height/2,c=(i-t(st))/t(j),x=(l-t(nt))/t(j),o=Math.min(5,t(j)*1.25);O(st,i-c*o),O(nt,l-x*o),O(j,o,!0)}function Ge(){const e=yt.getBoundingClientRect(),i=e.width/2,l=e.height/2,c=(i-t(st))/t(j),x=(l-t(nt))/t(j),o=Math.max(.1,t(j)/1.25);O(st,i-c*o),O(nt,l-x*o),O(j,o,!0)}function fe(){if(t(_)==="ownership"){let e=tt;for(const l of t(ft)){const c=l.campuses.length>0?l.campuses.length*(it+lt)-lt:it,x=l.orgPortal?wt:0,o=Math.max(bt,x,c);e+=o+Ft}return{width:tt+Tt+$t+Gt+St+Se+tt,height:e+tt}}else if(t(_)==="repos"){let e=tt;for(const i of t(Ot)){const l=i.instances.length>0?i.instances.length*(Rt+lt)-lt:0,c=Math.max(Et,l);e+=c+Ft}return{width:tt+Zt+$t+Te+tt,height:e+tt}}return{width:1400,height:1200}}function ze(){if(!yt)return;const e=yt.getBoundingClientRect(),i=60,{width:l,height:c}=fe(),x=(e.width-i*2)/l,o=(e.height-i*2)/c,s=Math.min(x,o,1);O(st,(e.width-l*s)/2),O(nt,(e.height-c*s)/2),O(j,s,!0)}function je(){const e=new Map;let i=tt;const l=tt,c=tt+Tt+$t,x=c+Gt+St;for(const o of t(ft)){const s=o.campuses.length>0?o.campuses.length*(it+lt)-lt:it,v=o.orgPortal?wt:0,g=Math.max(bt,v,s),P=l,h=i+(g-bt)/2;let m,M;o.orgPortal&&(m=c,M=i+(g-wt)/2);const Y=[],H=i+(g-s)/2;for(let f=0;f<o.campuses.length;f++)Y.push({id:o.campuses[f].id,x,y:H+f*(it+lt)});e.set(o.id,{clientX:P,clientY:h,orgPortalX:m,orgPortalY:M,campusPositions:Y}),i+=g+Ft}return e}function Be(){const e=new Map;let i=tt;for(const l of t(Ot)){const c=l.instances.length>0?l.instances.length*(Rt+lt)-lt:0,x=Math.max(Et,c),o=tt,s=i+(x-Et)/2,v=[],g=i+(x-c)/2;for(let P=0;P<l.instances.length;P++)v.push({id:l.instances[P].id,x:tt+Zt+$t,y:g+P*(Rt+lt)});e.set(l.id,{x:o,y:s,instancePositions:v}),i+=x+Ft}return e}let ye=L(je),be=L(Be),Jt=L(fe);var ae=tr();ma("hoqwi7",e=>{ha(()=>{_a.title="Infrastructure Map | Orchon"})});var re=r(ae),oe=r(re),se=n(r(oe),2),ne=r(se);ne.__click=()=>O(_,"ownership");var ie=n(ne,2);ie.__click=()=>O(_,"repos");var we=n(ie,2);we.__click=()=>O(_,"flat"),a(se);var $e=n(se,2),Ve=r($e);{var We=e=>{var i=he();k((l,c)=>w(i,`${t(ft).length??""} clients, ${l??""} org portals, ${c??""} campuses`),[()=>t(ft).filter(l=>l.orgPortal).length,()=>t(ft).reduce((l,c)=>l+c.campuses.length,0)]),d(e,i)},Ze=e=>{var i=V(),l=$(i);{var c=o=>{var s=he();k(v=>w(s,`${t(Ot).length??""} repos, ${v??""} instances`),[()=>t(Ot).reduce((v,g)=>v+g.instances.length,0)]),d(o,s)},x=o=>{var s=he();k(()=>w(s,`${t(W).length??""} projects`)),d(o,s)};S(l,o=>{t(_)==="repos"?o(c):o(x,!1)},!0)}d(e,i)};S(Ve,e=>{t(_)==="ownership"?e(We):e(Ze,!1)})}a($e),a(oe);var Pe=n(oe,2),le=r(Pe),Fe=r(le);ya(Fe,{class:"w-3.5 h-3.5"}),rt(),a(le);var Kt=n(le,2);Kt.__click=()=>O(U,!t(U));var qe=r(Kt);{var Je=e=>{$a(e,{class:"w-3.5 h-3.5"})},Ke=e=>{wa(e,{class:"w-3.5 h-3.5"})};S(qe,e=>{t(U)?e(Je):e(Ke,!1)})}rt(),a(Kt);var ke=n(Kt,2),Qt=r(ke);Qt.__click=Ge;var Qe=r(Qt);Na(Qe,{class:"w-4 h-4"}),a(Qt);var de=n(Qt,2),ta=r(de);a(de);var te=n(de,2);te.__click=Ee;var ea=r(te);ka(ea,{class:"w-4 h-4"}),a(te);var ce=n(te,2);ce.__click=ze;var aa=r(ce);Pa(aa,{class:"w-3.5 h-3.5"}),rt(),a(ce),a(ke),a(Pe),a(re);var ve=n(re,2),ra=r(ve);a(ve);var dt=n(ve,2);let Ne;dt.__mousedown=De,dt.__mousemove=Le,dt.__mouseup=me;var Me=r(dt),pe=n(Me,2),oa=r(pe);{var sa=e=>{var i=Sa(),l=$(i);et(l,21,()=>t(ft),x=>x.id,(x,o)=>{const s=L(()=>t(ye).get(t(o).id));var v=V(),g=$(v);{var P=h=>{var m=V(),M=$(m);{var Y=f=>{var X=Ca(),Z=$(X),T=n(Z);et(T,17,()=>t(s).campusPositions,u=>u.id,(u,C)=>{var A=Ma(),G=$(A),xt=n(G);k(()=>{J(G,"d",`M ${t(s).orgPortalX+Gt} ${t(s).orgPortalY+wt/2}
										   C ${t(s).orgPortalX+Gt+St/2} ${t(s).orgPortalY+wt/2},
										     ${t(C).x-St/2} ${t(C).y+it/2},
										     ${t(C).x??""} ${t(C).y+it/2}`),J(xt,"cx",t(C).x),J(xt,"cy",t(C).y+it/2)}),d(u,A)}),k(()=>J(Z,"d",`M ${t(s).clientX+Tt} ${t(s).clientY+bt/2}
									   C ${t(s).clientX+Tt+$t/2} ${t(s).clientY+bt/2},
									     ${t(s).orgPortalX-$t/2} ${t(s).orgPortalY+wt/2},
									     ${t(s).orgPortalX??""} ${t(s).orgPortalY+wt/2}`)),d(f,X)},H=f=>{var X=V(),Z=$(X);et(Z,17,()=>t(s).campusPositions,T=>T.id,(T,u)=>{var C=Ya(),A=$(C),G=n(A);k(()=>{J(A,"d",`M ${t(s).clientX+Tt} ${t(s).clientY+bt/2}
										   C ${t(s).clientX+Tt+($t+Gt+St)/2} ${t(s).clientY+bt/2},
										     ${t(u).x-St/2} ${t(u).y+it/2},
										     ${t(u).x??""} ${t(u).y+it/2}`),J(G,"cx",t(u).x),J(G,"cy",t(u).y+it/2)}),d(T,C)}),d(f,X)};S(M,f=>{t(o).orgPortal&&t(s).orgPortalX!==void 0&&t(s).orgPortalY!==void 0?f(Y):f(H,!1)})}d(h,m)};S(g,h=>{t(s)&&h(P)})}d(x,v)}),a(l);var c=n(l);et(c,17,()=>t(ft),x=>x.id,(x,o)=>{const s=L(()=>t(ye).get(t(o).id));var v=V(),g=$(v);{var P=h=>{var m=Ta(),M=$(m),Y=r(M),H=r(Y),f=r(H);Xe(f,{class:"w-4 h-4 text-gray-400"});var X=n(f,2),Z=r(X,!0);a(X),a(H);var T=n(H,2);{var u=F=>{var B=Ha(),y=r(B);ba(y,{class:"w-3 h-3"});var b=n(y,2),z=r(b,!0);a(b);var I=n(b,2);At(I,{class:"w-2 h-2 opacity-50 group-hover:opacity-100"}),a(B),k(D=>{J(B,"href",t(o).marketingUrl),w(z,D)},[()=>zt(t(o).marketingUrl)]),d(F,B)};S(T,F=>{t(o).marketingUrl&&F(u)})}var C=n(T,2),A=r(C);a(C),a(Y),a(M);var G=n(M,2);{var xt=F=>{var B=Ia(),y=r(B),b=r(y),z=r(b);Oe(z,{class:"w-4 h-4 text-emerald-400"}),rt(2),a(b),rt(2),a(y);var I=n(y,2),D=r(I);{var Q=at=>{var vt=Xa(),ht=r(vt),kt=r(ht,!0);a(ht);var jt=n(ht,2);At(jt,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(vt),k(()=>{J(vt,"href",t(o).orgPortal.productionUrl),w(kt,t(o).orgPortal.customDomain)}),d(at,vt)};S(D,at=>{t(o).orgPortal.productionUrl&&at(Q)})}var q=n(D,2),ct=r(q,!0);a(q),a(I),a(B),k(()=>{ot(B,`left: ${t(s).orgPortalX??""}px; top: ${t(s).orgPortalY??""}px; width: 280px; min-height: 100px;`),w(ct,t(o).orgPortal.gcpProject)}),d(F,B)};S(G,F=>{t(o).orgPortal&&t(s).orgPortalX!==void 0&&t(s).orgPortalY!==void 0&&F(xt)})}var Pt=n(G,2);et(Pt,19,()=>t(s).campusPositions,F=>F.id,(F,B,y)=>{const b=L(()=>t(o).campuses[t(y)]);var z=Ra(),I=r(z),D=r(I),Q=r(D);Re(Q,{class:"w-3.5 h-3.5 text-blue-400"});var q=n(Q,2),ct=r(q,!0);a(q),a(D),a(I);var at=n(I,2),vt=r(at);{var ht=Ut=>{var Nt=Oa(),Bt=r(Nt),ge=r(Bt,!0);a(Bt);var xe=n(Bt,2);At(xe,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(Nt),k(gt=>{J(Nt,"href",t(b).productionUrl),w(ge,gt)},[()=>t(b).customDomain||zt(t(b).productionUrl)]),d(Ut,Nt)};S(vt,Ut=>{t(b).productionUrl&&Ut(ht)})}var kt=n(vt,2),jt=r(kt,!0);a(kt),a(at),a(z),k(()=>{ot(z,`left: ${t(B).x??""}px; top: ${t(B).y??""}px; width: 240px; min-height: 75px;`),w(ct,t(b).displayName),w(jt,t(b).gcpProject)}),d(F,z)}),k(()=>{ot(M,`left: ${t(s).clientX??""}px; top: ${t(s).clientY??""}px; width: 200px; min-height: 80px;`),w(Z,t(o).displayName),w(A,`${t(o).campuses.length??""} campus${t(o).campuses.length!==1?"es":""}`)}),d(h,m)};S(g,h=>{t(s)&&h(P)})}d(x,v)}),k(()=>ot(l,`width: ${t(Jt).width??""}px; height: ${t(Jt).height??""}px;`)),d(e,i)},na=e=>{var i=V(),l=$(i);{var c=o=>{var s=za(),v=$(s);et(v,21,()=>t(Ot),P=>P.id,(P,h)=>{const m=L(()=>t(be).get(t(h).id));var M=V(),Y=$(M);{var H=f=>{var X=V(),Z=$(X);et(Z,17,()=>t(m).instancePositions,T=>T.id,(T,u)=>{var C=Ua(),A=$(C),G=n(A);k(()=>{J(A,"d",`M ${t(m).x+Zt} ${t(m).y+Et/2}
									   C ${t(m).x+Zt+HORIZONTAL_GAP/2} ${t(m).y+Et/2},
									     ${t(u).x-HORIZONTAL_GAP/2} ${t(u).y+Rt/2},
									     ${t(u).x??""} ${t(u).y+Rt/2}`),J(G,"cx",t(u).x),J(G,"cy",t(u).y+Rt/2)}),d(T,C)}),d(f,X)};S(Y,f=>{t(m)&&t(h).instances.length>0&&f(H)})}d(P,M)}),a(v);var g=n(v);et(g,17,()=>t(Ot),P=>P.id,(P,h)=>{const m=L(()=>t(be).get(t(h).id)),M=L(()=>qt[t(h).identity]||"#6b7280");var Y=V(),H=$(Y);{var f=X=>{var Z=Ga(),T=$(Z),u=r(T),C=r(u),A=r(C);_e(A,{class:"w-4 h-4 text-indigo-400"});var G=n(A,2),xt=r(G,!0);a(G),a(C),rt(2),a(u);var Pt=n(u,2),F=r(Pt);{var B=I=>{var D=Aa(),Q=r(D),q=r(Q,!0);a(Q);var ct=n(Q,2);At(ct,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(D),k(at=>{J(D,"href",t(h).productionUrl),w(q,at)},[()=>zt(t(h).productionUrl)]),d(I,D)};S(F,I=>{t(h).productionUrl&&I(B)})}var y=n(F,2),b=r(y);a(y),a(Pt),a(T);var z=n(T,2);et(z,19,()=>t(m).instancePositions,I=>I.id,(I,D,Q)=>{const q=L(()=>t(h).instances[t(Q)]);var ct=Ea(),at=r(ct),vt=r(at),ht=r(vt);Ie(ht,{class:"w-3.5 h-3.5 text-emerald-400"});var kt=n(ht,2),jt=r(kt,!0);a(kt),a(vt),a(at);var Ut=n(at,2),Nt=r(Ut);{var Bt=gt=>{var _t=Da(),Vt=r(_t),ca=r(Vt,!0);a(Vt);var va=n(Vt,2);At(va,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(_t),k(pa=>{J(_t,"href",t(q).productionUrl),w(ca,pa)},[()=>zt(t(q).productionUrl)]),d(gt,_t)};S(Nt,gt=>{t(q).productionUrl&&gt(Bt)})}var ge=n(Nt,2);{var xe=gt=>{var _t=La(),Vt=r(_t,!0);a(_t),k(()=>w(Vt,t(q).gcpProject)),d(gt,_t)};S(ge,gt=>{t(q).gcpProject&&gt(xe)})}a(Ut),a(ct),k(()=>{ot(ct,`left: ${t(D).x??""}px; top: ${t(D).y??""}px; width: 240px; height: 80px;`),w(jt,t(q).displayName)}),d(I,ct)}),k(()=>{ot(T,`left: ${t(m).x??""}px; top: ${t(m).y??""}px; width: 280px; height: 120px; border-left: 4px solid ${t(M)??""};`),w(xt,t(h).displayName),w(b,`${t(h).instances.length??""} deployed instance${t(h).instances.length!==1?"s":""}`)}),d(X,Z)};S(H,X=>{t(m)&&X(f)})}d(P,Y)}),k(()=>ot(v,`width: ${t(Jt).width??""}px; height: ${t(Jt).height??""}px;`)),d(o,s)},x=o=>{var s=Za();et(s,21,()=>t(W),v=>v.id,(v,g)=>{const P=L(()=>qt[t(g).identity]||"#6b7280"),h=L(()=>Ue(t(g).services));var m=Wa(),M=r(m),Y=r(M),H=r(Y),f=r(H);{var X=y=>{_e(y,{class:"w-4 h-4 text-indigo-400"})};S(f,y=>{t(g).isSourceRepo&&y(X)})}var Z=n(f,2),T=r(Z,!0);a(Z),a(H);var u=n(H,2),C=r(u,!0);a(u),a(Y);var A=n(Y,2);{var G=y=>{var b=ja(),z=r(b),I=r(z,!0);a(z);var D=n(z,2);At(D,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(b),k(Q=>{J(b,"href",t(g).productionUrl),w(I,Q)},[()=>zt(t(g).productionUrl)]),d(y,b)},xt=y=>{var b=Ba();d(y,b)};S(A,y=>{t(g).productionUrl?y(G):y(xt,!1)})}var Pt=n(A,2),F=r(Pt,!0);a(Pt),a(M);var B=n(M,2);et(B,23,()=>t(g).services,(y,b)=>y.provider+"-"+y.category+"-"+b,(y,b)=>{var z=Va(),I=r(z),D=r(I,!0);a(I);var Q=n(I,2),q=r(Q,!0);a(Q),a(z),k(()=>{w(D,t(b).category),w(q,t(b).provider)}),d(y,z)}),a(B),a(m),k(()=>{ot(m,`border-left: 4px solid ${t(P)??""}; width: 280px;`),w(T,t(g).displayName),w(C,t(h)),w(F,t(g).id)}),d(v,m)}),a(s),d(o,s)};S(l,o=>{t(_)==="repos"?o(c):o(x,!1)},!0)}d(e,i)};S(oa,e=>{t(_)==="ownership"?e(sa):e(na,!1)})}a(pe),a(dt),fa(dt,e=>yt=e,()=>yt);var Ce=n(dt,2),ia=r(Ce);{var la=e=>{var i=Fa(),l=$(i),c=n(r(l),2),x=r(c);Xe(x,{class:"w-3.5 h-3.5 text-gray-400"}),rt(2),a(c);var o=n(c,2),s=r(o);Oe(s,{class:"w-3.5 h-3.5 text-emerald-400"}),rt(2),a(o);var v=n(o,2),g=r(v);Re(g,{class:"w-3.5 h-3.5 text-blue-400"}),rt(2),a(v),a(l),rt(2),d(e,i)},da=e=>{var i=V(),l=$(i);{var c=o=>{var s=Ja(),v=$(s),g=n(r(v),2);et(g,17,()=>Object.entries(qt),([H,f])=>H,(H,f)=>{var X=L(()=>Ye(t(f),2));let Z=()=>t(X)[0],T=()=>t(X)[1];var u=qa(),C=r(u),A=n(C,2),G=r(A,!0);a(A),a(u),k(()=>{ot(C,`background-color: ${T()??""};`),w(G,Z())}),d(H,u)}),a(v);var P=n(v,2),h=n(r(P),2),m=r(h);_e(m,{class:"w-3.5 h-3.5 text-indigo-400"}),rt(2),a(h);var M=n(h,2),Y=r(M);Ie(Y,{class:"w-3.5 h-3.5 text-emerald-400"}),rt(2),a(M),a(P),d(o,s)},x=o=>{var s=Qa(),v=n(r(s),2);et(v,17,()=>Object.entries(qt),([g,P])=>g,(g,P)=>{var h=L(()=>Ye(t(P),2));let m=()=>t(h)[0],M=()=>t(h)[1];var Y=Ka(),H=r(Y),f=n(H,2),X=r(f,!0);a(f),a(Y),k(()=>{ot(H,`background-color: ${M()??""};`),w(X,m())}),d(g,Y)}),a(s),d(o,s)};S(l,o=>{t(_)==="repos"?o(c):o(x,!1)},!0)}d(e,i)};S(ia,e=>{t(_)==="ownership"?e(la):e(da,!1)})}a(Ce),a(ae),k(e=>{ee(ne,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(_)==="ownership"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`),ee(ie,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(_)==="repos"?"bg-indigo-600 text-white":"text-gray-400 hover:text-white"}`),ee(we,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(_)==="flat"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`),w(ta,`${e??""}%`),w(ra,`Scroll to zoom | Drag to pan | ${t(_)==="ownership"?"Organisation ownership hierarchy":t(_)==="repos"?"Source repos with deployed instances":"All projects"}`),Ne=ee(dt,1,"flex-1 overflow-hidden relative cursor-grab select-none",null,Ne,{"cursor-grabbing":t(Wt)}),ot(Me,`
				background-image:
					linear-gradient(rgba(55, 65, 81, 0.3) 1px, transparent 1px),
					linear-gradient(90deg, rgba(55, 65, 81, 0.3) 1px, transparent 1px);
				background-size: ${40*t(j)}px ${40*t(j)}px;
				background-position: ${t(st)??""}px ${t(nt)??""}px;
			`),ot(pe,`transform: translate(${t(st)??""}px, ${t(nt)??""}px) scale(${t(j)??""});`)},[()=>Math.round(t(j)*100)]),He("wheel",dt,Ae),He("mouseleave",dt,me),d(K,ae),mt()}ua(["click","mousedown","mousemove","mouseup"]);export{hr as component};
