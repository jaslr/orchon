import"../chunks/DsnmJJEf.js";import{p as Vt,k as q,l as I,o as ge,c as d,d as qt,s as Pt,a as ha,u as ua,b as O,f as M,i as r,j as n,g as t,t as y,h as ma,$ as fa,r as a,n as Q,m as ve,e as D,v as It,a$ as Xe}from"../chunks/BZ9E3_SD.js";import{s as h}from"../chunks/w6f9Dn5M.js";import{i as S}from"../chunks/B-25t-Xl.js";import{s as Zt,a as tt,e as V}from"../chunks/DqmgPq9b.js";import{h as ya}from"../chunks/BNx1VcPb.js";import{I as xe,s as W}from"../chunks/BtPIuOMa.js";import{d as ba,e as Ie}from"../chunks/C_ntH7U2.js";import{b as wa}from"../chunks/DWV1ksMT.js";import{S as $a}from"../chunks/CGb6VMYq.js";import{a as Pa,Z as ka,F as Ca,A as Ma}from"../chunks/CowGnS4_.js";import{s as _e}from"../chunks/7Z-uf5tq.js";import{s as he,r as ue}from"../chunks/D6GbuAV1.js";import{B as He}from"../chunks/DUdwquvR.js";import{P as Na}from"../chunks/Bbu46QjL.js";import{G as Ya}from"../chunks/BQg6rOTM.js";import{E as Xt}from"../chunks/BBLIfywf.js";import{F as pe}from"../chunks/BZ758-zP.js";import{S as Re}from"../chunks/BdQ0v9Mu.js";function Xa(ht,N){Vt(N,!0);let H=ue(N,["$$slots","$$events","$$legacy"]);const J=[["path",{d:"m3 16 4 4 4-4"}],["path",{d:"M7 4v16"}],["path",{d:"M15 4h5l-5 6h5"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"}],["path",{d:"M20 18h-5"}]];xe(ht,he({name:"arrow-down-z-a"},()=>H,{get iconNode(){return J},children:(ot,Ht)=>{var et=q(),pt=I(et);_e(pt,()=>N.children??ge),d(ot,et)},$$slots:{default:!0}})),qt()}function Oe(ht,N){Vt(N,!0);let H=ue(N,["$$slots","$$events","$$legacy"]);const J=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"}],["path",{d:"M12 12V8"}]];xe(ht,he({name:"network"},()=>H,{get iconNode(){return J},children:(ot,Ht)=>{var et=q(),pt=I(et);_e(pt,()=>N.children??ge),d(ot,et)},$$slots:{default:!0}})),qt()}function Se(ht,N){Vt(N,!0);let H=ue(N,["$$slots","$$events","$$legacy"]);const J=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3"}],["path",{d:"M18 5v16"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11"}],["path",{d:"M6 5v16"}],["circle",{cx:"12",cy:"9",r:"2"}]];xe(ht,he({name:"school"},()=>H,{get iconNode(){return J},children:(ot,Ht)=>{var et=q(),pt=I(et);_e(pt,()=>N.children??ge),d(ot,et)},$$slots:{default:!0}})),qt()}var Ia=It('<path fill="none" stroke="rgba(16, 185, 129, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(16, 185, 129)"></circle>',1),Ha=It('<path fill="none" stroke="rgba(139, 92, 246, 0.5)" stroke-width="2"></path><!>',1),Ra=It('<path fill="none" stroke="rgba(75, 85, 99, 0.6)" stroke-width="2" stroke-dasharray="4 4"></path><circle r="4" fill="rgb(107, 114, 128)"></circle>',1),Oa=M('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[10px] text-gray-500 hover:text-gray-400 mt-1.5 group"><!> <span class="truncate"> </span> <!></a>'),Sa=M('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-xs text-emerald-400 hover:text-emerald-300 group"><span class="truncate"> </span> <!></a>'),Ua=M('<div class="absolute bg-gray-900 border-2 border-emerald-500 rounded-lg overflow-hidden shadow-xl shadow-emerald-500/10"><div class="px-4 py-2.5 bg-emerald-950/50 border-b border-emerald-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm">Org Portal</span></div> <div class="text-[9px] text-emerald-300/70 mt-0.5">junipa-organisations</div></div> <div class="px-4 py-2"><!> <div class="text-[9px] text-gray-500 mt-1 font-mono"> </div></div></div>'),Ta=M('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Da=M('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-1.5 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-1.5"><!> <div class="text-[9px] text-gray-500 mt-0.5 font-mono"> </div></div></div>'),Aa=M('<div class="absolute bg-gray-800/60 border border-gray-700 rounded-lg overflow-hidden"><div class="px-3 py-2"><div class="flex items-center gap-2"><!> <span class="font-medium text-gray-200 text-sm"> </span></div> <!> <div class="text-[10px] text-gray-600 mt-1"> </div></div></div> <!> <!>',1),Ea=It('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),La=It('<path fill="none" stroke="rgba(99, 102, 241, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(99, 102, 241)"></circle>',1),Ga=M('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),ja=M('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),za=M('<div class="text-[10px] text-gray-500 mt-0.5 font-mono"> </div>'),Ba=M('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-2 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-2"><!> <!></div></div>'),Wa=M('<div class="absolute bg-gray-900 border-2 border-indigo-500 rounded-lg overflow-hidden shadow-xl shadow-indigo-500/10"><div class="px-4 py-3 bg-indigo-950/50 border-b border-indigo-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <div class="text-[10px] text-indigo-300 mt-1">Source Repository</div></div> <div class="px-4 py-2"><!> <div class="text-[10px] text-gray-500 mt-1"> </div></div></div> <!>',1),Fa=It('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),Za=M('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 mt-1.5 group"><span class="truncate"> </span> <!></a>'),Va=M('<div class="text-xs text-gray-500 mt-1.5">No production URL</div>'),qa=M('<div class="flex items-center gap-2 px-2 py-1.5 bg-gray-800/50 rounded text-xs"><span class="text-gray-400 w-12 shrink-0"> </span> <span class="text-gray-200 font-medium"> </span></div>'),Ja=M('<div class="bg-gray-900 border border-gray-700 rounded-lg overflow-hidden shadow-xl hover:border-gray-500 transition-colors"><div class="px-4 py-3 bg-gray-800/70 border-b border-gray-700"><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <span class="px-2 py-0.5 rounded text-[10px] font-medium bg-gray-700 text-gray-300"> </span></div> <!> <div class="text-[10px] text-gray-500 mt-1 font-mono"> </div></div> <div class="p-3 space-y-1.5 max-h-[200px] overflow-y-auto"></div></div>'),Ka=M('<div class="grid gap-8 p-10" style="grid-template-columns: repeat(4, 280px);"></div>'),Qa=M('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Hierarchy:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Client</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Org Portal</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Campus</span></div></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Lines:</span> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-purple-500"></div> <span class="text-xs text-gray-400">to org portal</span></div> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-emerald-500 opacity-60" style="background: repeating-linear-gradient(90deg, rgb(16 185 129 / 0.6) 0px, rgb(16 185 129 / 0.6) 4px, transparent 4px, transparent 8px);"></div> <span class="text-xs text-gray-400">to campus</span></div></div>',1),tr=M('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),er=M('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Node Types:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Source Repo</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Deployed Instance</span></div></div>',1),ar=M('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),rr=M('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div>'),sr=M('<span class="px-1.5 py-0.5 bg-gray-800 rounded text-[10px] text-gray-400"> </span>'),or=M('<div class="flex items-center gap-4 text-xs border-l border-gray-700 pl-4"><div class="flex items-center gap-1.5"><!> <span class="text-gray-400 font-mono"> </span> <span class="text-cyan-400 font-mono"> </span></div> <div class="flex items-center gap-2 text-gray-500"><span> </span> <span class="text-gray-600">|</span> <span> </span></div> <div class="flex items-center gap-1.5 text-gray-600"></div></div>'),nr=M('<div class="h-full flex flex-col bg-gray-950 overflow-hidden"><div class="shrink-0 flex items-center justify-between px-4 py-2 bg-gray-900/80 border-b border-gray-800 backdrop-blur-sm z-10"><div class="flex items-center gap-4"><h1 class="text-lg font-semibold text-white">Infrastructure Map</h1> <div class="flex items-center gap-1 bg-gray-800 rounded-lg p-0.5"><button>Ownership</button> <button>Repos</button> <button>Flat</button></div> <span class="text-xs text-gray-500"><!></span></div> <div class="flex items-center gap-2"><a href="/infrastructure/settings" class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors" title="Manage GCP Projects"><!> Settings</a> <button class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors"><!> Sort</button> <div class="flex items-center gap-1 ml-2"><button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <span class="text-xs text-gray-400 w-14 text-center"> </span> <button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <button class="flex items-center gap-1.5 px-2 py-1.5 bg-blue-600 hover:bg-blue-500 rounded text-xs text-white font-medium ml-2" title="Fit diagram to view"><!> Fit</button></div></div></div> <div class="shrink-0 px-4 py-1 text-xs text-gray-500 bg-gray-900/50"> </div> <div role="application" tabindex="0"><div class="absolute inset-0 pointer-events-none"></div> <div class="absolute origin-top-left"><!></div></div> <div class="shrink-0 px-4 py-2 bg-gray-900/90 border-t border-gray-800 flex items-center justify-between gap-6 flex-wrap"><div class="flex items-center gap-6 flex-wrap"><!></div> <!></div></div>');function Cr(ht,N){Vt(N,!0);let H=Pt("ownership"),J=Pt(!0),ot=Pt(ha({}));ua(()=>{if(typeof window<"u"){const e=localStorage.getItem("gcp-project-overrides");if(e)try{O(ot,JSON.parse(e),!0)}catch{O(ot,{},!0)}}});function Ht(e,i){return e in t(ot)?t(ot)[e]:i}let et=D(()=>N.data.projects.filter(e=>!e.sourceRepo)),pt=D(()=>t(J)?[...t(et)].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...t(et)].sort((e,i)=>i.displayName.localeCompare(e.displayName))),kt=D(()=>t(J)?[...N.data.sourceRepos].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...N.data.sourceRepos].sort((e,i)=>i.displayName.localeCompare(e.displayName))),me=D(()=>N.data.clients.map(e=>{const i=e.campuses.filter(c=>Ht(c.gcpProject,!0)),l=e.orgPortal?Ht(e.orgPortal.gcpProject,!0):!0;return{...e,campuses:i,orgPortal:l?e.orgPortal:void 0}}).filter(e=>e.campuses.length>0||e.orgPortal)),ut=D(()=>t(J)?[...t(me)].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...t(me)].sort((e,i)=>i.displayName.localeCompare(e.displayName))),at=Pt(40),rt=Pt(40),G=Pt(1),mt,Et=Pt(!1),Rt={x:0,y:0,panX:0,panY:0};const Lt=280,Ot=120,Ue=240,Ct=80,Mt=200,ft=80,St=280,yt=100,Te=240,st=75,ct=120,Nt=140,nt=20,Gt=50,Z=60,jt={jaslr:"#3b82f6","jvp-ux":"#8b5cf6"};function Ut(e){try{return new URL(e).hostname}catch{return e}}function De(e){return e.find(l=>l.category==="hosting")?.provider||"unknown"}function Ae(e){e.preventDefault();const i=mt.getBoundingClientRect(),l=e.clientX-i.left,c=e.clientY-i.top,g=(l-t(at))/t(G),s=(c-t(rt))/t(G),o=e.deltaY>0?.9:1.1,v=Math.max(.1,Math.min(5,t(G)*o));O(at,l-g*v),O(rt,c-s*v),O(G,v,!0)}function Ee(e){e.target.closest("a")||(O(Et,!0),Rt={x:e.clientX,y:e.clientY,panX:t(at),panY:t(rt)})}function Le(e){t(Et)&&(O(at,Rt.panX+(e.clientX-Rt.x)),O(rt,Rt.panY+(e.clientY-Rt.y)))}function fe(){O(Et,!1)}function Ge(){const e=mt.getBoundingClientRect(),i=e.width/2,l=e.height/2,c=(i-t(at))/t(G),g=(l-t(rt))/t(G),s=Math.min(5,t(G)*1.25);O(at,i-c*s),O(rt,l-g*s),O(G,s,!0)}function je(){const e=mt.getBoundingClientRect(),i=e.width/2,l=e.height/2,c=(i-t(at))/t(G),g=(l-t(rt))/t(G),s=Math.max(.1,t(G)/1.25);O(at,i-c*s),O(rt,l-g*s),O(G,s,!0)}function ye(){if(t(H)==="ownership"){let e=Z;for(const l of t(ut)){const c=l.campuses.length>0?l.campuses.length*(st+nt)-nt:st,g=l.orgPortal?yt:0,s=Math.max(ft,g,c);e+=s+Gt}return{width:Z+Mt+ct+St+Nt+Te+Z,height:e+Z}}else if(t(H)==="repos"){let e=Z;for(const i of t(kt)){const l=i.instances.length>0?i.instances.length*(Ct+nt)-nt:0,c=Math.max(Ot,l);e+=c+Gt}return{width:Z+Lt+ct+Ue+Z,height:e+Z}}return{width:1400,height:1200}}function ze(){if(!mt)return;const e=mt.getBoundingClientRect(),i=60,{width:l,height:c}=ye(),g=(e.width-i*2)/l,s=(e.height-i*2)/c,o=Math.min(g,s,1);O(at,(e.width-l*o)/2),O(rt,(e.height-c*o)/2),O(G,o,!0)}function Be(){const e=new Map;let i=Z;const l=Z,c=Z+Mt+ct,g=c+St+Nt;for(const s of t(ut)){const o=s.campuses.length>0?s.campuses.length*(st+nt)-nt:st,v=s.orgPortal?yt:0,p=Math.max(ft,v,o),m=l,x=i+(p-ft)/2;let _,k;s.orgPortal&&(_=c,k=i+(p-yt)/2);const C=[],$=i+(p-o)/2;for(let u=0;u<s.campuses.length;u++)C.push({id:s.campuses[u].id,x:g,y:$+u*(st+nt)});e.set(s.id,{clientX:m,clientY:x,orgPortalX:_,orgPortalY:k,campusPositions:C}),i+=p+Gt}return e}function We(){const e=new Map;let i=Z;for(const l of t(kt)){const c=l.instances.length>0?l.instances.length*(Ct+nt)-nt:0,g=Math.max(Ot,c),s=Z,o=i+(g-Ot)/2,v=[],p=i+(g-c)/2;for(let m=0;m<l.instances.length;m++)v.push({id:l.instances[m].id,x:Z+Lt+ct,y:p+m*(Ct+nt)});e.set(l.id,{x:s,y:o,instancePositions:v}),i+=g+Gt}return e}let be=D(Be),we=D(We),zt=D(ye);var Jt=nr();ya("hoqwi7",e=>{ma(()=>{fa.title="Infrastructure Map | Orchon"})});var Kt=r(Jt),Qt=r(Kt),te=n(r(Qt),2),ee=r(te);ee.__click=()=>O(H,"ownership");var ae=n(ee,2);ae.__click=()=>O(H,"repos");var $e=n(ae,2);$e.__click=()=>O(H,"flat"),a(te);var Pe=n(te,2),Fe=r(Pe);{var Ze=e=>{var i=ve();y((l,c)=>h(i,`${t(ut).length??""} clients, ${l??""} org portals, ${c??""} campuses`),[()=>t(ut).filter(l=>l.orgPortal).length,()=>t(ut).reduce((l,c)=>l+c.campuses.length,0)]),d(e,i)},Ve=e=>{var i=q(),l=I(i);{var c=s=>{var o=ve();y(v=>h(o,`${t(kt).length??""} repos, ${v??""} instances`),[()=>t(kt).reduce((v,p)=>v+p.instances.length,0)]),d(s,o)},g=s=>{var o=ve();y(()=>h(o,`${t(pt).length??""} projects`)),d(s,o)};S(l,s=>{t(H)==="repos"?s(c):s(g,!1)},!0)}d(e,i)};S(Fe,e=>{t(H)==="ownership"?e(Ze):e(Ve,!1)})}a(Pe),a(Qt);var ke=n(Qt,2),re=r(ke),qe=r(re);$a(qe,{class:"w-3.5 h-3.5"}),Q(),a(re);var Bt=n(re,2);Bt.__click=()=>O(J,!t(J));var Je=r(Bt);{var Ke=e=>{Ma(e,{class:"w-3.5 h-3.5"})},Qe=e=>{Xa(e,{class:"w-3.5 h-3.5"})};S(Je,e=>{t(J)?e(Ke):e(Qe,!1)})}Q(),a(Bt);var Ce=n(Bt,2),Wt=r(Ce);Wt.__click=je;var ta=r(Wt);Pa(ta,{class:"w-4 h-4"}),a(Wt);var se=n(Wt,2),ea=r(se);a(se);var Ft=n(se,2);Ft.__click=Ge;var aa=r(Ft);ka(aa,{class:"w-4 h-4"}),a(Ft);var oe=n(Ft,2);oe.__click=ze;var ra=r(oe);Ca(ra,{class:"w-3.5 h-3.5"}),Q(),a(oe),a(Ce),a(ke),a(Kt);var ne=n(Kt,2),sa=r(ne);a(ne);var it=n(ne,2);let Me;it.__mousedown=Ee,it.__mousemove=Le,it.__mouseup=fe;var Ne=r(it),ie=n(Ne,2),oa=r(ie);{var na=e=>{var i=Ea(),l=I(i);V(l,21,()=>t(ut),g=>g.id,(g,s)=>{const o=D(()=>t(be).get(t(s).id));var v=q(),p=I(v);{var m=x=>{var _=q(),k=I(_);{var C=u=>{var P=Ha(),A=I(P),Y=n(A);V(Y,17,()=>t(o).campusPositions,f=>f.id,(f,X)=>{var U=Ia(),E=I(U),gt=n(E);y(()=>{W(E,"d",`M ${t(o).orgPortalX+St} ${t(o).orgPortalY+yt/2}
										   C ${t(o).orgPortalX+St+Nt/2} ${t(o).orgPortalY+yt/2},
										     ${t(X).x-Nt/2} ${t(X).y+st/2},
										     ${t(X).x??""} ${t(X).y+st/2}`),W(gt,"cx",t(X).x),W(gt,"cy",t(X).y+st/2)}),d(f,U)}),y(()=>W(A,"d",`M ${t(o).clientX+Mt} ${t(o).clientY+ft/2}
									   C ${t(o).clientX+Mt+ct/2} ${t(o).clientY+ft/2},
									     ${t(o).orgPortalX-ct/2} ${t(o).orgPortalY+yt/2},
									     ${t(o).orgPortalX??""} ${t(o).orgPortalY+yt/2}`)),d(u,P)},$=u=>{var P=q(),A=I(P);V(A,17,()=>t(o).campusPositions,Y=>Y.id,(Y,f)=>{var X=Ra(),U=I(X),E=n(U);y(()=>{W(U,"d",`M ${t(o).clientX+Mt} ${t(o).clientY+ft/2}
										   C ${t(o).clientX+Mt+(ct+St+Nt)/2} ${t(o).clientY+ft/2},
										     ${t(f).x-Nt/2} ${t(f).y+st/2},
										     ${t(f).x??""} ${t(f).y+st/2}`),W(E,"cx",t(f).x),W(E,"cy",t(f).y+st/2)}),d(Y,X)}),d(u,P)};S(k,u=>{t(s).orgPortal&&t(o).orgPortalX!==void 0&&t(o).orgPortalY!==void 0?u(C):u($,!1)})}d(x,_)};S(p,x=>{t(o)&&x(m)})}d(g,v)}),a(l);var c=n(l);V(c,17,()=>t(ut),g=>g.id,(g,s)=>{const o=D(()=>t(be).get(t(s).id));var v=q(),p=I(v);{var m=x=>{var _=Aa(),k=I(_),C=r(k),$=r(C),u=r($);He(u,{class:"w-4 h-4 text-gray-400"});var P=n(u,2),A=r(P,!0);a(P),a($);var Y=n($,2);{var f=z=>{var j=Oa(),b=r(j);Ya(b,{class:"w-3 h-3"});var w=n(b,2),L=r(w,!0);a(w);var R=n(w,2);Xt(R,{class:"w-2 h-2 opacity-50 group-hover:opacity-100"}),a(j),y(T=>{W(j,"href",t(s).marketingUrl),h(L,T)},[()=>Ut(t(s).marketingUrl)]),d(z,j)};S(Y,z=>{t(s).marketingUrl&&z(f)})}var X=n(Y,2),U=r(X);a(X),a(C),a(k);var E=n(k,2);{var gt=z=>{var j=Ua(),b=r(j),w=r(b),L=r(w);Oe(L,{class:"w-4 h-4 text-emerald-400"}),Q(2),a(w),Q(2),a(b);var R=n(b,2),T=r(R);{var F=K=>{var dt=Sa(),xt=r(dt),wt=r(xt,!0);a(xt);var Tt=n(xt,2);Xt(Tt,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(dt),y(()=>{W(dt,"href",t(s).orgPortal.productionUrl),h(wt,t(s).orgPortal.customDomain)}),d(K,dt)};S(T,K=>{t(s).orgPortal.productionUrl&&K(F)})}var B=n(T,2),lt=r(B,!0);a(B),a(R),a(j),y(()=>{tt(j,`left: ${t(o).orgPortalX??""}px; top: ${t(o).orgPortalY??""}px; width: 280px; min-height: 100px;`),h(lt,t(s).orgPortal.gcpProject)}),d(z,j)};S(E,z=>{t(s).orgPortal&&t(o).orgPortalX!==void 0&&t(o).orgPortalY!==void 0&&z(gt)})}var bt=n(E,2);V(bt,19,()=>t(o).campusPositions,z=>z.id,(z,j,b)=>{const w=D(()=>t(s).campuses[t(b)]);var L=Da(),R=r(L),T=r(R),F=r(T);Se(F,{class:"w-3.5 h-3.5 text-blue-400"});var B=n(F,2),lt=r(B,!0);a(B),a(T),a(R);var K=n(R,2),dt=r(K);{var xt=Yt=>{var $t=Ta(),Dt=r($t),de=r(Dt,!0);a(Dt);var ce=n(Dt,2);Xt(ce,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a($t),y(vt=>{W($t,"href",t(w).productionUrl),h(de,vt)},[()=>t(w).customDomain||Ut(t(w).productionUrl)]),d(Yt,$t)};S(dt,Yt=>{t(w).productionUrl&&Yt(xt)})}var wt=n(dt,2),Tt=r(wt,!0);a(wt),a(K),a(L),y(()=>{tt(L,`left: ${t(j).x??""}px; top: ${t(j).y??""}px; width: 240px; min-height: 75px;`),h(lt,t(w).displayName),h(Tt,t(w).gcpProject)}),d(z,L)}),y(()=>{tt(k,`left: ${t(o).clientX??""}px; top: ${t(o).clientY??""}px; width: 200px; min-height: 80px;`),h(A,t(s).displayName),h(U,`${t(s).campuses.length??""} campus${t(s).campuses.length!==1?"es":""}`)}),d(x,_)};S(p,x=>{t(o)&&x(m)})}d(g,v)}),y(()=>tt(l,`width: ${t(zt).width??""}px; height: ${t(zt).height??""}px;`)),d(e,i)},ia=e=>{var i=q(),l=I(i);{var c=s=>{var o=Fa(),v=I(o);V(v,21,()=>t(kt),m=>m.id,(m,x)=>{const _=D(()=>t(we).get(t(x).id));var k=q(),C=I(k);{var $=u=>{var P=q(),A=I(P);V(A,17,()=>t(_).instancePositions,Y=>Y.id,(Y,f)=>{var X=La(),U=I(X),E=n(U);y(()=>{W(U,"d",`M ${t(_).x+Lt} ${t(_).y+Ot/2}
									   C ${t(_).x+Lt+ct/2} ${t(_).y+Ot/2},
									     ${t(f).x-ct/2} ${t(f).y+Ct/2},
									     ${t(f).x??""} ${t(f).y+Ct/2}`),W(E,"cx",t(f).x),W(E,"cy",t(f).y+Ct/2)}),d(Y,X)}),d(u,P)};S(C,u=>{t(_)&&t(x).instances.length>0&&u($)})}d(m,k)}),a(v);var p=n(v);V(p,17,()=>t(kt),m=>m.id,(m,x)=>{const _=D(()=>t(we).get(t(x).id)),k=D(()=>jt[t(x).identity]||"#6b7280");var C=q(),$=I(C);{var u=P=>{var A=Wa(),Y=I(A),f=r(Y),X=r(f),U=r(X);pe(U,{class:"w-4 h-4 text-indigo-400"});var E=n(U,2),gt=r(E,!0);a(E),a(X),Q(2),a(f);var bt=n(f,2),z=r(bt);{var j=R=>{var T=Ga(),F=r(T),B=r(F,!0);a(F);var lt=n(F,2);Xt(lt,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(T),y(K=>{W(T,"href",t(x).productionUrl),h(B,K)},[()=>Ut(t(x).productionUrl)]),d(R,T)};S(z,R=>{t(x).productionUrl&&R(j)})}var b=n(z,2),w=r(b);a(b),a(bt),a(Y);var L=n(Y,2);V(L,19,()=>t(_).instancePositions,R=>R.id,(R,T,F)=>{const B=D(()=>t(x).instances[t(F)]);var lt=Ba(),K=r(lt),dt=r(K),xt=r(dt);Re(xt,{class:"w-3.5 h-3.5 text-emerald-400"});var wt=n(xt,2),Tt=r(wt,!0);a(wt),a(dt),a(K);var Yt=n(K,2),$t=r(Yt);{var Dt=vt=>{var _t=ja(),At=r(_t),ga=r(At,!0);a(At);var xa=n(At,2);Xt(xa,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(_t),y(_a=>{W(_t,"href",t(B).productionUrl),h(ga,_a)},[()=>Ut(t(B).productionUrl)]),d(vt,_t)};S($t,vt=>{t(B).productionUrl&&vt(Dt)})}var de=n($t,2);{var ce=vt=>{var _t=za(),At=r(_t,!0);a(_t),y(()=>h(At,t(B).gcpProject)),d(vt,_t)};S(de,vt=>{t(B).gcpProject&&vt(ce)})}a(Yt),a(lt),y(()=>{tt(lt,`left: ${t(T).x??""}px; top: ${t(T).y??""}px; width: 240px; height: 80px;`),h(Tt,t(B).displayName)}),d(R,lt)}),y(()=>{tt(Y,`left: ${t(_).x??""}px; top: ${t(_).y??""}px; width: 280px; height: 120px; border-left: 4px solid ${t(k)??""};`),h(gt,t(x).displayName),h(w,`${t(x).instances.length??""} deployed instance${t(x).instances.length!==1?"s":""}`)}),d(P,A)};S($,P=>{t(_)&&P(u)})}d(m,C)}),y(()=>tt(v,`width: ${t(zt).width??""}px; height: ${t(zt).height??""}px;`)),d(s,o)},g=s=>{var o=Ka();V(o,21,()=>t(pt),v=>v.id,(v,p)=>{const m=D(()=>jt[t(p).identity]||"#6b7280"),x=D(()=>De(t(p).services));var _=Ja(),k=r(_),C=r(k),$=r(C),u=r($);{var P=b=>{pe(b,{class:"w-4 h-4 text-indigo-400"})};S(u,b=>{t(p).isSourceRepo&&b(P)})}var A=n(u,2),Y=r(A,!0);a(A),a($);var f=n($,2),X=r(f,!0);a(f),a(C);var U=n(C,2);{var E=b=>{var w=Za(),L=r(w),R=r(L,!0);a(L);var T=n(L,2);Xt(T,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(w),y(F=>{W(w,"href",t(p).productionUrl),h(R,F)},[()=>Ut(t(p).productionUrl)]),d(b,w)},gt=b=>{var w=Va();d(b,w)};S(U,b=>{t(p).productionUrl?b(E):b(gt,!1)})}var bt=n(U,2),z=r(bt,!0);a(bt),a(k);var j=n(k,2);V(j,23,()=>t(p).services,(b,w)=>b.provider+"-"+b.category+"-"+w,(b,w)=>{var L=qa(),R=r(L),T=r(R,!0);a(R);var F=n(R,2),B=r(F,!0);a(F),a(L),y(()=>{h(T,t(w).category),h(B,t(w).provider)}),d(b,L)}),a(j),a(_),y(()=>{tt(_,`border-left: 4px solid ${t(m)??""}; width: 280px;`),h(Y,t(p).displayName),h(X,t(x)),h(z,t(p).id)}),d(v,_)}),a(o),d(s,o)};S(l,s=>{t(H)==="repos"?s(c):s(g,!1)},!0)}d(e,i)};S(oa,e=>{t(H)==="ownership"?e(na):e(ia,!1)})}a(ie),a(it),wa(it,e=>mt=e,()=>mt);var Ye=n(it,2),le=r(Ye),la=r(le);{var da=e=>{var i=Qa(),l=I(i),c=n(r(l),2),g=r(c);He(g,{class:"w-3.5 h-3.5 text-gray-400"}),Q(2),a(c);var s=n(c,2),o=r(s);Oe(o,{class:"w-3.5 h-3.5 text-emerald-400"}),Q(2),a(s);var v=n(s,2),p=r(v);Se(p,{class:"w-3.5 h-3.5 text-blue-400"}),Q(2),a(v),a(l),Q(2),d(e,i)},ca=e=>{var i=q(),l=I(i);{var c=s=>{var o=er(),v=I(o),p=n(r(v),2);V(p,17,()=>Object.entries(jt),([$,u])=>$,($,u)=>{var P=D(()=>Xe(t(u),2));let A=()=>t(P)[0],Y=()=>t(P)[1];var f=tr(),X=r(f),U=n(X,2),E=r(U,!0);a(U),a(f),y(()=>{tt(X,`background-color: ${Y()??""};`),h(E,A())}),d($,f)}),a(v);var m=n(v,2),x=n(r(m),2),_=r(x);pe(_,{class:"w-3.5 h-3.5 text-indigo-400"}),Q(2),a(x);var k=n(x,2),C=r(k);Re(C,{class:"w-3.5 h-3.5 text-emerald-400"}),Q(2),a(k),a(m),d(s,o)},g=s=>{var o=rr(),v=n(r(o),2);V(v,17,()=>Object.entries(jt),([p,m])=>p,(p,m)=>{var x=D(()=>Xe(t(m),2));let _=()=>t(x)[0],k=()=>t(x)[1];var C=ar(),$=r(C),u=n($,2),P=r(u,!0);a(u),a(C),y(()=>{tt($,`background-color: ${k()??""};`),h(P,_())}),d(p,C)}),a(o),d(s,o)};S(l,s=>{t(H)==="repos"?s(c):s(g,!1)},!0)}d(e,i)};S(la,e=>{t(H)==="ownership"?e(da):e(ca,!1)})}a(le);var va=n(le,2);{var pa=e=>{var i=or(),l=r(i),c=r(l);Na(c,{class:"w-3.5 h-3.5 text-cyan-500"});var g=n(c,2),s=r(g,!0);a(g);var o=n(g,2),v=r(o);a(o),a(l);var p=n(l,2),m=r(p),x=r(m);a(m);var _=n(m,4),k=r(_);a(_),a(p);var C=n(p,2);V(C,20,()=>N.data.packageInfo.keyPackages.slice(0,4),$=>$,($,u)=>{var P=sr(),A=r(P,!0);a(P),y(Y=>h(A,Y),[()=>u.replace("@","").split("/").pop()]),d($,P)}),a(C),a(i),y(()=>{h(s,N.data.packageInfo.name),h(v,`v${N.data.packageInfo.version??""}`),h(x,`${N.data.packageInfo.dependencyCount??""} deps`),h(k,`${N.data.packageInfo.devDependencyCount??""} dev`)}),d(e,i)};S(va,e=>{N.data.packageInfo&&e(pa)})}a(Ye),a(Jt),y(e=>{Zt(ee,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(H)==="ownership"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`),Zt(ae,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(H)==="repos"?"bg-indigo-600 text-white":"text-gray-400 hover:text-white"}`),Zt($e,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(H)==="flat"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`),h(ea,`${e??""}%`),h(sa,`Scroll to zoom | Drag to pan | ${t(H)==="ownership"?"Organisation ownership hierarchy":t(H)==="repos"?"Source repos with deployed instances":"All projects"}`),Me=Zt(it,1,"flex-1 overflow-hidden relative cursor-grab select-none",null,Me,{"cursor-grabbing":t(Et)}),tt(Ne,`
				background-image:
					linear-gradient(rgba(55, 65, 81, 0.3) 1px, transparent 1px),
					linear-gradient(90deg, rgba(55, 65, 81, 0.3) 1px, transparent 1px);
				background-size: ${40*t(G)}px ${40*t(G)}px;
				background-position: ${t(at)??""}px ${t(rt)??""}px;
			`),tt(ie,`transform: translate(${t(at)??""}px, ${t(rt)??""}px) scale(${t(G)??""});`)},[()=>Math.round(t(G)*100)]),Ie("wheel",it,Ae),Ie("mouseleave",it,fe),d(ht,Jt),qt()}ba(["click","mousedown","mousemove","mouseup"]);export{Cr as component};
