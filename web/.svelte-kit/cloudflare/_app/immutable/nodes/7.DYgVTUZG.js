import"../chunks/DsnmJJEf.js";import{p as V,c as U,b as J,n as W,a as g,d as K,ab as Se,G as at,ac as l,f as m,Q as i,O as s,ao as k,K as r,P as a,N as T,am as Oe,an as ot}from"../chunks/BSOyUNbi.js";import{s as Y,d as st,a as C,e as E}from"../chunks/B-w-zG1D.js";import{i as M}from"../chunks/D9u8SmGH.js";import{I as Z,e as ue,i as Te,r as H,b as je,a as Ie,s as nt,h as it}from"../chunks/CWULbE_g.js";import{a as ge,e as fe}from"../chunks/CC450J7M.js";import{b as pe}from"../chunks/CPRrDHYP.js";import{s as ee,r as te}from"../chunks/Bz1uhfmE.js";import{C as me}from"../chunks/BzoROJm5.js";import{X as B}from"../chunks/DtqEC8bV.js";import{P as dt}from"../chunks/ql8GN9kl.js";import{F as lt}from"../chunks/UgBWGJLQ.js";import{T as ct}from"../chunks/BVYw7Hpw.js";function vt(N,d){V(d,!0);let b=te(d,["$$slots","$$events","$$legacy"]);const c=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];Z(N,ee({name:"grip-vertical"},()=>b,{get iconNode(){return c},children:(h,D)=>{var f=U(),y=J(f);Y(y,()=>d.children??W),g(h,f)},$$slots:{default:!0}})),K()}function ut(N,d){V(d,!0);let b=te(d,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];Z(N,ee({name:"pen"},()=>b,{get iconNode(){return c},children:(h,D)=>{var f=U(),y=J(f);Y(y,()=>d.children??W),g(h,f)},$$slots:{default:!0}})),K()}function gt(N,d){V(d,!0);let b=te(d,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Z(N,ee({name:"rotate-ccw"},()=>b,{get iconNode(){return c},children:(h,D)=>{var f=U(),y=J(f);Y(y,()=>d.children??W),g(h,f)},$$slots:{default:!0}})),K()}function ft(N,d){V(d,!0);let b=te(d,["$$slots","$$events","$$legacy"]);const c=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];Z(N,ee({name:"save"},()=>b,{get iconNode(){return c},children:(h,D)=>{var f=U(),y=J(f);Y(y,()=>d.children??W),g(h,f)},$$slots:{default:!0}})),K()}var pt=m('<form method="POST" action="?/saveConfig"><input type="hidden" name="config"/> <button type="submit" class="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 rounded-lg text-white transition-colors"><!> </button></form>'),mt=m('<div class="p-3 bg-green-900/50 border border-green-700 rounded-lg flex items-center gap-2 text-green-300 text-sm"><!> </div>'),_t=m('<div class="p-3 bg-red-900/50 border border-red-700 rounded-lg flex items-center gap-2 text-red-300 text-sm"><!> </div>'),xt=m('<form method="POST" action="?/addGroup" class="flex items-center gap-2"><input type="text" name="name" placeholder="Group name..." class="px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-white text-sm focus:outline-none focus:border-blue-500"/> <input type="color" name="color" class="w-8 h-8 rounded cursor-pointer"/> <button type="submit" class="p-1.5 bg-green-600 hover:bg-green-700 rounded text-white"><!></button> <button type="button" class="p-1.5 bg-gray-600 hover:bg-gray-500 rounded text-white"><!></button></form>'),bt=m('<button class="flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-gray-300 text-sm transition-colors"><!> Add Group</button>'),ht=m('<form method="POST" action="?/deleteGroup"><input type="hidden" name="groupId"/> <button type="submit" class="p-1 text-gray-500 hover:text-red-400 transition-colors" title="Delete group"><!></button></form>'),yt=m('<input type="text" class="flex-1 px-2 py-0.5 bg-gray-800 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500"/> <button class="p-1 text-green-400 hover:text-green-300"><!></button> <button class="p-1 text-gray-400 hover:text-gray-300"><!></button>',1),wt=m('<button class="p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity" title="Remove from this group"><!></button>'),Pt=m('<div class="flex-1 min-w-0"><div class="text-sm text-white truncate"> </div> <div class="text-xs text-gray-500 truncate"> </div></div> <button class="p-1 text-gray-500 hover:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity" title="Rename"><!></button> <!>',1),Nt=m('<div draggable="true" role="listitem"><!> <!></div>'),$t=m('<div class="flex items-center justify-center h-20 text-gray-500 text-sm"><!> Drag repos here</div>'),kt=m('<div role="region"><div class="px-4 py-3 border-b border-gray-700 flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-medium text-white"> </span> <span class="text-xs text-gray-500"> </span></div> <!></div> <div class="p-2 min-h-[100px] space-y-1"></div></div>'),Ct=m('<div class="flex items-center gap-1.5 px-2 py-1 bg-gray-700 rounded text-sm cursor-move" draggable="true" role="listitem"><span class="text-gray-300"> </span> <span class="text-xs text-gray-500"> </span></div>'),Dt=m('<div class="p-6 space-y-6"><div class="flex items-center justify-between"><div><h2 class="text-xl font-semibold text-white">Projects & Groups</h2> <p class="text-gray-400 text-sm mt-1">Organize repos into groups. Drag to move between groups.</p></div> <div class="flex items-center gap-2"><!> <form method="POST" action="?/resetConfig"><button type="submit" class="flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-gray-300 transition-colors" title="Reset to defaults"><!></button></form></div></div> <!> <!> <div class="flex items-center gap-2"><!></div> <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"></div> <div class="mt-8"><h3 class="text-lg font-medium text-gray-300 mb-3">All Projects</h3> <div class="bg-gray-800 rounded-lg p-4"><div class="flex flex-wrap gap-2"></div></div></div></div>');function Lt(N,d){V(d,!0);let b=Se(structuredClone(d.data.groups)),c=Se(structuredClone(d.data.projects)),h=k(!1),D=k(!1),f=k(""),y=k("#6b7280"),Q=k(!1),X=k(null),j=k(""),z=k(null),R=k(null);at(()=>{const t=JSON.stringify({groups:b,projects:c}),e=JSON.stringify({groups:d.data.groups,projects:d.data.projects});l(h,t!==e)});function Ee(t){return c.filter(e=>e.groups.includes(t)).sort((e,o)=>e.order-o.order)}function _e(t,e){l(z,e,!0),t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e))}function Me(t,e){t.preventDefault(),l(R,e,!0),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}function ze(){l(R,null)}function Fe(t,e){if(t.preventDefault(),l(R,null),!r(z))return;const o=c.findIndex(u=>u.id===r(z));if(o===-1)return;const n=c[o];n.groups.includes(e)||(c[o]={...n,groups:[...n.groups,e]}),l(z,null)}function xe(){l(z,null),l(R,null)}function Je(t,e){const o=c.findIndex(u=>u.id===t);if(o===-1)return;const n=c[o];c[o]={...n,groups:n.groups.filter(u=>u!==e)}}function Re(t,e){l(X,t,!0),l(j,e,!0)}function be(t){const e=c.findIndex(o=>o.id===t);e!==-1&&r(j).trim()&&(c[e]={...c[e],displayName:r(j).trim()}),l(X,null),l(j,"")}function he(){l(X,null),l(j,"")}function Ae(){return JSON.stringify({groups:b,projects:c})}var re=Dt(),ae=s(re),ye=i(s(ae),2),we=s(ye);{var Le=t=>{var e=pt(),o=s(e);H(o);var n=i(o,2),u=s(n);ft(u,{class:"w-4 h-4"});var w=i(u);a(n),a(e),ge(e,(p,I)=>fe?.(p,I),()=>()=>(l(D,!0),async({update:p})=>{await p(),l(D,!1)})),T(p=>{je(o,p),n.disabled=r(D),C(w,` ${r(D)?"Saving...":"Save Changes"}`)},[Ae]),g(t,e)};M(we,t=>{r(h)&&t(Le)})}var oe=i(we,2),Pe=s(oe),He=s(Pe);gt(He,{class:"w-4 h-4"}),a(Pe),a(oe),ge(oe,t=>fe?.(t)),a(ye),a(ae);var Ne=i(ae,2);{var Ve=t=>{var e=mt(),o=s(e);me(o,{class:"w-4 h-4"});var n=i(o);a(e),T(()=>C(n,` ${d.form.message??""}`)),g(t,e)};M(Ne,t=>{d.form?.success&&t(Ve)})}var $e=i(Ne,2);{var Ke=t=>{var e=_t(),o=s(e);B(o,{class:"w-4 h-4"});var n=i(o);a(e),T(()=>C(n,` ${d.form.error??""}`)),g(t,e)};M($e,t=>{d.form?.error&&t(Ke)})}var se=i($e,2),Qe=s(se);{var Xe=t=>{var e=xt(),o=s(e);H(o);var n=i(o,2);H(n);var u=i(n,2),w=s(u);me(w,{class:"w-4 h-4"}),a(u);var p=i(u,2);p.__click=()=>l(Q,!1);var I=s(p);B(I,{class:"w-4 h-4"}),a(p),a(e),ge(e,(P,ie)=>fe?.(P,ie),()=>()=>async({update:P})=>{await P(),l(f,""),l(Q,!1)}),pe(o,()=>r(f),P=>l(f,P)),pe(n,()=>r(y),P=>l(y,P)),g(t,e)},qe=t=>{var e=bt();e.__click=()=>l(Q,!0);var o=s(e);dt(o,{class:"w-4 h-4"}),Oe(),a(e),g(t,e)};M(Qe,t=>{r(Q)?t(Xe):t(qe,!1)})}a(se);var ne=i(se,2);ue(ne,21,()=>b,Te,(t,e)=>{const o=ot(()=>Ee(r(e).id));var n=kt(),u=s(n),w=s(u),p=s(w),I=s(p,!0);a(p);var P=i(p,2),ie=s(P);a(P),a(w);var Be=i(w,2);{var Ue=_=>{var v=ht(),x=s(v);H(x);var A=i(x,2),de=s(A);ct(de,{class:"w-3.5 h-3.5"}),a(A),a(v),T(()=>je(x,r(e).id)),g(_,v)};M(Be,_=>{r(e).id!=="jaslr"&&r(e).id!=="jvp-ux"&&_(Ue)})}a(u);var Ge=i(u,2);ue(Ge,21,()=>r(o),_=>_.id,(_,v)=>{var x=Nt(),A=s(x);vt(A,{class:"w-4 h-4 text-gray-500 shrink-0"});var de=i(A,2);{var We=G=>{var L=yt(),S=J(L);H(S),S.__keydown=$=>{$.key==="Enter"&&be(r(v).id),$.key==="Escape"&&he()};var O=i(S,2);O.__click=()=>be(r(v).id);var le=s(O);me(le,{class:"w-3.5 h-3.5"}),a(O);var F=i(O,2);F.__click=he;var ce=s(F);B(ce,{class:"w-3.5 h-3.5"}),a(F),pe(S,()=>r(j),$=>l(j,$)),g(G,L)},Ye=G=>{var L=Pt(),S=J(L),O=s(S),le=s(O,!0);a(O);var F=i(O,2),ce=s(F);a(F),a(S);var $=i(S,2);$.__click=()=>Re(r(v).id,r(v).displayName);var Ze=s($);ut(Ze,{class:"w-3.5 h-3.5"}),a($);var et=i($,2);{var tt=ve=>{var q=wt();q.__click=()=>Je(r(v).id,r(e).id);var rt=s(q);B(rt,{class:"w-3.5 h-3.5"}),a(q),g(ve,q)};M(et,ve=>{r(v).groups.length>1&&ve(tt)})}T(()=>{C(le,r(v).displayName),C(ce,`${r(v).owner??""}/${r(v).repo??""}`)}),g(G,L)};M(de,G=>{r(X)===r(v).id?G(We):G(Ye,!1)})}a(x),T(()=>Ie(x,1,`group flex items-center gap-2 px-2 py-1.5 bg-gray-700/50 hover:bg-gray-700 rounded cursor-move transition-colors ${r(z)===r(v).id?"opacity-50":""}`)),E("dragstart",x,G=>_e(G,r(v).id)),E("dragend",x,xe),g(_,x)},_=>{var v=$t(),x=s(v);lt(x,{class:"w-5 h-5 mr-2 opacity-50"}),Oe(),a(v),g(_,v)}),a(Ge),a(n),T(()=>{Ie(n,1,`bg-gray-800 rounded-lg overflow-hidden transition-all ${r(R)===r(e).id?"ring-2 ring-blue-500":""}`),nt(n,"aria-label",`Drop zone for ${r(e).name??""}`),it(u,`border-left: 3px solid ${r(e).color??""}`),C(I,r(e).name),C(ie,`(${r(o).length??""})`)}),E("dragover",n,_=>Me(_,r(e).id)),E("dragleave",n,ze),E("drop",n,_=>Fe(_,r(e).id)),g(t,n)}),a(ne);var ke=i(ne,2),Ce=i(s(ke),2),De=s(Ce);ue(De,21,()=>c,Te,(t,e)=>{var o=Ct(),n=s(o),u=s(n,!0);a(n);var w=i(n,2),p=s(w);a(w),a(o),T(()=>{C(u,r(e).displayName),C(p,`(${r(e).groups.length??""})`)}),E("dragstart",o,I=>_e(I,r(e).id)),E("dragend",o,xe),g(t,o)}),a(De),a(Ce),a(ke),a(re),g(N,re),K()}st(["click","keydown"]);export{Lt as component};
