import"../chunks/DsnmJJEf.js";import{p as Q,c as ve,f as X,o as ue,a as g,h as U,b as Te,u as at,d,e as p,k as s,l as i,s as P,g as r,r as a,t as T,n as Oe,i as ot}from"../chunks/Dnd2HTQh.js";import{s as N}from"../chunks/BDR25Ma5.js";import{i as E}from"../chunks/DKZzDoih.js";import{e as ne,i as je,s as Ie,a as st}from"../chunks/C4TM4onk.js";import{a as ie,e as de}from"../chunks/b6iR4SIb.js";import{I as ge,r as M,a as $e,s as nt}from"../chunks/H3ICmHr2.js";import{d as it,e as F}from"../chunks/Dc2clUla.js";import{b as le}from"../chunks/B4DMYMvU.js";import{s as fe}from"../chunks/-9B-tiFA.js";import{s as pe,r as me}from"../chunks/CqyOSPLz.js";import{S as dt}from"../chunks/DxDiyXRC.js";import{C as ce}from"../chunks/jPWZ-Mdx.js";import{X as K}from"../chunks/DSIOUwQG.js";import{P as lt}from"../chunks/CrdDX_k0.js";import{F as ct}from"../chunks/BH6OhVQf.js";import{T as vt}from"../chunks/CVhdyYUq.js";function ut(O,l){Q(l,!0);let h=me(l,["$$slots","$$events","$$legacy"]);const v=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];ge(O,pe({name:"grip-vertical"},()=>h,{get iconNode(){return v},children:(k,j)=>{var _=ve(),S=X(_);fe(S,()=>l.children??ue),g(k,_)},$$slots:{default:!0}})),U()}function gt(O,l){Q(l,!0);let h=me(l,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];ge(O,pe({name:"pen"},()=>h,{get iconNode(){return v},children:(k,j)=>{var _=ve(),S=X(_);fe(S,()=>l.children??ue),g(k,_)},$$slots:{default:!0}})),U()}function ft(O,l){Q(l,!0);let h=me(l,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];ge(O,pe({name:"rotate-ccw"},()=>h,{get iconNode(){return v},children:(k,j)=>{var _=ve(),S=X(_);fe(S,()=>l.children??ue),g(k,_)},$$slots:{default:!0}})),U()}var pt=p('<form method="POST" action="?/saveConfig"><input type="hidden" name="config"/> <button type="submit" class="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 rounded-lg text-white transition-colors"><!> </button></form>'),mt=p('<div class="p-3 bg-green-900/50 border border-green-700 rounded-lg flex items-center gap-2 text-green-300 text-sm"><!> </div>'),_t=p('<div class="p-3 bg-red-900/50 border border-red-700 rounded-lg flex items-center gap-2 text-red-300 text-sm"><!> </div>'),xt=p('<form method="POST" action="?/addGroup" class="flex items-center gap-2"><input type="text" name="name" placeholder="Group name..." class="px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-white text-sm focus:outline-none focus:border-blue-500"/> <input type="color" name="color" class="w-8 h-8 rounded cursor-pointer"/> <button type="submit" class="p-1.5 bg-green-600 hover:bg-green-700 rounded text-white"><!></button> <button type="button" class="p-1.5 bg-gray-600 hover:bg-gray-500 rounded text-white"><!></button></form>'),bt=p('<button class="flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-gray-300 text-sm transition-colors"><!> Add Group</button>'),yt=p('<form method="POST" action="?/deleteGroup"><input type="hidden" name="groupId"/> <button type="submit" class="p-1 text-gray-500 hover:text-red-400 transition-colors" title="Delete group"><!></button></form>'),ht=p('<input type="text" class="flex-1 px-2 py-0.5 bg-gray-800 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500"/> <button class="p-1 text-green-400 hover:text-green-300"><!></button> <button class="p-1 text-gray-400 hover:text-gray-300"><!></button>',1),wt=p('<button class="p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity" title="Remove from this group"><!></button>'),Pt=p('<div class="flex-1 min-w-0"><div class="text-sm text-white truncate"> </div> <div class="text-xs text-gray-500 truncate"> </div></div> <button class="p-1 text-gray-500 hover:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity" title="Rename"><!></button> <!>',1),Nt=p('<div draggable="true" role="listitem"><!> <!></div>'),kt=p('<div class="flex items-center justify-center h-20 text-gray-500 text-sm"><!> Drag repos here</div>'),St=p('<div role="region"><div class="px-4 py-3 border-b border-gray-700 flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-medium text-white"> </span> <span class="text-xs text-gray-500"> </span></div> <!></div> <div class="p-2 min-h-[100px] space-y-1"></div></div>'),Ct=p('<div class="flex items-center gap-1.5 px-2 py-1 bg-gray-700 rounded text-sm cursor-move" draggable="true" role="listitem"><span class="text-gray-300"> </span> <span class="text-xs text-gray-500"> </span></div>'),Dt=p('<div class="p-6 space-y-6"><div class="flex items-center justify-between"><div><h2 class="text-xl font-semibold text-white">Projects & Groups</h2> <p class="text-gray-400 text-sm mt-1">Organize repos into groups. Drag to move between groups.</p></div> <div class="flex items-center gap-2"><!> <form method="POST" action="?/resetConfig"><button type="submit" class="flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-gray-300 transition-colors" title="Reset to defaults"><!></button></form></div></div> <!> <!> <div class="flex items-center gap-2"><!></div> <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"></div> <div class="mt-8"><h3 class="text-lg font-medium text-gray-300 mb-3">All Projects</h3> <div class="bg-gray-800 rounded-lg p-4"><div class="flex flex-wrap gap-2"></div></div></div></div>');function Ht(O,l){Q(l,!0);let h=Te(structuredClone(l.data.groups)),v=Te(structuredClone(l.data.projects)),k=P(!1),j=P(!1),_=P(""),S=P("#6b7280"),q=P(!1),B=P(null),I=P(""),J=P(null),z=P(null);at(()=>{const t=JSON.stringify({groups:h,projects:v}),e=JSON.stringify({groups:l.data.groups,projects:l.data.projects});d(k,t!==e)});function Ee(t){return v.filter(e=>e.groups.includes(t)).sort((e,o)=>e.order-o.order)}function _e(t,e){d(J,e,!0),t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e))}function Fe(t,e){t.preventDefault(),d(z,e,!0),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}function Je(){d(z,null)}function Re(t,e){if(t.preventDefault(),d(z,null),!r(J))return;const o=v.findIndex(u=>u.id===r(J));if(o===-1)return;const n=v[o];n.groups.includes(e)||(v[o]={...n,groups:[...n.groups,e]}),d(J,null)}function xe(){d(J,null),d(z,null)}function ze(t,e){const o=v.findIndex(u=>u.id===t);if(o===-1)return;const n=v[o];v[o]={...n,groups:n.groups.filter(u=>u!==e)}}function Ae(t,e){d(B,t,!0),d(I,e,!0)}function be(t){const e=v.findIndex(o=>o.id===t);e!==-1&&r(I).trim()&&(v[e]={...v[e],displayName:r(I).trim()}),d(B,null),d(I,"")}function ye(){d(B,null),d(I,"")}function Le(){return JSON.stringify({groups:h,projects:v})}var V=Dt(),W=s(V),he=i(s(W),2),we=s(he);{var Me=t=>{var e=pt(),o=s(e);M(o);var n=i(o,2),u=s(n);dt(u,{class:"w-4 h-4"});var b=i(u);a(n),a(e),ie(e,(f,$)=>de?.(f,$),()=>()=>(d(j,!0),async({update:f})=>{await f(),d(j,!1)})),T(f=>{$e(o,f),n.disabled=r(j),N(b,` ${r(j)?"Saving...":"Save Changes"}`)},[Le]),g(t,e)};E(we,t=>{r(k)&&t(Me)})}var Y=i(we,2),Pe=s(Y),Xe=s(Pe);ft(Xe,{class:"w-4 h-4"}),a(Pe),a(Y),ie(Y,t=>de?.(t)),a(he),a(W);var Ne=i(W,2);{var qe=t=>{var e=mt(),o=s(e);ce(o,{class:"w-4 h-4"});var n=i(o);a(e),T(()=>N(n,` ${l.form.message??""}`)),g(t,e)};E(Ne,t=>{l.form?.success&&t(qe)})}var ke=i(Ne,2);{var Be=t=>{var e=_t(),o=s(e);K(o,{class:"w-4 h-4"});var n=i(o);a(e),T(()=>N(n,` ${l.form.error??""}`)),g(t,e)};E(ke,t=>{l.form?.error&&t(Be)})}var Z=i(ke,2),He=s(Z);{var Ke=t=>{var e=xt(),o=s(e);M(o);var n=i(o,2);M(n);var u=i(n,2),b=s(u);ce(b,{class:"w-4 h-4"}),a(u);var f=i(u,2);f.__click=()=>d(q,!1);var $=s(f);K($,{class:"w-4 h-4"}),a(f),a(e),ie(e,(y,te)=>de?.(y,te),()=>()=>async({update:y})=>{await y(),d(_,""),d(q,!1)}),le(o,()=>r(_),y=>d(_,y)),le(n,()=>r(S),y=>d(S,y)),g(t,e)},Qe=t=>{var e=bt();e.__click=()=>d(q,!0);var o=s(e);lt(o,{class:"w-4 h-4"}),Oe(),a(e),g(t,e)};E(He,t=>{r(q)?t(Ke):t(Qe,!1)})}a(Z);var ee=i(Z,2);ne(ee,21,()=>h,je,(t,e)=>{const o=ot(()=>Ee(r(e).id));var n=St(),u=s(n),b=s(u),f=s(b),$=s(f,!0);a(f);var y=i(f,2),te=s(y);a(y),a(b);var Ue=i(b,2);{var Ve=m=>{var c=yt(),x=s(c);M(x);var A=i(x,2),re=s(A);vt(re,{class:"w-3.5 h-3.5"}),a(A),a(c),T(()=>$e(x,r(e).id)),g(m,c)};E(Ue,m=>{r(e).id!=="jaslr"&&r(e).id!=="jvp-ux"&&m(Ve)})}a(u);var Ge=i(u,2);ne(Ge,21,()=>r(o),m=>m.id,(m,c)=>{var x=Nt(),A=s(x);ut(A,{class:"w-4 h-4 text-gray-500 shrink-0"});var re=i(A,2);{var We=C=>{var L=ht(),D=X(L);M(D),D.__keydown=w=>{w.key==="Enter"&&be(r(c).id),w.key==="Escape"&&ye()};var G=i(D,2);G.__click=()=>be(r(c).id);var ae=s(G);ce(ae,{class:"w-3.5 h-3.5"}),a(G);var R=i(G,2);R.__click=ye;var oe=s(R);K(oe,{class:"w-3.5 h-3.5"}),a(R),le(D,()=>r(I),w=>d(I,w)),g(C,L)},Ye=C=>{var L=Pt(),D=X(L),G=s(D),ae=s(G,!0);a(G);var R=i(G,2),oe=s(R);a(R),a(D);var w=i(D,2);w.__click=()=>Ae(r(c).id,r(c).displayName);var Ze=s(w);gt(Ze,{class:"w-3.5 h-3.5"}),a(w);var et=i(w,2);{var tt=se=>{var H=wt();H.__click=()=>ze(r(c).id,r(e).id);var rt=s(H);K(rt,{class:"w-3.5 h-3.5"}),a(H),g(se,H)};E(et,se=>{r(c).groups.length>1&&se(tt)})}T(()=>{N(ae,r(c).displayName),N(oe,`${r(c).owner??""}/${r(c).repo??""}`)}),g(C,L)};E(re,C=>{r(B)===r(c).id?C(We):C(Ye,!1)})}a(x),T(()=>Ie(x,1,`group flex items-center gap-2 px-2 py-1.5 bg-gray-700/50 hover:bg-gray-700 rounded cursor-move transition-colors ${r(J)===r(c).id?"opacity-50":""}`)),F("dragstart",x,C=>_e(C,r(c).id)),F("dragend",x,xe),g(m,x)},m=>{var c=kt(),x=s(c);ct(x,{class:"w-5 h-5 mr-2 opacity-50"}),Oe(),a(c),g(m,c)}),a(Ge),a(n),T(()=>{Ie(n,1,`bg-gray-800 rounded-lg overflow-hidden transition-all ${r(z)===r(e).id?"ring-2 ring-blue-500":""}`),nt(n,"aria-label",`Drop zone for ${r(e).name??""}`),st(u,`border-left: 3px solid ${r(e).color??""}`),N($,r(e).name),N(te,`(${r(o).length??""})`)}),F("dragover",n,m=>Fe(m,r(e).id)),F("dragleave",n,Je),F("drop",n,m=>Re(m,r(e).id)),g(t,n)}),a(ee);var Se=i(ee,2),Ce=i(s(Se),2),De=s(Ce);ne(De,21,()=>v,je,(t,e)=>{var o=Ct(),n=s(o),u=s(n,!0);a(n);var b=i(n,2),f=s(b);a(b),a(o),T(()=>{N(u,r(e).displayName),N(f,`(${r(e).groups.length??""})`)}),F("dragstart",o,$=>_e($,r(e).id)),F("dragend",o,xe),g(t,o)}),a(De),a(Ce),a(Se),a(V),g(O,V),U()}it(["click","keydown"]);export{Ht as component};
