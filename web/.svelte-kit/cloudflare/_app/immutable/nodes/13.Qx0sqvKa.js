import"../chunks/DsnmJJEf.js";import{p as sr,c as xt,b as Fe,n as Lr,a as i,d as nr,x as gt,aa as j,an as ue,A as e,f as v,F as r,G as t,I as o,am as w,ar as Ye,D as u,a9 as Kt,J as Rr,ao as Er,al as Qt,as as wr,ap as $r}from"../chunks/3lJB4T0S.js";import{s as Pr,d as Tr,a as b,e as Br}from"../chunks/BqZwnDtf.js";import{i as g}from"../chunks/BkU7iF2q.js";import{I as Or,e as Be,i as ft,s as k,a as O,g as kr,h as Sr}from"../chunks/Dq9r9tkR.js";import{c as yr}from"../chunks/CAKD87xN.js";import{C as ar,h as Yr}from"../chunks/DL8kRa9u.js";import{H as Ar,S as mr,G as or,C as jr,g as Gr,A as er,a as Vr,M as qr}from"../chunks/DrcWuEQs.js";import{p as zr}from"../chunks/Bsk_SXY0.js";import{g as Dr}from"../chunks/CzNO7jfn.js";import{s as tr}from"../chunks/BLtbU3fE.js";import{g as Wr,s as Xr}from"../chunks/BL3PLj43.js";import{b as Fr}from"../chunks/CE3FrX7Z.js";import{s as Hr,r as Ir,p as Cr}from"../chunks/53_MOYEh.js";import{P as Jr}from"../chunks/4HMVQlM3.js";import{E as me}from"../chunks/C1MZzrQL.js";import{T as It,D as br}from"../chunks/BhyKitcD.js";import{S as Dt}from"../chunks/CXT8IPDr.js";import{G as Ht}from"../chunks/wnauRcpB.js";import{C as rr}from"../chunks/26VZBFpm.js";import{L as Ur}from"../chunks/ul4LdOAw.js";import{S as Zr}from"../chunks/DVO2uRpj.js";function Kr(Je,D){sr(D,!0);let He=Ir(D,["$$slots","$$events","$$legacy"]);const W=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"}],["path",{d:"m21 2-9.6 9.6"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5"}]];Or(Je,Hr({name:"key"},()=>He,{get iconNode(){return W},children:(Te,Ge)=>{var be=xt(),Ze=Fe(be);Pr(Ze,()=>D.children??Lr),i(Te,be)},$$slots:{default:!0}})),nr()}function Qr(Je,D){sr(D,!0);let He=Ir(D,["$$slots","$$events","$$legacy"]);const W=[["path",{d:"M5 12h14"}]];Or(Je,Hr({name:"minus"},()=>He,{get iconNode(){return W},children:(Te,Ge)=>{var be=xt(),Ze=Fe(be);Pr(Ze,()=>D.children??Lr),i(Te,be)},$$slots:{default:!0}})),nr()}var ea=Ye('<text text-anchor="middle" class="text-[4px] fill-gray-400 font-medium"> </text>'),ta=Ye('<g><line stroke-width="0.75"></line><!></g>'),ra=Ye('<image x="-8" y="-8" width="16" height="16" preserveAspectRatio="xMidYMid meet"></image>'),aa=Ye('<foreignObject x="-7" y="-7" width="14" height="14"><div class="flex items-center justify-center w-full h-full"><!></div></foreignObject>'),oa=Ye('<text x="0" y="24" text-anchor="middle" class="text-[3.5px] fill-gray-500"> </text>'),sa=Ye('<text x="0" text-anchor="middle" class="text-[3px] fill-cyan-400 font-mono"> </text>'),na=Ye('<foreignObject x="6" y="-12" width="6" height="6"><div class="flex items-center justify-center w-full h-full text-gray-400"><!></div></foreignObject>'),ia=Ye('<foreignObject x="-12" y="-12" width="6" height="6"><div class="flex items-center justify-center w-full h-full text-red-500"><!></div></foreignObject>'),la=Ye('<g><circle cx="0" cy="0" r="12" fill="#1f2937" stroke-width="1"></circle><!><text x="0" y="18" text-anchor="middle" class="text-[4px] fill-gray-400 font-medium"> </text><!><!><!><!></g>'),da=v(`<div class="relative w-full h-full flex flex-col"><div class="absolute top-0 right-0 flex items-center gap-1 z-20"><button><span><span></span></span></button> <button class="flex items-center justify-center w-8 h-8 hover:bg-gray-700/50 text-gray-400 hover:text-gray-200 transition-colors" title="Zoom out"><!></button> <button class="flex items-center justify-center min-w-[40px] h-8 hover:bg-gray-700/50 text-xs text-gray-400 hover:text-gray-200 transition-colors font-mono" title="Reset zoom"> </button> <button class="flex items-center justify-center w-8 h-8 hover:bg-gray-700/50 text-gray-400 hover:text-gray-200 transition-colors" title="Zoom in"><!></button></div> <div class="flex-1 w-full flex items-center justify-center overflow-hidden"><svg class="w-full h-full transition-transform" preserveAspectRatio="xMidYMid meet"><defs><marker id="arrow-active" markerWidth="6" markerHeight="5" refX="5" refY="2.5" orient="auto"><polygon points="0 0, 6 2.5, 0 5" fill="#22c55e"></polygon></marker><marker id="arrow-idle" markerWidth="6" markerHeight="5" refX="5" refY="2.5" orient="auto"><polygon points="0 0, 6 2.5, 0 5" fill="#4b5563"></polygon></marker><marker id="arrow-deploy" markerWidth="6" markerHeight="5" refX="5" refY="2.5" orient="auto"><polygon points="0 0, 6 2.5, 0 5" fill="#06b6d4"></polygon></marker><style>@keyframes deployDash {
						to { stroke-dashoffset: -12; }
					}
					.deploy-animated {
						stroke-dasharray: 4 4;
						animation: deployDash 0.5s linear infinite;
					}</style></defs><!><!></svg></div></div>`);function Mr(Je,D){sr(D,!0),Cr(D,"animated",3,!0);let He=Cr(D,"isDeploying",3,!1),W=ue(null),Te=ue(0),Ge=ue(0);const be=70,Ze=24;let je=ue(1);const Nt=.5,Rt=3,_t=.1,K="infra-diagram-show-logos";let R=ue(!0),Et=ue(!1);gt(()=>{if(typeof window<"u"){j(Et,!0);const c=localStorage.getItem(K);c!==null&&j(R,c==="true")}}),gt(()=>{if(!e(W)||typeof window>"u")return;const c=()=>{e(W)&&(j(Te,e(W).clientWidth,!0),j(Ge,e(W).clientHeight,!0))};c();const d=new ResizeObserver(c);return d.observe(e(W)),()=>d.disconnect()});function J(){j(R,!e(R)),typeof window<"u"&&localStorage.setItem(K,String(e(R)))}let se=w(()=>Vt(D.services,D.projectName,D.domain)),ir=w(()=>dr(e(se))),ge=w(()=>()=>{if(e(se).length===0)return{x:0,y:0,width:120,height:90};const c=18,d=12,Y=Math.min(...e(se).map(N=>N.x??0)),H=Math.max(...e(se).map(N=>N.x??0)),I=Math.min(...e(se).map(N=>N.y??0)),X=Math.max(...e(se).map(N=>N.y??0)),G=H-Y+d*2,Q=X-I+c*2,E=be/Ze;let A=G,ee=Q;e(Te)>0&&e(Ge)>0&&(A=e(Te)/E,ee=e(Ge)/E,A=Math.max(A,G),ee=Math.max(ee,Q));const fe=(Y+H)/2,re=(I+X)/2;return{x:fe-A/2,y:re-ee/2,width:A,height:ee}});function $t(){j(je,Math.min(Rt,e(je)+_t),!0)}function Ct(){j(je,Math.max(Nt,e(je)-_t),!0)}function Ut(){j(je,1)}function Mt(c){c.preventDefault();const d=c.deltaY>0?-_t:_t;j(je,Math.max(Nt,Math.min(Rt,e(je)+d)),!0)}const Bt={dns:or,cdn:ar,site:or,hosting:ar,api:Dt,database:br,auth:mr,storage:Ar,ci:Ht,monitoring:It,localdev:Dt},Yt={dns:"#06b6d4",cdn:"#f97316",site:"#10b981",hosting:"#f97316",api:"#8b5cf6",database:"#22c55e",auth:"#eab308",storage:"#ec4899",ci:"#64748b",monitoring:"#ef4444",localdev:"#9ca3af"},Ve={cloudflare:"Cloudflare",flyio:"Fly.io",supabase:"Supabase",github:"GitHub",sentry:"Sentry",aws:"AWS",vercel:"Vercel",netlify:"Netlify",google:"Google"};function ht(c){return c?new Date(c).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function lr(c){if(D.deploymentTimestamps)switch(c){case"localdev":return D.deploymentTimestamps.pushStarted;case"ci":return D.deploymentTimestamps.ciStarted||D.deploymentTimestamps.ciCompleted;case"site":return D.deploymentTimestamps.deployCompleted||D.deploymentTimestamps.deployStarted;default:return}}function Gt(c){return c&&["cloudflare","flyio","supabase","github","sentry","vercel","netlify","auth0","clerk","planetscale","plausible","posthog","resend"].includes(c)?`/api/logos/infra/${c}.svg`:null}function Vt(c,d,Y){const H=[],I=c.some(h=>h.category==="database"),X=c.some(h=>h.category==="auth"),G=c.some(h=>h.category==="storage"),Q=c.some(h=>h.category==="ci"),E=c.some(h=>h.category==="monitoring"),A=[I,X,G].filter(Boolean).length,ee=A===1?70:A===2?50:30,fe=40;if(H.push({id:"localdev",type:"localdev",label:"Local Dev",status:"unknown",x:-10,y:15}),Q){const h=c.find(ce=>ce.category==="ci");H.push({id:"ci",type:"ci",label:"Deploy",provider:h.provider,status:h.status,dashboardUrl:h.dashboardUrl,x:70,y:15})}const re=c.find(h=>h.category==="hosting"),N=re?.provider,Ne=N?Ve[N]||N:d;H.push({id:"site",type:"site",label:Ne,provider:N,status:re?.status||"unknown",dashboardUrl:re?.dashboardUrl,x:70,y:70});let we=ee;if(I){const h=c.find(De=>De.category==="database"),ce=Ve[h.provider]||h.provider;H.push({id:"database",type:"database",label:"DB",label2:ce,provider:h.provider,status:h.status,dashboardUrl:h.dashboardUrl,x:150,y:we}),we+=fe}if(X){const h=c.find(De=>De.category==="auth"),ce=Ve[h.provider]||h.provider;H.push({id:"auth",type:"auth",label:"Auth",label2:ce,provider:h.provider,status:h.status,dashboardUrl:h.dashboardUrl,x:150,y:we}),we+=fe}if(G){const h=c.find(bt=>bt.category==="storage"),ce=Ve[h.provider]||h.provider,De=h.provider==="cloudflare"?"R2":ce;H.push({id:"storage",type:"storage",label:"Storage",label2:De,provider:h.provider,status:h.status,dashboardUrl:h.dashboardUrl,x:150,y:we})}if(E){const h=c.find(De=>De.category==="monitoring"),ce=Ve[h.provider]||h.provider;H.push({id:"monitoring",type:"monitoring",label:"Errors",label2:ce,provider:h.provider,status:h.status,dashboardUrl:h.dashboardUrl,x:70,y:125})}return H}function dr(c){const d=[],Y=new Set(c.map(H=>H.id));return Y.has("localdev")&&Y.has("ci")&&d.push({id:"localdev-ci",source:"localdev",target:"ci",status:"idle",isDeployPipeline:!0}),Y.has("ci")&&d.push({id:"ci-site",source:"ci",target:"site",status:"idle",isDeployPipeline:!0}),Y.has("database")&&d.push({id:"site-database",source:"site",target:"database",status:"active"}),Y.has("auth")&&d.push({id:"site-auth",source:"site",target:"auth",status:"active"}),Y.has("storage")&&d.push({id:"site-storage",source:"site",target:"storage",status:"active"}),Y.has("monitoring")&&d.push({id:"site-monitoring",source:"site",target:"monitoring",status:"idle"}),d}function Ie(c){const d=e(se).find(Y=>Y.id===c);return d?{x:d.x||0,y:d.y||0}:{x:0,y:0}}function y(c,d){const I=d.x-c.x,X=d.y-c.y,G=Math.sqrt(I*I+X*X);if(G===0)return{x1:c.x,y1:c.y,x2:d.x,y2:d.y,midX:c.x,midY:c.y,angle:0};const Q=I/G,E=X/G,A=c.x+Q*12,ee=c.y+E*12,fe=d.x-Q*14,re=d.y-E*14;return{x1:A,y1:ee,x2:fe,y2:re,midX:(A+fe)/2,midY:(ee+re)/2,angle:Math.atan2(X,I)*180/Math.PI}}function q(c){c.dashboardUrl&&window.open(c.dashboardUrl,"_blank","noopener,noreferrer")}var Ke=da(),Qe=r(Ke),Oe=r(Qe);Oe.__click=J;var et=r(Oe),tt=r(et);t(et),t(Oe);var rt=o(Oe,2);rt.__click=Ct;var cr=r(rt);Qr(cr,{class:"w-4 h-4"}),t(rt);var yt=o(rt,2);yt.__click=Ut;var vr=r(yt);t(yt);var Lt=o(yt,2);Lt.__click=$t;var pr=r(Lt);Jr(pr,{class:"w-4 h-4"}),t(Lt),t(Qe);var at=o(Qe,2),qe=r(at),mt=o(r(qe));Be(mt,17,()=>e(ir),ft,(c,d)=>{const Y=w(()=>Ie(e(d).source)),H=w(()=>Ie(e(d).target)),I=w(()=>y(e(Y),e(H))),X=w(()=>e(d).status==="active"),G=w(()=>e(d).isDeployPipeline),Q=w(()=>He()&&e(G));var E=ta(),A=r(E),ee=o(A);{var fe=re=>{var N=ea(),Ne=r(N,!0);t(N),u(()=>{k(N,"x",e(I).midX),k(N,"y",e(I).midY+1),b(Ne,e(d).label)}),i(re,N)};g(ee,re=>{e(d).label&&re(fe)})}t(E),u(()=>{k(A,"x1",e(I).x1),k(A,"y1",e(I).y1),k(A,"x2",e(I).x2),k(A,"y2",e(I).y2),k(A,"stroke",e(Q)?"#06b6d4":e(X)?"#22c55e":"#4b5563"),k(A,"marker-end",e(Q)?"url(#arrow-deploy)":e(X)?"url(#arrow-active)":"url(#arrow-idle)"),O(A,0,kr(e(Q)?"deploy-animated":""))}),i(c,E)});var qt=o(mt);Be(qt,17,()=>e(se),ft,(c,d)=>{const Y=w(()=>Bt[e(d).type]||Dt),H=w(()=>Yt[e(d).type]||"#6b7280"),I=w(()=>e(d).x??0),X=w(()=>e(d).y??0),G=w(()=>!!e(d).dashboardUrl),Q=w(()=>Gt(e(d).provider));var E=la();E.__click=()=>q(e(d)),E.__keydown=T=>T.key==="Enter"&&q(e(d));var A=r(E),ee=o(A);{var fe=T=>{var a=ra();u(()=>k(a,"href",e(Q))),i(T,a)},re=T=>{var a=aa(),s=r(a),l=r(s);yr(l,()=>e(Y),(n,p)=>{p(n,{class:"w-2.5 h-2.5"})}),t(s),t(a),u(()=>Sr(s,`color: ${e(H)??""}`)),i(T,a)};g(ee,T=>{e(R)&&e(Q)?T(fe):T(re,!1)})}var N=o(ee),Ne=r(N,!0);t(N);var we=o(N);{var h=T=>{var a=oa(),s=r(a,!0);t(a),u(l=>b(s,l),[()=>e(d).label2.length>12?e(d).label2.slice(0,11)+"..":e(d).label2]),i(T,a)};g(we,T=>{e(d).label2&&T(h)})}var ce=o(we);{var De=T=>{const a=w(()=>lr(e(d).id));var s=xt(),l=Fe(s);{var n=p=>{var C=sa(),F=r(C,!0);t(C),u(xe=>{k(C,"y",e(d).label2?31:25),b(F,xe)},[()=>ht(e(a))]),i(p,C)};g(l,p=>{e(a)&&p(n)})}i(T,s)};g(ce,T=>{He()&&T(De)})}var bt=o(ce);{var zt=T=>{var a=na(),s=r(a),l=r(s);me(l,{class:"w-1.5 h-1.5"}),t(s),t(a),i(T,a)};g(bt,T=>{e(G)&&T(zt)})}var ur=o(bt);{var gr=T=>{var a=ia(),s=r(a),l=r(s);It(l,{class:"w-2 h-2"}),t(s),t(a),i(T,a)};g(ur,T=>{(e(d).status==="down"||e(d).status==="degraded")&&T(gr)})}t(E),u(T=>{k(E,"transform",`translate(${e(I)??""}, ${e(X)??""})`),O(E,0,kr(e(G)?"cursor-pointer":"")),k(E,"role",e(G)?"button":void 0),k(E,"tabindex",e(G)?0:void 0),k(A,"stroke",e(H)),O(A,0,`transition-all ${e(G)?"hover:stroke-[1.5] hover:fill-gray-800":""}`),b(Ne,T)},[()=>e(d).label.length>10?e(d).label.slice(0,9)+"..":e(d).label]),i(c,E)}),t(qe),t(at),Fr(at,c=>j(W,c),()=>e(W)),t(Ke),u((c,d,Y,H,I)=>{O(Oe,1,`flex items-center justify-center w-8 h-8 hover:bg-gray-700/50 text-xs transition-colors ${e(R)?"text-gray-200":"text-gray-500"}`),k(Oe,"title",e(R)?"Hide logos":"Show logos"),O(et,1,`w-6 h-3 relative ${e(R)?"bg-green-600":"bg-gray-600"} transition-colors`),O(tt,1,`absolute top-0.5 ${e(R)?"right-0.5":"left-0.5"} w-2 h-2 bg-white transition-all`),b(vr,`${c??""}%`),k(qe,"viewBox",`${d??""} ${Y??""} ${H??""} ${I??""}`),Sr(qe,`transform: scale(${e(je)??""}); transform-origin: center;`)},[()=>Math.round(e(je)*100),()=>e(ge)().x,()=>e(ge)().y,()=>e(ge)().width,()=>e(ge)().height]),Br("wheel",at,Mt),i(Je,Ke),nr()}Tr(["click","keydown"]);var ca=v('<div class="absolute top-full left-0 mt-1 bg-gray-800 border border-gray-700 rounded shadow-lg z-10 min-w-[100px]"><button><!> <span>A-Z</span></button> <button><!> <span>Recent</span></button></div>'),va=v('<div class="p-4 text-center text-gray-500"><p>No repos configured.</p></div>'),pa=v('<div class="w-2.5 h-2.5 shrink-0 relative" title="Deploying..."><svg class="w-2.5 h-2.5 animate-spin" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="28" stroke-dashoffset="7" stroke-linecap="round"></circle></svg></div>'),ua=v("<div></div>"),ga=v('<div class="text-xs text-gray-500 truncate"> <span class="text-gray-600"> </span></div>'),fa=v('<div class="text-xs text-gray-500 truncate"> </div>'),xa=v('<div class="text-xs text-red-400 truncate"> </div>'),_a=v('<span class="text-xs"> </span>'),ha=v('<a target="_blank" rel="noopener noreferrer" class="p-1 -m-1 text-red-400 hover:text-red-300 transition-colors shrink-0" title="View failed deployment"><!></a>'),ya=v('<div class="shrink-0"><!></div>'),ma=v('<div class="shrink-0"><!></div>'),ba=v('<div class="flex items-center gap-1 text-xs text-gray-500 shrink-0"><!> <span> </span></div>'),wa=v('<button><!> <div class="flex-1 min-w-0"><!> <div> </div> <!> <!></div> <a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-gray-500 hover:text-gray-300 transition-colors shrink-0"><!> <!></a> <!> <!> <!> <!></button>'),ka=v('<div class="flex-1 overflow-y-auto py-1"></div>'),Sa=v('<div class="absolute top-full left-0 mt-1 bg-gray-800 border border-gray-700 rounded shadow-lg z-10 min-w-[100px]"><button><!> <span>A-Z</span></button> <button><!> <span>Recent</span></button></div>'),ja=v('<div class="p-4 text-center text-gray-500"><p>No repos configured.</p></div>'),Da=v('<div class="w-2.5 h-2.5 shrink-0 relative" title="Deploying..."><svg class="w-2.5 h-2.5 animate-spin" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="28" stroke-dashoffset="7" stroke-linecap="round"></circle></svg></div>'),Ca=v("<div></div>"),Ua=v('<div class="text-xs text-gray-500 truncate"> <span class="text-gray-600"> </span></div>'),Ma=v('<div class="text-xs text-gray-500 truncate"> </div>'),La=v('<div class="flex items-center gap-2 text-xs text-gray-500 shrink-0"><!> <span> </span></div>'),Pa=v('<a target="_blank" rel="noopener noreferrer"><span class="truncate"> </span> <!></a>'),Ta=v("<div> </div>"),Oa=v('<div class="bg-gray-800 p-2"><div class="flex items-center gap-1 text-gray-500 uppercase tracking-wider mb-1"><!> <span> </span></div> <!></div>'),Aa=v('<div class="bg-gray-850 svelte-rqn88j"><div class="bg-gray-900 py-2 px-2 h-72"><!></div> <div class="grid grid-cols-2 gap-3 text-xs px-4 pb-4 pt-3"></div></div>'),Ha=v('<div><button><!> <div class="flex-1 min-w-0"><!> <div> </div> <!></div> <a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-gray-500 hover:text-gray-300 transition-colors shrink-0"><!></a> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),Ia=v('<div class="flex-1 overflow-y-auto divide-y divide-gray-800"></div>'),Na=v('<div class="w-3 h-3 shrink-0 relative" title="Deploying..."><svg class="w-3 h-3 animate-spin" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="28" stroke-dashoffset="7" stroke-linecap="round"></circle></svg></div>'),Ra=v("<div></div>"),Ea=v('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-300 transition-colors"><!> <span>Deploy</span> <!></a>'),$a=v('<a target="_blank" rel="noopener noreferrer" class="px-3 py-1.5 bg-red-800 hover:bg-red-700 rounded text-sm text-red-100 transition-colors flex items-center gap-2">View Logs <!></a>'),Ba=v('<a target="_blank" rel="noopener noreferrer" class="px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-100 transition-colors flex items-center gap-2">View Dashboard <!></a>'),Ya=v('<div class="flex items-center gap-3 mb-4 p-3 bg-red-900/30 border border-red-800 rounded"><!> <div class="flex-1 min-w-0"><div class="text-red-400 font-medium">Deployment Failed</div> <div class="text-sm text-red-300/70"> <!></div></div> <div class="flex items-center gap-2 shrink-0"><!> <!></div></div>'),Ga=v('<a target="_blank" rel="noopener noreferrer" class="px-3 py-1.5 bg-cyan-800 hover:bg-cyan-700 rounded text-sm text-cyan-100 transition-colors flex items-center gap-2">View Progress <!></a>'),Va=v('<a target="_blank" rel="noopener noreferrer" class="px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-100 transition-colors flex items-center gap-2">View Dashboard <!></a>'),qa=v('<div class="flex items-center gap-3 mb-4 p-3 bg-cyan-900/30 border border-cyan-800 rounded"><svg class="w-5 h-5 animate-spin text-cyan-400 shrink-0" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="2" stroke-dasharray="28" stroke-dashoffset="7" stroke-linecap="round"></circle></svg> <div class="flex-1 min-w-0"><div class="text-cyan-400 font-medium">Deploying...</div> <div class="text-sm text-cyan-300/70"> </div></div> <div class="flex items-center gap-2 shrink-0"><!> <!></div></div>'),za=v('<a target="_blank" rel="noopener noreferrer" class="px-3 py-1.5 bg-green-800 hover:bg-green-700 rounded text-sm text-green-100 transition-colors flex items-center gap-2 shrink-0">View Dashboard <!></a>'),Wa=v('<div class="flex items-center gap-3 mb-4 p-3 bg-green-900/30 border border-green-800 rounded"><div class="w-5 h-5 rounded-full bg-green-500 flex items-center justify-center shrink-0"><svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg></div> <div class="flex-1 min-w-0"><div class="text-green-400 font-medium">Deployed Successfully</div> <div class="text-sm text-green-300/70"> </div></div> <!></div>'),Xa=v(' <span class="text-gray-500 text-xs ml-1"> </span>',1),Fa=v('<span class="text-gray-500">Unknown</span>'),Ja=v('<div><div class="text-gray-500 text-xs uppercase mb-1">Commit</div> <a target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 font-mono text-xs flex items-center gap-1"> <!></a></div>'),Za=v('<div><div class="text-gray-500 text-xs uppercase mb-1">CI Run</div> <a target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 flex items-center gap-1"> <!></a></div>'),Ka=v('<div class="col-span-2"><div class="text-gray-500 text-xs uppercase mb-1">Deploy Log</div> <a target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 flex items-center gap-1">View deployment details <!></a></div>'),Qa=v('<span class="px-3 py-1.5 bg-gray-700 text-sm text-blue-400"> </span>'),eo=v('<span class="px-3 py-1.5 bg-gray-700 text-sm text-cyan-400"> </span>'),to=v('<span class="px-3 py-1.5 bg-gray-700 text-sm text-yellow-400"> </span>'),ro=v('<span class="px-3 py-1.5 bg-gray-700 text-sm text-gray-400"> </span>'),ao=v('<span class="px-3 py-1.5 bg-gray-700 text-sm text-gray-500"> </span>'),oo=v('<div class="bg-gray-800 p-4"><div class="text-xs text-gray-500 uppercase tracking-wider mb-3">Tech Stack</div> <div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!></div></div>'),so=v('<a target="_blank" rel="noopener noreferrer"><span> </span> <!></a>'),no=v("<div><span> </span></div>"),io=v('<div><div class="flex items-center gap-2 text-xs text-gray-500 uppercase tracking-wider mb-1"><!> <span> </span></div> <!></div>'),lo=v('<div class="h-full flex flex-col"><div class="shrink-0 px-6 py-4 border-b border-gray-700 bg-gray-800"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><!> <div><h2 class="text-xl font-semibold text-white"> </h2> <p class="text-sm text-gray-400"> </p></div></div> <div class="flex items-center gap-2"><a target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-sm text-gray-400 transition-colors"><!> <span> </span> <!></a> <!> <a class="flex items-center justify-center w-8 h-8 bg-gray-700 hover:bg-gray-600 rounded text-gray-400 hover:text-gray-300 transition-colors"><!></a></div></div></div> <div class="shrink-0 px-6 py-4 border-b border-gray-700"><div class="text-xs text-gray-500 uppercase tracking-wider mb-3">Last Deployment</div> <div class="bg-gray-900 rounded-lg p-4"><!> <div class="grid grid-cols-2 gap-4 text-sm"><div><div class="text-gray-500 text-xs uppercase mb-1">Platform</div> <div class="text-gray-300 capitalize"> </div></div> <div><div class="text-gray-500 text-xs uppercase mb-1">Last Updated</div> <div class="text-gray-300"><!></div></div> <!> <!> <!></div></div></div> <div class="shrink-0 px-6 py-4 border-b border-gray-700"><div class="text-xs text-gray-500 uppercase tracking-wider mb-2">Infrastructure Flow</div> <div class="bg-gray-900 p-3"><!></div></div> <div class="flex-1 p-6 overflow-y-auto"><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <div class="bg-gray-800 p-4"><div class="text-xs text-gray-500 uppercase tracking-wider mb-3">Services</div> <div class="space-y-3"></div></div></div></div></div>'),co=v('<div class="h-full flex items-center justify-center text-gray-500"><p>Select a repository to view infrastructure</p></div>'),vo=v('<div class="flex-1 flex flex-col lg:flex-row min-h-0 h-full"><aside class="hidden lg:flex lg:flex-col w-[18rem] shrink-0 border-r border-gray-800 bg-gray-900"><div class="shrink-0 px-4 py-2 border-b border-gray-800 flex justify-between items-center"><div class="relative sort-dropdown"><button class="flex items-center gap-1 p-1.5 text-gray-400 hover:text-gray-200 cursor-pointer transition-colors"><!> <!></button> <!></div> <div class="flex gap-2"><button title="Show jaslr projects">jaslr</button> <button title="Show Vast Puddle projects">VP</button> <button title="Show Junipa projects only">Junipa</button></div></div> <!></aside> <div class="lg:hidden flex-1 flex flex-col overflow-hidden bg-gray-900"><div class="shrink-0 px-4 py-2 border-b border-gray-800 flex justify-between items-center"><div class="relative sort-dropdown"><button class="flex items-center gap-1 p-1.5 text-gray-400 hover:text-gray-200 cursor-pointer transition-colors"><!> <!></button> <!></div> <div class="flex gap-2"><button>jaslr</button> <button>VP</button> <button>Junipa</button></div></div> <!></div> <div class="hidden lg:flex flex-1 flex-col overflow-y-auto bg-gray-850 min-w-0 svelte-rqn88j"><!></div></div>');function Ao(Je,D){sr(D,!0);const He=Wr();let W=ue(Kt(He?.statuses||D.data.statuses)),Te=ue(Kt(He?.lastUpdated||D.data.lastUpdated)),Ge=ue(!1),be=Kt({});gt(()=>{D.data.statuses&&D.data.statuses.length>0&&(j(W,D.data.statuses,!0),j(Te,D.data.lastUpdated,!0),Xr(D.data.statuses,D.data.lastUpdated))});const Ze="https://observatory-backend.fly.dev";let je=w(()=>D.data.apiSecret||"");gt(()=>{tr.connect(Ze,e(je));const a=tr.subscribe(l=>{Nt(l)}),s=setInterval(()=>{j(Ge,tr.isConnected,!0)},1e3);return()=>{a(),clearInterval(s),tr.disconnect()}});function Nt(a){if(j(Te,new Date().toISOString(),!0),a.type==="connected"){j(Ge,!0);return}if(a.type==="deployment"&&a.project){const s=a.data;Rt(a.project,s)}if(a.type==="status"&&a.project){const s=a.data;_t(a.project,s)}}function Rt(a,s){const l=be[a]||{};be[a]={...l,pushStarted:s.pushedAt||l.pushStarted,ciStarted:s.ciStartedAt||l.ciStarted,ciCompleted:s.ciCompletedAt||l.ciCompleted,deployStarted:s.deployStartedAt||l.deployStarted,deployCompleted:s.deployCompletedAt||l.deployCompleted},j(W,e(W).map(n=>{if(n.repo===a||n.repo.toLowerCase()===a.toLowerCase()){let p;switch(s.status){case"success":p="success";break;case"failure":p="failure";break;case"in_progress":case"queued":p="deploying";break;default:p="unknown"}let C;switch(s.status){case"success":C="success";break;case"failure":C="failure";break;case"in_progress":case"queued":C="in_progress";break;default:C="unknown"}return{...n,deployStatus:p,deployedAt:new Date().toISOString(),deployUrl:s.runUrl||n.deployUrl,status:C,conclusion:s.status,html_url:s.runUrl||n.html_url,run_date:new Date().toISOString()}}return n}),!0)}function _t(a,s){j(W,e(W).map(l=>{if(l.repo===a||l.repo.toLowerCase()===a.toLowerCase()){if(s.category==="database"||s.category==="auth"){const F={...l.serviceHealth||{},[s.category]:s.status};return{...l,serviceHealth:F}}let n;switch(s.status){case"healthy":n="success";break;case"down":n="failure";break;case"degraded":n="deploying";break;default:n="unknown"}let p;switch(s.status){case"healthy":p="success";break;case"down":p="failure";break;case"degraded":p="in_progress";break;default:p="unknown"}return{...l,deployStatus:n,deployedAt:new Date().toISOString(),status:p,run_date:new Date().toISOString()}}return l}),!0)}let K=ue("name"),R=ue(!1);function Et(a){const s=a.target;e(R)&&!s.closest(".sort-dropdown")&&j(R,!1)}gt(()=>{if(e(R))return document.addEventListener("click",Et),()=>document.removeEventListener("click",Et)});let J=ue(Kt({jaslr:!0,vp:!0,junipa:!0}));gt(()=>{const a=localStorage.getItem("ci-monitor-owner-filters");if(a)try{const s=JSON.parse(a);j(J,{jaslr:!0,vp:!0,junipa:!0,...s},!0)}catch{}});function se(a){e(J)[a]=!e(J)[a],localStorage.setItem("ci-monitor-owner-filters",JSON.stringify(e(J)))}function ir(a){return a.filter(s=>{const l=s.owner==="jaslr",n=s.owner==="jvp-ux"||s.owner==="unknown",p=s.repo.toLowerCase().includes("junipa");return e(J).junipa&&p||l&&e(J).jaslr||n&&e(J).vp&&!p?!0:!e(J).jaslr&&!e(J).vp&&e(J).junipa?p:!1})}let ge=ue(null),$t=ue(!1);function Ct(a){return Gr(a)}function Ut(a){return a&&a.services.find(l=>l.category==="hosting")?.dashboardUrl||null}const Mt={success:"bg-green-500",failure:"bg-red-500",deploying:"bg-transparent",unknown:"bg-gray-500"};function Bt(a){if(!a)return"never";const s=new Date(a),n=new Date().getTime()-s.getTime(),p=Math.floor(n/6e4),C=Math.floor(n/36e5),F=Math.floor(n/864e5);return p<1?"just now":p<60?`${p}m ago`:C<24?`${C}h ago`:F<7?`${F}d ago`:s.toLocaleDateString()}function Yt(a){if(!a)return null;const s=new Date(a),l=s.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),n=s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{date:l,time:n}}const Ve={hosting:ar,database:br,auth:mr,storage:Ar,dns:or,domain:or,email:qr,ci:Ht,monitoring:It,analytics:Vr,cdn:Dt,secrets:mr},ht={cloudflare:"text-orange-400",supabase:"text-green-400",sentry:"text-purple-400",github:"text-gray-300",aws:"text-yellow-400",vercel:"text-white",flyio:"text-violet-400",google:"text-blue-400",gcp:"text-blue-400",netlify:"text-teal-400"};function lr(a,s){const l=[...a];return s==="name"?l.sort((n,p)=>n.repo.localeCompare(p.repo)):s==="recent"&&l.sort((n,p)=>!n.run_date&&!p.run_date?0:n.run_date?p.run_date?new Date(p.run_date).getTime()-new Date(n.run_date).getTime():-1:1),l}function Gt(a){const s=e(ge)===a?null:a;j(ge,s,!0);{const l=new URL(window.location.href);s?l.searchParams.set("project",s):l.searchParams.delete("project"),Dr(l.toString(),{replaceState:!0,noScroll:!0})}}function Vt(a){const s=new Map;for(const l of a){const n=s.get(l.category)||[];n.push(l),s.set(l.category,n)}return s}let dr=w(()=>ir(e(W))),Ie=w(()=>lr(e(dr),e(K))),y=w(()=>e(Ie).find(a=>a.repo===e(ge))),q=w(()=>e(ge)?Ct(e(ge)):null);gt(()=>{if(e($t)||e(Ie).length===0)return;const a=zr.url.searchParams.get("project"),s=a||e(Ie)[0].repo;if(j($t,!0),j(ge,s,!0),!a){const l=new URL(window.location.href);l.searchParams.set("project",s),Dr(l.toString(),{replaceState:!0,noScroll:!0})}});var Ke=vo();Yr("rqn88j",a=>{Rr(()=>{Er.title="Deployments | Orchon"})});var Qe=r(Ke),Oe=r(Qe),et=r(Oe),tt=r(et);tt.__click=()=>j(R,!e(R));var rt=r(tt);{var cr=a=>{er(a,{class:"w-4 h-4"})},yt=a=>{rr(a,{class:"w-4 h-4"})};g(rt,a=>{e(K)==="name"?a(cr):a(yt,!1)})}var vr=o(rt,2);jr(vr,{class:"w-3 h-3"}),t(tt);var Lt=o(tt,2);{var pr=a=>{var s=ca(),l=r(s);l.__click=()=>{j(K,"name"),j(R,!1)};var n=r(l);er(n,{class:"w-4 h-4"}),Qt(2),t(l);var p=o(l,2);p.__click=()=>{j(K,"recent"),j(R,!1)};var C=r(p);rr(C,{class:"w-4 h-4"}),Qt(2),t(p),t(s),u(()=>{O(l,1,`w-full flex items-center gap-2 px-3 py-2 text-xs text-left cursor-pointer hover:bg-gray-700 transition-colors ${e(K)==="name"?"text-white":"text-gray-400"}`),O(p,1,`w-full flex items-center gap-2 px-3 py-2 text-xs text-left cursor-pointer hover:bg-gray-700 transition-colors ${e(K)==="recent"?"text-white":"text-gray-400"}`)}),i(a,s)};g(Lt,a=>{e(R)&&a(pr)})}t(et);var at=o(et,2),qe=r(at);qe.__click=()=>se("jaslr");var mt=o(qe,2);mt.__click=()=>se("vp");var qt=o(mt,2);qt.__click=()=>se("junipa"),t(at),t(Oe);var c=o(Oe,2);{var d=a=>{var s=va();i(a,s)},Y=a=>{var s=ka();Be(s,21,()=>e(Ie),l=>l.repo,(l,n)=>{const p=w(()=>Ct(e(n).repo)),C=w(()=>e(ge)===e(n).repo),F=w(()=>e(K)==="recent"?Yt(e(n).run_date):null);var xe=wa();xe.__click=()=>Gt(e(n).repo);var Ae=r(xe);{var ot=f=>{var x=pa();i(f,x)},st=f=>{var x=ua();u(()=>{O(x,1,`w-2.5 h-2.5 rounded-full ${Mt[e(n).deployStatus]??""} shrink-0`,"svelte-rqn88j"),k(x,"title",`Deployment: ${e(n).deployStatus??""}`)}),i(f,x)};g(Ae,f=>{e(n).deployStatus==="deploying"?f(ot):f(st,!1)})}var nt=o(Ae,2),Re=r(nt);{var wt=f=>{var x=ga(),$=r(x),oe=o($),pt=r(oe,!0);t(oe),t(x),u(()=>{b($,`${e(F).date??""}, `),b(pt,e(F).time)}),i(f,x)};g(Re,f=>{e(F)&&f(wt)})}var Ee=o(Re,2),Ce=r(Ee,!0);t(Ee);var it=o(Ee,2);{var lt=f=>{var x=fa(),$=r(x,!0);t(x),u(()=>b($,e(n).owner)),i(f,x)};g(it,f=>{e(F)||f(lt)})}var Pt=o(it,2);{var $e=f=>{var x=xa(),$=r(x,!0);t(x),u(()=>b($,e(n).conclusion==="cancelled"?"Cancelled":e(n).conclusion==="timed_out"?"Timed out":"Build failed")),i(f,x)};g(Pt,f=>{e(n).deployStatus==="failure"&&f($e)})}t(nt);var Ue=o(nt,2);Ue.__click=f=>f.stopPropagation();var dt=r(Ue);Ht(dt,{class:"w-3.5 h-3.5"});var ct=o(dt,2);{var Tt=f=>{var x=_a(),$=r(x,!0);t(x),u(()=>b($,e(n).version)),i(f,x)};g(ct,f=>{e(n).version&&f(Tt)})}t(Ue);var ze=o(Ue,2);{var kt=f=>{var x=ha();x.__click=oe=>oe.stopPropagation();var $=r(x);It($,{class:"w-4 h-4"}),t(x),u(()=>k(x,"href",e(n).deployUrl||e(n).html_url)),i(f,x)};g(ze,f=>{e(n).deployStatus==="failure"&&f(kt)})}var U=o(ze,2);{var V=f=>{var x=ya(),$=r(x);{let oe=w(()=>e(n).serviceHealth.database==="down"?"text-red-400":"text-yellow-400");br($,{get class(){return`w-3.5 h-3.5 ${e(oe)??""}`}})}t(x),u(()=>k(x,"title",`Database: ${e(n).serviceHealth.database??""}`)),i(f,x)};g(U,f=>{e(n).serviceHealth?.database&&e(n).serviceHealth.database!=="healthy"&&f(V)})}var ae=o(U,2);{var ve=f=>{var x=ma(),$=r(x);{let oe=w(()=>e(n).serviceHealth.auth==="down"?"text-red-400":"text-yellow-400");Kr($,{get class(){return`w-3.5 h-3.5 ${e(oe)??""}`}})}t(x),u(()=>k(x,"title",`Auth: ${e(n).serviceHealth.auth??""}`)),i(f,x)};g(ae,f=>{e(n).serviceHealth?.auth&&e(n).serviceHealth.auth!=="healthy"&&f(ve)})}var Me=o(ae,2);{var vt=f=>{var x=ba(),$=r(x);Ur($,{class:"w-3 h-3"});var oe=o($,2),pt=r(oe,!0);t(oe),t(x),u(()=>b(pt,e(p).services.length)),i(f,x)};g(Me,f=>{e(p)&&f(vt)})}t(xe),u(f=>{O(xe,1,`w-full flex items-center gap-3 px-4 py-3 text-left cursor-pointer transition-colors ${e(C)?"bg-gray-800 border-l-2 border-blue-500":"hover:bg-gray-800/50 border-l-2 border-transparent"}`),O(Ee,1,`font-medium text-sm truncate ${e(C)?"text-white":"text-gray-300"}`),b(Ce,e(n).repo),k(Ue,"href",e(n).repoUrl),k(Ue,"title",`GitHub: ${(e(n).version||"no version")??""} - ${f??""}`)},[()=>Bt(e(n).lastPush)]),i(l,xe)}),t(s),i(a,s)};g(c,a=>{e(W).length===0?a(d):a(Y,!1)})}t(Qe);var H=o(Qe,2),I=r(H),X=r(I),G=r(X);G.__click=()=>j(R,!e(R));var Q=r(G);{var E=a=>{er(a,{class:"w-4 h-4"})},A=a=>{rr(a,{class:"w-4 h-4"})};g(Q,a=>{e(K)==="name"?a(E):a(A,!1)})}var ee=o(Q,2);jr(ee,{class:"w-3 h-3"}),t(G);var fe=o(G,2);{var re=a=>{var s=Sa(),l=r(s);l.__click=()=>{j(K,"name"),j(R,!1)};var n=r(l);er(n,{class:"w-4 h-4"}),Qt(2),t(l);var p=o(l,2);p.__click=()=>{j(K,"recent"),j(R,!1)};var C=r(p);rr(C,{class:"w-4 h-4"}),Qt(2),t(p),t(s),u(()=>{O(l,1,`w-full flex items-center gap-2 px-3 py-2 text-xs text-left cursor-pointer hover:bg-gray-700 transition-colors ${e(K)==="name"?"text-white":"text-gray-400"}`),O(p,1,`w-full flex items-center gap-2 px-3 py-2 text-xs text-left cursor-pointer hover:bg-gray-700 transition-colors ${e(K)==="recent"?"text-white":"text-gray-400"}`)}),i(a,s)};g(fe,a=>{e(R)&&a(re)})}t(X);var N=o(X,2),Ne=r(N);Ne.__click=()=>se("jaslr");var we=o(Ne,2);we.__click=()=>se("vp");var h=o(we,2);h.__click=()=>se("junipa"),t(N),t(I);var ce=o(I,2);{var De=a=>{var s=ja();i(a,s)},bt=a=>{var s=Ia();Be(s,21,()=>e(Ie),l=>l.repo,(l,n)=>{const p=w(()=>Ct(e(n).repo)),C=w(()=>e(ge)===e(n).repo),F=w(()=>e(K)==="recent"?Yt(e(n).run_date):null);var xe=Ha(),Ae=r(xe);Ae.__click=()=>Gt(e(n).repo);var ot=r(Ae);{var st=U=>{var V=Da();i(U,V)},nt=U=>{var V=Ca();u(()=>O(V,1,`w-2.5 h-2.5 rounded-full ${Mt[e(n).deployStatus]??""} shrink-0`,"svelte-rqn88j")),i(U,V)};g(ot,U=>{e(n).deployStatus==="deploying"?U(st):U(nt,!1)})}var Re=o(ot,2),wt=r(Re);{var Ee=U=>{var V=Ua(),ae=r(V),ve=o(ae),Me=r(ve,!0);t(ve),t(V),u(()=>{b(ae,`${e(F).date??""}, `),b(Me,e(F).time)}),i(U,V)};g(wt,U=>{e(F)&&U(Ee)})}var Ce=o(wt,2),it=r(Ce,!0);t(Ce);var lt=o(Ce,2);{var Pt=U=>{var V=Ma(),ae=r(V,!0);t(V),u(()=>b(ae,e(n).owner)),i(U,V)};g(lt,U=>{e(F)||U(Pt)})}t(Re);var $e=o(Re,2);$e.__click=U=>U.stopPropagation();var Ue=r($e);Ht(Ue,{class:"w-3.5 h-3.5"}),t($e);var dt=o($e,2);{var ct=U=>{var V=La(),ae=r(V);Ur(ae,{class:"w-3 h-3"});var ve=o(ae,2),Me=r(ve,!0);t(ve),t(V),u(()=>b(Me,e(p).services.length)),i(U,V)};g(dt,U=>{e(p)&&U(ct)})}var Tt=o(dt,2);t(Ae);var ze=o(Ae,2);{var kt=U=>{const V=w(()=>Vt(e(p).services));var ae=Aa(),ve=r(ae),Me=r(ve);{let f=w(()=>e(n).deployStatus==="deploying");Mr(Me,{get services(){return e(p).services},get projectName(){return e(p).displayName},get isDeploying(){return e(f)},get deploymentTimestamps(){return be[e(n).repo]}})}t(ve);var vt=o(ve,2);Be(vt,21,()=>[...e(V).entries()],ft,(f,x)=>{var $=w(()=>wr(e(x),2));let oe=()=>e($)[0],pt=()=>e($)[1];const fr=w(()=>Ve[oe()]||Dt);var St=Oa(),Ot=r(St),At=r(Ot);yr(At,()=>e(fr),(ut,Le)=>{Le(ut,{class:"w-3 h-3"})});var Wt=o(At,2),xr=r(Wt,!0);t(Wt),t(Ot);var _r=o(Ot,2);Be(_r,17,pt,ft,(ut,Le)=>{var Xt=xt(),Ft=Fe(Xt);{var Jt=We=>{var _e=Pa(),Xe=r(_e),_=r(Xe,!0);t(Xe);var m=o(Xe,2);me(m,{class:"w-2.5 h-2.5 opacity-50 shrink-0"}),t(_e),u(()=>{k(_e,"href",e(Le).dashboardUrl),O(_e,1,`flex items-center gap-1 py-0.5 ${(ht[e(Le).provider]||"text-gray-300")??""} hover:underline`,"svelte-rqn88j"),b(_,e(Le).serviceName)}),i(We,_e)},Zt=We=>{var _e=Ta(),Xe=r(_e,!0);t(_e),u(()=>{O(_e,1,`py-0.5 ${(ht[e(Le).provider]||"text-gray-300")??""} truncate`,"svelte-rqn88j"),b(Xe,e(Le).serviceName)}),i(We,_e)};g(Ft,We=>{e(Le).dashboardUrl?We(Jt):We(Zt,!1)})}i(ut,Xt)}),t(St),u(()=>b(xr,oe())),i(f,St)}),t(vt),t(ae),i(U,ae)};g(ze,U=>{e(C)&&e(p)&&U(kt)})}t(xe),u(()=>{O(Ae,1,`w-full flex items-center gap-3 px-4 py-3 text-left cursor-pointer transition-colors ${e(C)?"bg-gray-800":"hover:bg-gray-800/50"}`),O(Ce,1,`font-medium text-sm truncate ${e(C)?"text-white":"text-gray-300"}`),b(it,e(n).repo),k($e,"href",e(n).repoUrl),O(Tt,0,`w-4 h-4 text-gray-500 transition-transform ${e(C)?"rotate-180":""}`)}),i(l,xe)}),t(s),i(a,s)};g(ce,a=>{e(Ie).length===0?a(De):a(bt,!1)})}t(H);var zt=o(H,2),ur=r(zt);{var gr=a=>{const s=w(()=>Vt(e(q).services));var l=lo(),n=r(l),p=r(n),C=r(p),F=r(C);{var xe=_=>{var m=Na();i(_,m)},Ae=_=>{var m=Ra();u(()=>O(m,1,`w-3 h-3 rounded-full ${Mt[e(y).deployStatus]??""}`,"svelte-rqn88j")),i(_,m)};g(F,_=>{e(y).deployStatus==="deploying"?_(xe):_(Ae,!1)})}var ot=o(F,2),st=r(ot),nt=r(st,!0);t(st);var Re=o(st,2),wt=r(Re);t(Re),t(ot),t(C);var Ee=o(C,2),Ce=r(Ee),it=r(Ce);Ht(it,{class:"w-4 h-4"});var lt=o(it,2),Pt=r(lt,!0);t(lt);var $e=o(lt,2);me($e,{class:"w-3 h-3"}),t(Ce);var Ue=o(Ce,2);{var dt=_=>{var m=Ea(),P=r(m);ar(P,{class:"w-4 h-4"});var B=o(P,4);me(B,{class:"w-3 h-3"}),t(m),u(()=>k(m,"href",e(y).deployUrl)),i(_,m)};g(Ue,_=>{e(y).deployUrl&&_(dt)})}var ct=o(Ue,2),Tt=r(ct);Zr(Tt,{class:"w-4 h-4"}),t(ct),t(Ee),t(p),t(n);var ze=o(n,2),kt=o(r(ze),2),U=r(kt);{var V=_=>{const m=w(()=>Ut(e(q)));var P=Ya(),B=r(P);It(B,{class:"w-5 h-5 text-red-400 shrink-0"});var ne=o(B,2),Z=o(r(ne),2),te=r(Z),he=o(te);{var ye=L=>{var z=$r();u(()=>b(z,`- ${e(y).conclusion??""}`)),i(L,z)};g(he,L=>{e(y).conclusion&&L(ye)})}t(Z),t(ne);var pe=o(ne,2),Pe=r(pe);{var ke=L=>{var z=$a(),ie=o(r(z));me(ie,{class:"w-3 h-3"}),t(z),u(()=>k(z,"href",e(y).html_url)),i(L,z)};g(Pe,L=>{e(y).html_url&&L(ke)})}var M=o(Pe,2);{var S=L=>{var z=Ba(),ie=o(r(z));me(ie,{class:"w-3 h-3"}),t(z),u(()=>k(z,"href",e(m))),i(L,z)};g(M,L=>{e(m)&&L(S)})}t(pe),t(P),u(()=>b(te,`${(e(y).workflow_name||"Unknown workflow")??""} `)),i(_,P)},ae=_=>{var m=xt(),P=Fe(m);{var B=Z=>{const te=w(()=>Ut(e(q)));var he=qa(),ye=o(r(he),2),pe=o(r(ye),2),Pe=r(pe,!0);t(pe),t(ye);var ke=o(ye,2),M=r(ke);{var S=ie=>{var le=Ga(),de=o(r(le));me(de,{class:"w-3 h-3"}),t(le),u(()=>k(le,"href",e(y).html_url)),i(ie,le)};g(M,ie=>{e(y).html_url&&ie(S)})}var L=o(M,2);{var z=ie=>{var le=Va(),de=o(r(le));me(de,{class:"w-3 h-3"}),t(le),u(()=>k(le,"href",e(te))),i(ie,le)};g(L,ie=>{e(te)&&ie(z)})}t(ke),t(he),u(()=>b(Pe,e(y).workflow_name||"Deployment in progress")),i(Z,he)},ne=Z=>{var te=xt(),he=Fe(te);{var ye=pe=>{const Pe=w(()=>Ut(e(q)));var ke=Wa(),M=o(r(ke),2),S=o(r(M),2),L=r(S,!0);t(S),t(M);var z=o(M,2);{var ie=le=>{var de=za(),Se=o(r(de));me(Se,{class:"w-3 h-3"}),t(de),u(()=>k(de,"href",e(Pe))),i(le,de)};g(z,le=>{e(Pe)&&le(ie)})}t(ke),u(()=>b(L,e(y).workflow_name||"Last deployment succeeded")),i(pe,ke)};g(he,pe=>{e(y).deployStatus==="success"&&pe(ye)},!0)}i(Z,te)};g(P,Z=>{e(y).deployStatus==="deploying"?Z(B):Z(ne,!1)},!0)}i(_,m)};g(U,_=>{e(y).deployStatus==="failure"?_(V):_(ae,!1)})}var ve=o(U,2),Me=r(ve),vt=o(r(Me),2),f=r(vt,!0);t(vt),t(Me);var x=o(Me,2),$=o(r(x),2),oe=r($);{var pt=_=>{var m=Xa(),P=Fe(m),B=o(P),ne=r(B);t(B),u((Z,te)=>{b(P,`${Z??""} `),b(ne,`(${te??""})`)},[()=>Bt(e(y).deployedAt||e(y).run_date),()=>new Date(e(y).deployedAt||e(y).run_date||"").toLocaleString()]),i(_,m)},fr=_=>{var m=Fa();i(_,m)};g(oe,_=>{e(y).deployedAt||e(y).run_date?_(pt):_(fr,!1)})}t($),t(x);var St=o(x,2);{var Ot=_=>{var m=Ja(),P=o(r(m),2),B=r(P),ne=o(B);me(ne,{class:"w-3 h-3"}),t(P),t(m),u(Z=>{k(P,"href",`${e(y).repoUrl??""}/commit/${e(y).lastCommitSha??""}`),b(B,`${Z??""} `)},[()=>e(y).lastCommitSha.slice(0,7)]),i(_,m)};g(St,_=>{e(y).lastCommitSha&&_(Ot)})}var At=o(St,2);{var Wt=_=>{var m=Za(),P=o(r(m),2),B=r(P),ne=o(B);me(ne,{class:"w-3 h-3"}),t(P),t(m),u(()=>{k(P,"href",e(y).html_url),b(B,`${(e(y).workflow_name||"View Run")??""} `)}),i(_,m)};g(At,_=>{e(y).html_url&&_(Wt)})}var xr=o(At,2);{var _r=_=>{var m=Ka(),P=o(r(m),2),B=o(r(P));me(B,{class:"w-3 h-3"}),t(P),t(m),u(()=>k(P,"href",e(y).deployUrl)),i(_,m)};g(xr,_=>{e(y).deployUrl&&_(_r)})}t(ve),t(kt),t(ze);var ut=o(ze,2),Le=o(r(ut),2),Xt=r(Le);{let _=w(()=>e(y).deployStatus==="deploying");Mr(Xt,{get services(){return e(q).services},get projectName(){return e(q).displayName},get isDeploying(){return e(_)},get deploymentTimestamps(){return be[e(y).repo]}})}t(Le),t(ut);var Ft=o(ut,2),Jt=r(Ft),Zt=r(Jt);{var We=_=>{var m=oo(),P=o(r(m),2),B=r(P);{var ne=M=>{var S=Qa(),L=r(S,!0);t(S),u(()=>b(L,e(q).stack.framework)),i(M,S)};g(B,M=>{e(q).stack.framework&&M(ne)})}var Z=o(B,2);Be(Z,17,()=>e(q).stack.css||[],ft,(M,S)=>{var L=eo(),z=r(L,!0);t(L),u(()=>b(z,e(S))),i(M,L)});var te=o(Z,2);{var he=M=>{var S=to(),L=r(S,!0);t(S),u(()=>b(L,e(q).stack.buildTool)),i(M,S)};g(te,M=>{e(q).stack.buildTool&&M(he)})}var ye=o(te,2);{var pe=M=>{var S=ro(),L=r(S,!0);t(S),u(()=>b(L,e(q).stack.language)),i(M,S)};g(ye,M=>{e(q).stack.language&&M(pe)})}var Pe=o(ye,2);{var ke=M=>{var S=ao(),L=r(S,!0);t(S),u(()=>b(L,e(q).stack.packageManager)),i(M,S)};g(Pe,M=>{e(q).stack.packageManager&&M(ke)})}t(P),t(m),i(_,m)};g(Zt,_=>{e(q).stack&&_(We)})}var _e=o(Zt,2),Xe=o(r(_e),2);Be(Xe,21,()=>[...e(s).entries()],ft,(_,m)=>{var P=w(()=>wr(e(m),2));let B=()=>e(P)[0],ne=()=>e(P)[1];const Z=w(()=>Ve[B()]||Dt);var te=io(),he=r(te),ye=r(he);yr(ye,()=>e(Z),(M,S)=>{S(M,{class:"w-3 h-3"})});var pe=o(ye,2),Pe=r(pe,!0);t(pe),t(he);var ke=o(he,2);Be(ke,17,ne,ft,(M,S)=>{var L=xt(),z=Fe(L);{var ie=de=>{var Se=so(),jt=r(Se),hr=r(jt,!0);t(jt);var Nr=o(jt,2);me(Nr,{class:"w-3 h-3 opacity-50"}),t(Se),u(()=>{k(Se,"href",e(S).dashboardUrl),O(Se,1,`flex items-center gap-2 py-1 text-sm ${(ht[e(S).provider]||"text-gray-300")??""} hover:underline`,"svelte-rqn88j"),b(hr,e(S).serviceName)}),i(de,Se)},le=de=>{var Se=no(),jt=r(Se),hr=r(jt,!0);t(jt),t(Se),u(()=>{O(Se,1,`flex items-center gap-2 py-1 text-sm ${(ht[e(S).provider]||"text-gray-300")??""}`,"svelte-rqn88j"),b(hr,e(S).serviceName)}),i(de,Se)};g(z,de=>{e(S).dashboardUrl?de(ie):de(le,!1)})}i(M,L)}),t(te),u(()=>b(Pe,B())),i(_,te)}),t(Xe),t(_e),t(Jt),t(Ft),t(l),u(()=>{b(nt,e(q).displayName),b(wt,`${e(y).owner??""}/${e(y).repo??""}`),k(Ce,"href",e(y).repoUrl),b(Pt,e(y).version||"Repo"),k(ct,"href",`/admin/repos?project=${e(y).repo??""}`),b(f,e(y).deployPlatform||"Unknown")}),i(a,l)},T=a=>{var s=co();i(a,s)};g(ur,a=>{e(y)&&e(q)?a(gr):a(T,!1)})}t(zt),t(Ke),u(()=>{k(tt,"title",e(K)==="name"?"Sorted A-Z":"Sorted by Recent"),O(qe,1,`px-2 py-1 text-xs cursor-pointer transition-colors ${e(J).jaslr?"text-gray-200":"text-gray-500"}`),O(mt,1,`px-2 py-1 text-xs cursor-pointer transition-colors ${e(J).vp?"text-gray-200":"text-gray-500"}`),O(qt,1,`px-2 py-1 text-xs cursor-pointer transition-colors ${e(J).junipa?"text-gray-200":"text-gray-500"}`),O(Ne,1,`px-2 py-1 text-xs cursor-pointer transition-colors ${e(J).jaslr?"text-gray-200":"text-gray-500"}`),O(we,1,`px-2 py-1 text-xs cursor-pointer transition-colors ${e(J).vp?"text-gray-200":"text-gray-500"}`),O(h,1,`px-2 py-1 text-xs cursor-pointer transition-colors ${e(J).junipa?"text-gray-200":"text-gray-500"}`)}),i(Je,Ke),nr()}Tr(["click"]);export{Ao as component};
