import"../chunks/DsnmJJEf.js";import{p as da,s as ft,b as va,u as ca,d as N,e as Y,k as r,l as n,g as t,t as y,a as d,h as pa,j as ga,$ as xa,r as a,n as q,m as oe,i as U,c as nt,f as R,v as Yt,x as we}from"../chunks/Dnd2HTQh.js";import{s as u}from"../chunks/BDR25Ma5.js";import{i as M}from"../chunks/DKZzDoih.js";import{s as zt,a as J,e as Z}from"../chunks/C4TM4onk.js";import{h as _a}from"../chunks/DoDuvpHD.js";import{s as B}from"../chunks/H3ICmHr2.js";import{d as ua,e as ke}from"../chunks/Dc2clUla.js";import{b as ha}from"../chunks/BxCSoznQ.js";import{S as ma}from"../chunks/H0G3jxI6.js";import{Z as fa,a as ya,F as ba,A as wa}from"../chunks/CyIEH-U8.js";import{A as ka}from"../chunks/DvOicAbW.js";import{B as Pe}from"../chunks/DjzREpZG.js";import{S as $e,N as Ce}from"../chunks/C4qq8lPG.js";import{P as Pa}from"../chunks/BTxy6n0L.js";import{G as $a}from"../chunks/Dbpxzosl.js";import{E as Ct}from"../chunks/BFTGOLv7.js";import{F as ne}from"../chunks/BH6OhVQf.js";import{S as Ye}from"../chunks/B_HwfPhO.js";var Ca=Yt('<path fill="none" stroke="rgba(16, 185, 129, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(16, 185, 129)"></circle>',1),Ya=Yt('<path fill="none" stroke="rgba(139, 92, 246, 0.5)" stroke-width="2"></path><!>',1),Xa=Yt('<path fill="none" stroke="rgba(75, 85, 99, 0.6)" stroke-width="2" stroke-dasharray="4 4"></path><circle r="4" fill="rgb(107, 114, 128)"></circle>',1),Ha=Y('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[10px] text-gray-500 hover:text-gray-400 mt-1.5 group"><!> <span class="truncate"> </span> <!></a>'),Ia=Y('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-xs text-emerald-400 hover:text-emerald-300 group"><span class="truncate"> </span> <!></a>'),Na=Y('<div class="absolute bg-gray-900 border-2 border-emerald-500 rounded-lg overflow-hidden shadow-xl shadow-emerald-500/10"><div class="px-4 py-2.5 bg-emerald-950/50 border-b border-emerald-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm">Org Portal</span></div> <div class="text-[9px] text-emerald-300/70 mt-0.5">junipa-organisations</div></div> <div class="px-4 py-2"><!> <div class="text-[9px] text-gray-500 mt-1 font-mono"> </div></div></div>'),Ma=Y('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Ra=Y('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-1.5 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-1.5"><!> <div class="text-[9px] text-gray-500 mt-0.5 font-mono"> </div></div></div>'),Sa=Y('<div class="absolute bg-gray-800/60 border border-gray-700 rounded-lg overflow-hidden"><div class="px-3 py-2"><div class="flex items-center gap-2"><!> <span class="font-medium text-gray-200 text-sm"> </span></div> <!> <div class="text-[10px] text-gray-600 mt-1"> </div></div></div> <!> <!>',1),Oa=Yt('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),Ua=Yt('<path fill="none" stroke="rgba(99, 102, 241, 0.4)" stroke-width="2" stroke-dasharray="6 4"></path><circle r="4" fill="rgb(99, 102, 241)"></circle>',1),Ta=Y('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Aa=Y('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-[11px] text-blue-400 hover:text-blue-300 group"><span class="truncate"> </span> <!></a>'),Da=Y('<div class="text-[10px] text-gray-500 mt-0.5 font-mono"> </div>'),Ea=Y('<div class="absolute bg-gray-900 border border-gray-600 rounded-lg overflow-hidden shadow-lg hover:border-gray-500 transition-colors"><div class="px-3 py-2 bg-gray-800/50 border-b border-gray-700"><div class="flex items-center gap-2"><!> <span class="font-medium text-white text-xs truncate"> </span></div></div> <div class="px-3 py-2"><!> <!></div></div>'),Ga=Y('<div class="absolute bg-gray-900 border-2 border-indigo-500 rounded-lg overflow-hidden shadow-xl shadow-indigo-500/10"><div class="px-4 py-3 bg-indigo-950/50 border-b border-indigo-500/30"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <div class="text-[10px] text-indigo-300 mt-1">Source Repository</div></div> <div class="px-4 py-2"><!> <div class="text-[10px] text-gray-500 mt-1"> </div></div></div> <!>',1),ja=Yt('<svg class="absolute top-0 left-0 pointer-events-none"></svg><!>',1),La=Y('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 mt-1.5 group"><span class="truncate"> </span> <!></a>'),za=Y('<div class="text-xs text-gray-500 mt-1.5">No production URL</div>'),Ba=Y('<div class="flex items-center gap-2 px-2 py-1.5 bg-gray-800/50 rounded text-xs"><span class="text-gray-400 w-12 shrink-0"> </span> <span class="text-gray-200 font-medium"> </span></div>'),Wa=Y('<div class="bg-gray-900 border border-gray-700 rounded-lg overflow-hidden shadow-xl hover:border-gray-500 transition-colors"><div class="px-4 py-3 bg-gray-800/70 border-b border-gray-700"><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2"><!> <span class="font-semibold text-white text-sm"> </span></div> <span class="px-2 py-0.5 rounded text-[10px] font-medium bg-gray-700 text-gray-300"> </span></div> <!> <div class="text-[10px] text-gray-500 mt-1 font-mono"> </div></div> <div class="p-3 space-y-1.5 max-h-[200px] overflow-y-auto"></div></div>'),Fa=Y('<div class="grid gap-8 p-10" style="grid-template-columns: repeat(4, 280px);"></div>'),Za=Y('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Hierarchy:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Client</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Org Portal</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Campus</span></div></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Lines:</span> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-purple-500"></div> <span class="text-xs text-gray-400">to org portal</span></div> <div class="flex items-center gap-1.5"><div class="w-6 h-0.5 rounded bg-emerald-500 opacity-60" style="background: repeating-linear-gradient(90deg, rgb(16 185 129 / 0.6) 0px, rgb(16 185 129 / 0.6) 4px, transparent 4px, transparent 8px);"></div> <span class="text-xs text-gray-400">to campus</span></div></div>',1),Va=Y('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),qa=Y('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div> <div class="flex items-center gap-3"><span class="text-xs text-gray-500">Node Types:</span> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Source Repo</span></div> <div class="flex items-center gap-1.5"><!> <span class="text-xs text-gray-400">Deployed Instance</span></div></div>',1),Ja=Y('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded"></div> <span class="text-xs text-gray-400"> </span></div>'),Ka=Y('<div class="flex items-center gap-3"><span class="text-xs text-gray-500">Identity:</span> <!></div>'),Qa=Y('<span class="px-1.5 py-0.5 bg-gray-800 rounded text-[10px] text-gray-400"> </span>'),tr=Y('<div class="flex items-center gap-4 text-xs border-l border-gray-700 pl-4"><div class="flex items-center gap-1.5"><!> <span class="text-gray-400 font-mono"> </span> <span class="text-cyan-400 font-mono"> </span></div> <div class="flex items-center gap-2 text-gray-500"><span> </span> <span class="text-gray-600">|</span> <span> </span></div> <div class="flex items-center gap-1.5 text-gray-600"></div></div>'),er=Y('<div class="h-full flex flex-col bg-gray-950 overflow-hidden"><div class="shrink-0 flex items-center justify-between px-4 py-2 bg-gray-900/80 border-b border-gray-800 backdrop-blur-sm z-10"><div class="flex items-center gap-4"><h1 class="text-lg font-semibold text-white">Infrastructure Map</h1> <div class="flex items-center gap-1 bg-gray-800 rounded-lg p-0.5"><button>Ownership</button> <button>Repos</button> <button>Flat</button></div> <span class="text-xs text-gray-500"><!></span></div> <div class="flex items-center gap-2"><a href="/infrastructure/settings" class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors" title="Manage GCP Projects"><!> Settings</a> <button class="flex items-center gap-1.5 px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors"><!> Sort</button> <div class="flex items-center gap-1 ml-2"><button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <span class="text-xs text-gray-400 w-14 text-center"> </span> <button class="p-1.5 bg-gray-800 hover:bg-gray-700 rounded text-gray-300"><!></button> <button class="flex items-center gap-1.5 px-2 py-1.5 bg-blue-600 hover:bg-blue-500 rounded text-xs text-white font-medium ml-2" title="Fit diagram to view"><!> Fit</button></div></div></div> <div class="shrink-0 px-4 py-1 text-xs text-gray-500 bg-gray-900/50"> </div> <div role="application" tabindex="0"><div class="absolute inset-0 pointer-events-none"></div> <div class="absolute origin-top-left"><!></div></div> <div class="shrink-0 px-4 py-2 bg-gray-900/90 border-t border-gray-800 flex items-center justify-between gap-6 flex-wrap"><div class="flex items-center gap-6 flex-wrap"><!></div> <!></div></div>');function br(Xe,K){da(K,!0);let j=ft("ownership"),yt=ft(!0),Ot=ft(va({}));ca(()=>{if(typeof window<"u"){const e=localStorage.getItem("gcp-project-overrides");if(e)try{N(Ot,JSON.parse(e),!0)}catch{N(Ot,{},!0)}}});function ie(e,i){return e in t(Ot)?t(Ot)[e]:i}let le=U(()=>K.data.projects.filter(e=>!e.sourceRepo)),de=U(()=>t(yt)?[...t(le)].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...t(le)].sort((e,i)=>i.displayName.localeCompare(e.displayName))),bt=U(()=>t(yt)?[...K.data.sourceRepos].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...K.data.sourceRepos].sort((e,i)=>i.displayName.localeCompare(e.displayName))),ve=U(()=>K.data.clients.map(e=>{const i=e.campuses.filter(v=>ie(v.gcpProject,!0)),l=e.orgPortal?ie(e.orgPortal.gcpProject,!0):!0;return{...e,campuses:i,orgPortal:l?e.orgPortal:void 0}}).filter(e=>e.campuses.length>0||e.orgPortal)),pt=U(()=>t(yt)?[...t(ve)].sort((e,i)=>e.displayName.localeCompare(i.displayName)):[...t(ve)].sort((e,i)=>i.displayName.localeCompare(e.displayName))),Q=ft(40),tt=ft(40),E=ft(1),gt,Ut=ft(!1),Xt={x:0,y:0,panX:0,panY:0};const Tt=280,Ht=120,He=240,wt=80,kt=200,xt=80,It=280,_t=100,Ie=240,et=75,it=120,Pt=140,at=20,At=50,F=60,Dt={jaslr:"#3b82f6","jvp-ux":"#8b5cf6"};function Nt(e){try{return new URL(e).hostname}catch{return e}}function Ne(e){return e.find(l=>l.category==="hosting")?.provider||"unknown"}function Me(e){e.preventDefault();const i=gt.getBoundingClientRect(),l=e.clientX-i.left,v=e.clientY-i.top,g=(l-t(Q))/t(E),s=(v-t(tt))/t(E),o=e.deltaY>0?.9:1.1,c=Math.max(.1,Math.min(5,t(E)*o));N(Q,l-g*c),N(tt,v-s*c),N(E,c,!0)}function Re(e){e.target.closest("a")||(N(Ut,!0),Xt={x:e.clientX,y:e.clientY,panX:t(Q),panY:t(tt)})}function Se(e){t(Ut)&&(N(Q,Xt.panX+(e.clientX-Xt.x)),N(tt,Xt.panY+(e.clientY-Xt.y)))}function ce(){N(Ut,!1)}function Oe(){const e=gt.getBoundingClientRect(),i=e.width/2,l=e.height/2,v=(i-t(Q))/t(E),g=(l-t(tt))/t(E),s=Math.min(5,t(E)*1.25);N(Q,i-v*s),N(tt,l-g*s),N(E,s,!0)}function Ue(){const e=gt.getBoundingClientRect(),i=e.width/2,l=e.height/2,v=(i-t(Q))/t(E),g=(l-t(tt))/t(E),s=Math.max(.1,t(E)/1.25);N(Q,i-v*s),N(tt,l-g*s),N(E,s,!0)}function pe(){if(t(j)==="ownership"){let e=F;for(const l of t(pt)){const v=l.campuses.length>0?l.campuses.length*(et+at)-at:et,g=l.orgPortal?_t:0,s=Math.max(xt,g,v);e+=s+At}return{width:F+kt+it+It+Pt+Ie+F,height:e+F}}else if(t(j)==="repos"){let e=F;for(const i of t(bt)){const l=i.instances.length>0?i.instances.length*(wt+at)-at:0,v=Math.max(Ht,l);e+=v+At}return{width:F+Tt+it+He+F,height:e+F}}return{width:1400,height:1200}}function Te(){if(!gt)return;const e=gt.getBoundingClientRect(),i=60,{width:l,height:v}=pe(),g=(e.width-i*2)/l,s=(e.height-i*2)/v,o=Math.min(g,s,1);N(Q,(e.width-l*o)/2),N(tt,(e.height-v*o)/2),N(E,o,!0)}function Ae(){const e=new Map;let i=F;const l=F,v=F+kt+it,g=v+It+Pt;for(const s of t(pt)){const o=s.campuses.length>0?s.campuses.length*(et+at)-at:et,c=s.orgPortal?_t:0,p=Math.max(xt,c,o),m=l,x=i+(p-xt)/2;let _,$;s.orgPortal&&(_=v,$=i+(p-_t)/2);const C=[],k=i+(p-o)/2;for(let h=0;h<s.campuses.length;h++)C.push({id:s.campuses[h].id,x:g,y:k+h*(et+at)});e.set(s.id,{clientX:m,clientY:x,orgPortalX:_,orgPortalY:$,campusPositions:C}),i+=p+At}return e}function De(){const e=new Map;let i=F;for(const l of t(bt)){const v=l.instances.length>0?l.instances.length*(wt+at)-at:0,g=Math.max(Ht,v),s=F,o=i+(g-Ht)/2,c=[],p=i+(g-v)/2;for(let m=0;m<l.instances.length;m++)c.push({id:l.instances[m].id,x:F+Tt+it,y:p+m*(wt+at)});e.set(l.id,{x:s,y:o,instancePositions:c}),i+=g+At}return e}let ge=U(Ae),xe=U(De),Et=U(pe);var Bt=er();_a("hoqwi7",e=>{ga(()=>{xa.title="Infrastructure Map | Orchon"})});var Wt=r(Bt),Ft=r(Wt),Zt=n(r(Ft),2),Vt=r(Zt);Vt.__click=()=>N(j,"ownership");var qt=n(Vt,2);qt.__click=()=>N(j,"repos");var _e=n(qt,2);_e.__click=()=>N(j,"flat"),a(Zt);var ue=n(Zt,2),Ee=r(ue);{var Ge=e=>{var i=oe();y((l,v)=>u(i,`${t(pt).length??""} clients, ${l??""} org portals, ${v??""} campuses`),[()=>t(pt).filter(l=>l.orgPortal).length,()=>t(pt).reduce((l,v)=>l+v.campuses.length,0)]),d(e,i)},je=e=>{var i=nt(),l=R(i);{var v=s=>{var o=oe();y(c=>u(o,`${t(bt).length??""} repos, ${c??""} instances`),[()=>t(bt).reduce((c,p)=>c+p.instances.length,0)]),d(s,o)},g=s=>{var o=oe();y(()=>u(o,`${t(de).length??""} projects`)),d(s,o)};M(l,s=>{t(j)==="repos"?s(v):s(g,!1)},!0)}d(e,i)};M(Ee,e=>{t(j)==="ownership"?e(Ge):e(je,!1)})}a(ue),a(Ft);var he=n(Ft,2),Jt=r(he),Le=r(Jt);ma(Le,{class:"w-3.5 h-3.5"}),q(),a(Jt);var Gt=n(Jt,2);Gt.__click=()=>N(yt,!t(yt));var ze=r(Gt);{var Be=e=>{wa(e,{class:"w-3.5 h-3.5"})},We=e=>{ka(e,{class:"w-3.5 h-3.5"})};M(ze,e=>{t(yt)?e(Be):e(We,!1)})}q(),a(Gt);var me=n(Gt,2),jt=r(me);jt.__click=Ue;var Fe=r(jt);fa(Fe,{class:"w-4 h-4"}),a(jt);var Kt=n(jt,2),Ze=r(Kt);a(Kt);var Lt=n(Kt,2);Lt.__click=Oe;var Ve=r(Lt);ya(Ve,{class:"w-4 h-4"}),a(Lt);var Qt=n(Lt,2);Qt.__click=Te;var qe=r(Qt);ba(qe,{class:"w-3.5 h-3.5"}),q(),a(Qt),a(me),a(he),a(Wt);var te=n(Wt,2),Je=r(te);a(te);var rt=n(te,2);let fe;rt.__mousedown=Re,rt.__mousemove=Se,rt.__mouseup=ce;var ye=r(rt),ee=n(ye,2),Ke=r(ee);{var Qe=e=>{var i=Oa(),l=R(i);Z(l,21,()=>t(pt),g=>g.id,(g,s)=>{const o=U(()=>t(ge).get(t(s).id));var c=nt(),p=R(c);{var m=x=>{var _=nt(),$=R(_);{var C=h=>{var P=Ya(),T=R(P),X=n(T);Z(X,17,()=>t(o).campusPositions,f=>f.id,(f,H)=>{var S=Ca(),A=R(S),dt=n(A);y(()=>{B(A,"d",`M ${t(o).orgPortalX+It} ${t(o).orgPortalY+_t/2}
										   C ${t(o).orgPortalX+It+Pt/2} ${t(o).orgPortalY+_t/2},
										     ${t(H).x-Pt/2} ${t(H).y+et/2},
										     ${t(H).x??""} ${t(H).y+et/2}`),B(dt,"cx",t(H).x),B(dt,"cy",t(H).y+et/2)}),d(f,S)}),y(()=>B(T,"d",`M ${t(o).clientX+kt} ${t(o).clientY+xt/2}
									   C ${t(o).clientX+kt+it/2} ${t(o).clientY+xt/2},
									     ${t(o).orgPortalX-it/2} ${t(o).orgPortalY+_t/2},
									     ${t(o).orgPortalX??""} ${t(o).orgPortalY+_t/2}`)),d(h,P)},k=h=>{var P=nt(),T=R(P);Z(T,17,()=>t(o).campusPositions,X=>X.id,(X,f)=>{var H=Xa(),S=R(H),A=n(S);y(()=>{B(S,"d",`M ${t(o).clientX+kt} ${t(o).clientY+xt/2}
										   C ${t(o).clientX+kt+(it+It+Pt)/2} ${t(o).clientY+xt/2},
										     ${t(f).x-Pt/2} ${t(f).y+et/2},
										     ${t(f).x??""} ${t(f).y+et/2}`),B(A,"cx",t(f).x),B(A,"cy",t(f).y+et/2)}),d(X,H)}),d(h,P)};M($,h=>{t(s).orgPortal&&t(o).orgPortalX!==void 0&&t(o).orgPortalY!==void 0?h(C):h(k,!1)})}d(x,_)};M(p,x=>{t(o)&&x(m)})}d(g,c)}),a(l);var v=n(l);Z(v,17,()=>t(pt),g=>g.id,(g,s)=>{const o=U(()=>t(ge).get(t(s).id));var c=nt(),p=R(c);{var m=x=>{var _=Sa(),$=R(_),C=r($),k=r(C),h=r(k);Pe(h,{class:"w-4 h-4 text-gray-400"});var P=n(h,2),T=r(P,!0);a(P),a(k);var X=n(k,2);{var f=L=>{var G=Ha(),b=r(G);$a(b,{class:"w-3 h-3"});var w=n(b,2),D=r(w,!0);a(w);var I=n(w,2);Ct(I,{class:"w-2 h-2 opacity-50 group-hover:opacity-100"}),a(G),y(O=>{B(G,"href",t(s).marketingUrl),u(D,O)},[()=>Nt(t(s).marketingUrl)]),d(L,G)};M(X,L=>{t(s).marketingUrl&&L(f)})}var H=n(X,2),S=r(H);a(H),a(C),a($);var A=n($,2);{var dt=L=>{var G=Na(),b=r(G),w=r(b),D=r(w);Ce(D,{class:"w-4 h-4 text-emerald-400"}),q(2),a(w),q(2),a(b);var I=n(b,2),O=r(I);{var W=V=>{var ot=Ia(),vt=r(ot),ht=r(vt,!0);a(vt);var Mt=n(vt,2);Ct(Mt,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(ot),y(()=>{B(ot,"href",t(s).orgPortal.productionUrl),u(ht,t(s).orgPortal.customDomain)}),d(V,ot)};M(O,V=>{t(s).orgPortal.productionUrl&&V(W)})}var z=n(O,2),st=r(z,!0);a(z),a(I),a(G),y(()=>{J(G,`left: ${t(o).orgPortalX??""}px; top: ${t(o).orgPortalY??""}px; width: 280px; min-height: 100px;`),u(st,t(s).orgPortal.gcpProject)}),d(L,G)};M(A,L=>{t(s).orgPortal&&t(o).orgPortalX!==void 0&&t(o).orgPortalY!==void 0&&L(dt)})}var ut=n(A,2);Z(ut,19,()=>t(o).campusPositions,L=>L.id,(L,G,b)=>{const w=U(()=>t(s).campuses[t(b)]);var D=Ra(),I=r(D),O=r(I),W=r(O);$e(W,{class:"w-3.5 h-3.5 text-blue-400"});var z=n(W,2),st=r(z,!0);a(z),a(O),a(I);var V=n(I,2),ot=r(V);{var vt=$t=>{var mt=Ma(),Rt=r(mt),re=r(Rt,!0);a(Rt);var se=n(Rt,2);Ct(se,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(mt),y(lt=>{B(mt,"href",t(w).productionUrl),u(re,lt)},[()=>t(w).customDomain||Nt(t(w).productionUrl)]),d($t,mt)};M(ot,$t=>{t(w).productionUrl&&$t(vt)})}var ht=n(ot,2),Mt=r(ht,!0);a(ht),a(V),a(D),y(()=>{J(D,`left: ${t(G).x??""}px; top: ${t(G).y??""}px; width: 240px; min-height: 75px;`),u(st,t(w).displayName),u(Mt,t(w).gcpProject)}),d(L,D)}),y(()=>{J($,`left: ${t(o).clientX??""}px; top: ${t(o).clientY??""}px; width: 200px; min-height: 80px;`),u(T,t(s).displayName),u(S,`${t(s).campuses.length??""} campus${t(s).campuses.length!==1?"es":""}`)}),d(x,_)};M(p,x=>{t(o)&&x(m)})}d(g,c)}),y(()=>J(l,`width: ${t(Et).width??""}px; height: ${t(Et).height??""}px;`)),d(e,i)},ta=e=>{var i=nt(),l=R(i);{var v=s=>{var o=ja(),c=R(o);Z(c,21,()=>t(bt),m=>m.id,(m,x)=>{const _=U(()=>t(xe).get(t(x).id));var $=nt(),C=R($);{var k=h=>{var P=nt(),T=R(P);Z(T,17,()=>t(_).instancePositions,X=>X.id,(X,f)=>{var H=Ua(),S=R(H),A=n(S);y(()=>{B(S,"d",`M ${t(_).x+Tt} ${t(_).y+Ht/2}
									   C ${t(_).x+Tt+it/2} ${t(_).y+Ht/2},
									     ${t(f).x-it/2} ${t(f).y+wt/2},
									     ${t(f).x??""} ${t(f).y+wt/2}`),B(A,"cx",t(f).x),B(A,"cy",t(f).y+wt/2)}),d(X,H)}),d(h,P)};M(C,h=>{t(_)&&t(x).instances.length>0&&h(k)})}d(m,$)}),a(c);var p=n(c);Z(p,17,()=>t(bt),m=>m.id,(m,x)=>{const _=U(()=>t(xe).get(t(x).id)),$=U(()=>Dt[t(x).identity]||"#6b7280");var C=nt(),k=R(C);{var h=P=>{var T=Ga(),X=R(T),f=r(X),H=r(f),S=r(H);ne(S,{class:"w-4 h-4 text-indigo-400"});var A=n(S,2),dt=r(A,!0);a(A),a(H),q(2),a(f);var ut=n(f,2),L=r(ut);{var G=I=>{var O=Ta(),W=r(O),z=r(W,!0);a(W);var st=n(W,2);Ct(st,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(O),y(V=>{B(O,"href",t(x).productionUrl),u(z,V)},[()=>Nt(t(x).productionUrl)]),d(I,O)};M(L,I=>{t(x).productionUrl&&I(G)})}var b=n(L,2),w=r(b);a(b),a(ut),a(X);var D=n(X,2);Z(D,19,()=>t(_).instancePositions,I=>I.id,(I,O,W)=>{const z=U(()=>t(x).instances[t(W)]);var st=Ea(),V=r(st),ot=r(V),vt=r(ot);Ye(vt,{class:"w-3.5 h-3.5 text-emerald-400"});var ht=n(vt,2),Mt=r(ht,!0);a(ht),a(ot),a(V);var $t=n(V,2),mt=r($t);{var Rt=lt=>{var ct=Aa(),St=r(ct),na=r(St,!0);a(St);var ia=n(St,2);Ct(ia,{class:"w-2.5 h-2.5 opacity-60 group-hover:opacity-100"}),a(ct),y(la=>{B(ct,"href",t(z).productionUrl),u(na,la)},[()=>Nt(t(z).productionUrl)]),d(lt,ct)};M(mt,lt=>{t(z).productionUrl&&lt(Rt)})}var re=n(mt,2);{var se=lt=>{var ct=Da(),St=r(ct,!0);a(ct),y(()=>u(St,t(z).gcpProject)),d(lt,ct)};M(re,lt=>{t(z).gcpProject&&lt(se)})}a($t),a(st),y(()=>{J(st,`left: ${t(O).x??""}px; top: ${t(O).y??""}px; width: 240px; height: 80px;`),u(Mt,t(z).displayName)}),d(I,st)}),y(()=>{J(X,`left: ${t(_).x??""}px; top: ${t(_).y??""}px; width: 280px; height: 120px; border-left: 4px solid ${t($)??""};`),u(dt,t(x).displayName),u(w,`${t(x).instances.length??""} deployed instance${t(x).instances.length!==1?"s":""}`)}),d(P,T)};M(k,P=>{t(_)&&P(h)})}d(m,C)}),y(()=>J(c,`width: ${t(Et).width??""}px; height: ${t(Et).height??""}px;`)),d(s,o)},g=s=>{var o=Fa();Z(o,21,()=>t(de),c=>c.id,(c,p)=>{const m=U(()=>Dt[t(p).identity]||"#6b7280"),x=U(()=>Ne(t(p).services));var _=Wa(),$=r(_),C=r($),k=r(C),h=r(k);{var P=b=>{ne(b,{class:"w-4 h-4 text-indigo-400"})};M(h,b=>{t(p).isSourceRepo&&b(P)})}var T=n(h,2),X=r(T,!0);a(T),a(k);var f=n(k,2),H=r(f,!0);a(f),a(C);var S=n(C,2);{var A=b=>{var w=La(),D=r(w),I=r(D,!0);a(D);var O=n(D,2);Ct(O,{class:"w-3 h-3 opacity-60 group-hover:opacity-100"}),a(w),y(W=>{B(w,"href",t(p).productionUrl),u(I,W)},[()=>Nt(t(p).productionUrl)]),d(b,w)},dt=b=>{var w=za();d(b,w)};M(S,b=>{t(p).productionUrl?b(A):b(dt,!1)})}var ut=n(S,2),L=r(ut,!0);a(ut),a($);var G=n($,2);Z(G,23,()=>t(p).services,(b,w)=>b.provider+"-"+b.category+"-"+w,(b,w)=>{var D=Ba(),I=r(D),O=r(I,!0);a(I);var W=n(I,2),z=r(W,!0);a(W),a(D),y(()=>{u(O,t(w).category),u(z,t(w).provider)}),d(b,D)}),a(G),a(_),y(()=>{J(_,`border-left: 4px solid ${t(m)??""}; width: 280px;`),u(X,t(p).displayName),u(H,t(x)),u(L,t(p).id)}),d(c,_)}),a(o),d(s,o)};M(l,s=>{t(j)==="repos"?s(v):s(g,!1)},!0)}d(e,i)};M(Ke,e=>{t(j)==="ownership"?e(Qe):e(ta,!1)})}a(ee),a(rt),ha(rt,e=>gt=e,()=>gt);var be=n(rt,2),ae=r(be),ea=r(ae);{var aa=e=>{var i=Za(),l=R(i),v=n(r(l),2),g=r(v);Pe(g,{class:"w-3.5 h-3.5 text-gray-400"}),q(2),a(v);var s=n(v,2),o=r(s);Ce(o,{class:"w-3.5 h-3.5 text-emerald-400"}),q(2),a(s);var c=n(s,2),p=r(c);$e(p,{class:"w-3.5 h-3.5 text-blue-400"}),q(2),a(c),a(l),q(2),d(e,i)},ra=e=>{var i=nt(),l=R(i);{var v=s=>{var o=qa(),c=R(o),p=n(r(c),2);Z(p,17,()=>Object.entries(Dt),([k,h])=>k,(k,h)=>{var P=U(()=>we(t(h),2));let T=()=>t(P)[0],X=()=>t(P)[1];var f=Va(),H=r(f),S=n(H,2),A=r(S,!0);a(S),a(f),y(()=>{J(H,`background-color: ${X()??""};`),u(A,T())}),d(k,f)}),a(c);var m=n(c,2),x=n(r(m),2),_=r(x);ne(_,{class:"w-3.5 h-3.5 text-indigo-400"}),q(2),a(x);var $=n(x,2),C=r($);Ye(C,{class:"w-3.5 h-3.5 text-emerald-400"}),q(2),a($),a(m),d(s,o)},g=s=>{var o=Ka(),c=n(r(o),2);Z(c,17,()=>Object.entries(Dt),([p,m])=>p,(p,m)=>{var x=U(()=>we(t(m),2));let _=()=>t(x)[0],$=()=>t(x)[1];var C=Ja(),k=r(C),h=n(k,2),P=r(h,!0);a(h),a(C),y(()=>{J(k,`background-color: ${$()??""};`),u(P,_())}),d(p,C)}),a(o),d(s,o)};M(l,s=>{t(j)==="repos"?s(v):s(g,!1)},!0)}d(e,i)};M(ea,e=>{t(j)==="ownership"?e(aa):e(ra,!1)})}a(ae);var sa=n(ae,2);{var oa=e=>{var i=tr(),l=r(i),v=r(l);Pa(v,{class:"w-3.5 h-3.5 text-cyan-500"});var g=n(v,2),s=r(g,!0);a(g);var o=n(g,2),c=r(o);a(o),a(l);var p=n(l,2),m=r(p),x=r(m);a(m);var _=n(m,4),$=r(_);a(_),a(p);var C=n(p,2);Z(C,20,()=>K.data.packageInfo.keyPackages.slice(0,4),k=>k,(k,h)=>{var P=Qa(),T=r(P,!0);a(P),y(X=>u(T,X),[()=>h.replace("@","").split("/").pop()]),d(k,P)}),a(C),a(i),y(()=>{u(s,K.data.packageInfo.name),u(c,`v${K.data.packageInfo.version??""}`),u(x,`${K.data.packageInfo.dependencyCount??""} deps`),u($,`${K.data.packageInfo.devDependencyCount??""} dev`)}),d(e,i)};M(sa,e=>{K.data.packageInfo&&e(oa)})}a(be),a(Bt),y(e=>{zt(Vt,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(j)==="ownership"?"bg-emerald-600 text-white":"text-gray-400 hover:text-white"}`),zt(qt,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(j)==="repos"?"bg-indigo-600 text-white":"text-gray-400 hover:text-white"}`),zt(_e,1,`px-3 py-1 text-xs rounded-md transition-colors ${t(j)==="flat"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`),u(Ze,`${e??""}%`),u(Je,`Scroll to zoom | Drag to pan | ${t(j)==="ownership"?"Organisation ownership hierarchy":t(j)==="repos"?"Source repos with deployed instances":"All projects"}`),fe=zt(rt,1,"flex-1 overflow-hidden relative cursor-grab select-none",null,fe,{"cursor-grabbing":t(Ut)}),J(ye,`
				background-image:
					linear-gradient(rgba(55, 65, 81, 0.3) 1px, transparent 1px),
					linear-gradient(90deg, rgba(55, 65, 81, 0.3) 1px, transparent 1px);
				background-size: ${40*t(E)}px ${40*t(E)}px;
				background-position: ${t(Q)??""}px ${t(tt)??""}px;
			`),J(ee,`transform: translate(${t(Q)??""}px, ${t(tt)??""}px) scale(${t(E)??""});`)},[()=>Math.round(t(E)*100)]),ke("wheel",rt,Me),ke("mouseleave",rt,ce),d(Xe,Bt),pa()}ua(["click","mousedown","mousemove","mouseup"]);export{br as component};
