import"../chunks/DsnmJJEf.js";import{p as Q,c as ve,b as X,n as ue,a as g,d as U,a9 as Oe,D as at,aa as d,f as p,O as i,M as s,an as P,I as r,N as a,L as O,al as Te,am as ot}from"../chunks/bOSu8_9I.js";import{s as ge,d as st,a as N,e as E}from"../chunks/Ctk_jbRy.js";import{i as F}from"../chunks/C3RYBViL.js";import{I as fe,e as ne,i as Ie,r as A,b as je,a as $e,s as nt,h as it}from"../chunks/CNoyRSNi.js";import{a as ie,e as de}from"../chunks/DephRoQt.js";import{b as le}from"../chunks/BtgbrfCX.js";import{s as pe,r as me}from"../chunks/Di9dn3sX.js";import{S as dt}from"../chunks/kAnafDTg.js";import{C as ce}from"../chunks/CeZRj0qK.js";import{X as K}from"../chunks/C9ePCuFK.js";import{P as lt}from"../chunks/DGJCo_Ae.js";import{F as ct}from"../chunks/B4bRJSkD.js";import{T as vt}from"../chunks/C5Oc2MIu.js";function ut(T,l){Q(l,!0);let h=me(l,["$$slots","$$events","$$legacy"]);const v=[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]];fe(T,pe({name:"grip-vertical"},()=>h,{get iconNode(){return v},children:(k,I)=>{var _=ve(),D=X(_);ge(D,()=>l.children??ue),g(k,_)},$$slots:{default:!0}})),U()}function gt(T,l){Q(l,!0);let h=me(l,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];fe(T,pe({name:"pen"},()=>h,{get iconNode(){return v},children:(k,I)=>{var _=ve(),D=X(_);ge(D,()=>l.children??ue),g(k,_)},$$slots:{default:!0}})),U()}function ft(T,l){Q(l,!0);let h=me(l,["$$slots","$$events","$$legacy"]);const v=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];fe(T,pe({name:"rotate-ccw"},()=>h,{get iconNode(){return v},children:(k,I)=>{var _=ve(),D=X(_);ge(D,()=>l.children??ue),g(k,_)},$$slots:{default:!0}})),U()}var pt=p('<form method="POST" action="?/saveConfig"><input type="hidden" name="config"/> <button type="submit" class="flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-800 rounded-lg text-white transition-colors"><!> </button></form>'),mt=p('<div class="p-3 bg-green-900/50 border border-green-700 rounded-lg flex items-center gap-2 text-green-300 text-sm"><!> </div>'),_t=p('<div class="p-3 bg-red-900/50 border border-red-700 rounded-lg flex items-center gap-2 text-red-300 text-sm"><!> </div>'),xt=p('<form method="POST" action="?/addGroup" class="flex items-center gap-2"><input type="text" name="name" placeholder="Group name..." class="px-3 py-1.5 bg-gray-800 border border-gray-600 rounded text-white text-sm focus:outline-none focus:border-blue-500"/> <input type="color" name="color" class="w-8 h-8 rounded cursor-pointer"/> <button type="submit" class="p-1.5 bg-green-600 hover:bg-green-700 rounded text-white"><!></button> <button type="button" class="p-1.5 bg-gray-600 hover:bg-gray-500 rounded text-white"><!></button></form>'),bt=p('<button class="flex items-center gap-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 rounded text-gray-300 text-sm transition-colors"><!> Add Group</button>'),yt=p('<form method="POST" action="?/deleteGroup"><input type="hidden" name="groupId"/> <button type="submit" class="p-1 text-gray-500 hover:text-red-400 transition-colors" title="Delete group"><!></button></form>'),ht=p('<input type="text" class="flex-1 px-2 py-0.5 bg-gray-800 border border-gray-600 rounded text-sm text-white focus:outline-none focus:border-blue-500"/> <button class="p-1 text-green-400 hover:text-green-300"><!></button> <button class="p-1 text-gray-400 hover:text-gray-300"><!></button>',1),wt=p('<button class="p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity" title="Remove from this group"><!></button>'),Pt=p('<div class="flex-1 min-w-0"><div class="text-sm text-white truncate"> </div> <div class="text-xs text-gray-500 truncate"> </div></div> <button class="p-1 text-gray-500 hover:text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity" title="Rename"><!></button> <!>',1),Nt=p('<div draggable="true" role="listitem"><!> <!></div>'),kt=p('<div class="flex items-center justify-center h-20 text-gray-500 text-sm"><!> Drag repos here</div>'),Dt=p('<div role="region"><div class="px-4 py-3 border-b border-gray-700 flex items-center justify-between"><div class="flex items-center gap-2"><span class="font-medium text-white"> </span> <span class="text-xs text-gray-500"> </span></div> <!></div> <div class="p-2 min-h-[100px] space-y-1"></div></div>'),St=p('<div class="flex items-center gap-1.5 px-2 py-1 bg-gray-700 rounded text-sm cursor-move" draggable="true" role="listitem"><span class="text-gray-300"> </span> <span class="text-xs text-gray-500"> </span></div>'),Ct=p('<div class="p-6 space-y-6"><div class="flex items-center justify-between"><div><h2 class="text-xl font-semibold text-white">Projects & Groups</h2> <p class="text-gray-400 text-sm mt-1">Organize repos into groups. Drag to move between groups.</p></div> <div class="flex items-center gap-2"><!> <form method="POST" action="?/resetConfig"><button type="submit" class="flex items-center gap-2 px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-gray-300 transition-colors" title="Reset to defaults"><!></button></form></div></div> <!> <!> <div class="flex items-center gap-2"><!></div> <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"></div> <div class="mt-8"><h3 class="text-lg font-medium text-gray-300 mb-3">All Projects</h3> <div class="bg-gray-800 rounded-lg p-4"><div class="flex flex-wrap gap-2"></div></div></div></div>');function Xt(T,l){Q(l,!0);let h=Oe(structuredClone(l.data.groups)),v=Oe(structuredClone(l.data.projects)),k=P(!1),I=P(!1),_=P(""),D=P("#6b7280"),q=P(!1),B=P(null),j=P(""),J=P(null),M=P(null);at(()=>{const t=JSON.stringify({groups:h,projects:v}),e=JSON.stringify({groups:l.data.groups,projects:l.data.projects});d(k,t!==e)});function Ee(t){return v.filter(e=>e.groups.includes(t)).sort((e,o)=>e.order-o.order)}function _e(t,e){d(J,e,!0),t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",e))}function Fe(t,e){t.preventDefault(),d(M,e,!0),t.dataTransfer&&(t.dataTransfer.dropEffect="move")}function Je(){d(M,null)}function Le(t,e){if(t.preventDefault(),d(M,null),!r(J))return;const o=v.findIndex(u=>u.id===r(J));if(o===-1)return;const n=v[o];n.groups.includes(e)||(v[o]={...n,groups:[...n.groups,e]}),d(J,null)}function xe(){d(J,null),d(M,null)}function Me(t,e){const o=v.findIndex(u=>u.id===t);if(o===-1)return;const n=v[o];v[o]={...n,groups:n.groups.filter(u=>u!==e)}}function Re(t,e){d(B,t,!0),d(j,e,!0)}function be(t){const e=v.findIndex(o=>o.id===t);e!==-1&&r(j).trim()&&(v[e]={...v[e],displayName:r(j).trim()}),d(B,null),d(j,"")}function ye(){d(B,null),d(j,"")}function ze(){return JSON.stringify({groups:h,projects:v})}var V=Ct(),W=s(V),he=i(s(W),2),we=s(he);{var Ae=t=>{var e=pt(),o=s(e);A(o);var n=i(o,2),u=s(n);dt(u,{class:"w-4 h-4"});var b=i(u);a(n),a(e),ie(e,(f,$)=>de?.(f,$),()=>()=>(d(I,!0),async({update:f})=>{await f(),d(I,!1)})),O(f=>{je(o,f),n.disabled=r(I),N(b,` ${r(I)?"Saving...":"Save Changes"}`)},[ze]),g(t,e)};F(we,t=>{r(k)&&t(Ae)})}var Y=i(we,2),Pe=s(Y),Xe=s(Pe);ft(Xe,{class:"w-4 h-4"}),a(Pe),a(Y),ie(Y,t=>de?.(t)),a(he),a(W);var Ne=i(W,2);{var qe=t=>{var e=mt(),o=s(e);ce(o,{class:"w-4 h-4"});var n=i(o);a(e),O(()=>N(n,` ${l.form.message??""}`)),g(t,e)};F(Ne,t=>{l.form?.success&&t(qe)})}var ke=i(Ne,2);{var Be=t=>{var e=_t(),o=s(e);K(o,{class:"w-4 h-4"});var n=i(o);a(e),O(()=>N(n,` ${l.form.error??""}`)),g(t,e)};F(ke,t=>{l.form?.error&&t(Be)})}var Z=i(ke,2),He=s(Z);{var Ke=t=>{var e=xt(),o=s(e);A(o);var n=i(o,2);A(n);var u=i(n,2),b=s(u);ce(b,{class:"w-4 h-4"}),a(u);var f=i(u,2);f.__click=()=>d(q,!1);var $=s(f);K($,{class:"w-4 h-4"}),a(f),a(e),ie(e,(y,te)=>de?.(y,te),()=>()=>async({update:y})=>{await y(),d(_,""),d(q,!1)}),le(o,()=>r(_),y=>d(_,y)),le(n,()=>r(D),y=>d(D,y)),g(t,e)},Qe=t=>{var e=bt();e.__click=()=>d(q,!0);var o=s(e);lt(o,{class:"w-4 h-4"}),Te(),a(e),g(t,e)};F(He,t=>{r(q)?t(Ke):t(Qe,!1)})}a(Z);var ee=i(Z,2);ne(ee,21,()=>h,Ie,(t,e)=>{const o=ot(()=>Ee(r(e).id));var n=Dt(),u=s(n),b=s(u),f=s(b),$=s(f,!0);a(f);var y=i(f,2),te=s(y);a(y),a(b);var Ue=i(b,2);{var Ve=m=>{var c=yt(),x=s(c);A(x);var R=i(x,2),re=s(R);vt(re,{class:"w-3.5 h-3.5"}),a(R),a(c),O(()=>je(x,r(e).id)),g(m,c)};F(Ue,m=>{r(e).id!=="jaslr"&&r(e).id!=="jvp-ux"&&m(Ve)})}a(u);var Ge=i(u,2);ne(Ge,21,()=>r(o),m=>m.id,(m,c)=>{var x=Nt(),R=s(x);ut(R,{class:"w-4 h-4 text-gray-500 shrink-0"});var re=i(R,2);{var We=S=>{var z=ht(),C=X(z);A(C),C.__keydown=w=>{w.key==="Enter"&&be(r(c).id),w.key==="Escape"&&ye()};var G=i(C,2);G.__click=()=>be(r(c).id);var ae=s(G);ce(ae,{class:"w-3.5 h-3.5"}),a(G);var L=i(G,2);L.__click=ye;var oe=s(L);K(oe,{class:"w-3.5 h-3.5"}),a(L),le(C,()=>r(j),w=>d(j,w)),g(S,z)},Ye=S=>{var z=Pt(),C=X(z),G=s(C),ae=s(G,!0);a(G);var L=i(G,2),oe=s(L);a(L),a(C);var w=i(C,2);w.__click=()=>Re(r(c).id,r(c).displayName);var Ze=s(w);gt(Ze,{class:"w-3.5 h-3.5"}),a(w);var et=i(w,2);{var tt=se=>{var H=wt();H.__click=()=>Me(r(c).id,r(e).id);var rt=s(H);K(rt,{class:"w-3.5 h-3.5"}),a(H),g(se,H)};F(et,se=>{r(c).groups.length>1&&se(tt)})}O(()=>{N(ae,r(c).displayName),N(oe,`${r(c).owner??""}/${r(c).repo??""}`)}),g(S,z)};F(re,S=>{r(B)===r(c).id?S(We):S(Ye,!1)})}a(x),O(()=>$e(x,1,`group flex items-center gap-2 px-2 py-1.5 bg-gray-700/50 hover:bg-gray-700 rounded cursor-move transition-colors ${r(J)===r(c).id?"opacity-50":""}`)),E("dragstart",x,S=>_e(S,r(c).id)),E("dragend",x,xe),g(m,x)},m=>{var c=kt(),x=s(c);ct(x,{class:"w-5 h-5 mr-2 opacity-50"}),Te(),a(c),g(m,c)}),a(Ge),a(n),O(()=>{$e(n,1,`bg-gray-800 rounded-lg overflow-hidden transition-all ${r(M)===r(e).id?"ring-2 ring-blue-500":""}`),nt(n,"aria-label",`Drop zone for ${r(e).name??""}`),it(u,`border-left: 3px solid ${r(e).color??""}`),N($,r(e).name),N(te,`(${r(o).length??""})`)}),E("dragover",n,m=>Fe(m,r(e).id)),E("dragleave",n,Je),E("drop",n,m=>Le(m,r(e).id)),g(t,n)}),a(ee);var De=i(ee,2),Se=i(s(De),2),Ce=s(Se);ne(Ce,21,()=>v,Ie,(t,e)=>{var o=St(),n=s(o),u=s(n,!0);a(n);var b=i(n,2),f=s(b);a(b),a(o),O(()=>{N(u,r(e).displayName),N(f,`(${r(e).groups.length??""})`)}),E("dragstart",o,$=>_e($,r(e).id)),E("dragend",o,xe),g(t,o)}),a(Ce),a(Se),a(De),a(V),g(T,V),U()}st(["click","keydown"]);export{Xt as component};
