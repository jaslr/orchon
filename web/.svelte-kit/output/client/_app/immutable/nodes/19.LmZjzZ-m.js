import"../chunks/DsnmJJEf.js";import{p as N,d as O,k as re,l as T,c as m,o as se,s as te,a as It,u as jt,b as u,f as x,t as C,h as Ct,i as t,j as s,g as r,$ as St,r as e,n as P,e as S}from"../chunks/VB45bhtT.js";import{s as d}from"../chunks/CgppWemH.js";import{i as M}from"../chunks/CuIfUMuc.js";import{e as ze,s as ae}from"../chunks/oRfbssuc.js";import{c as $t}from"../chunks/B2L2jHYA.js";import{h as Pt}from"../chunks/B2E4lz1E.js";import{I as ne,s as Mt}from"../chunks/Dnptkdu8.js";import{d as Nt}from"../chunks/D3xLfT3q.js";import{A as Ot}from"../chunks/37IVKOY9.js";import{S as Be}from"../chunks/V5_CAiUR.js";import{B as He}from"../chunks/Dpfv_2u9.js";import{s as oe}from"../chunks/CNKuqfku.js";import{s as ie,r as le}from"../chunks/Vb7vi_9G.js";import{R as Tt}from"../chunks/CvOgw8TE.js";import{S as Et}from"../chunks/DGg81-t1.js";import{E as Je}from"../chunks/C0Iw7LoP.js";import{G as Gt}from"../chunks/zO2eeF-k.js";function Ve(h,o){N(o,!0);let i=le(o,["$$slots","$$events","$$legacy"]);const p=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"}],["path",{d:"M10 12h4"}]];ne(h,ie({name:"archive"},()=>i,{get iconNode(){return p},children:(c,y)=>{var g=re(),b=T(g);oe(b,()=>o.children??se),m(c,g)},$$slots:{default:!0}})),O()}function Fe(h,o){N(o,!0);let i=le(o,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2"}],["path",{d:"M6.453 15h11.094"}],["path",{d:"M8.5 2h7"}]];ne(h,ie({name:"flask-conical"},()=>i,{get iconNode(){return p},children:(c,y)=>{var g=re(),b=T(g);oe(b,()=>o.children??se),m(c,g)},$$slots:{default:!0}})),O()}function We(h,o){N(o,!0);let i=le(o,["$$slots","$$events","$$legacy"]);const p=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z"}]];ne(h,ie({name:"wrench"},()=>i,{get iconNode(){return p},children:(c,y)=>{var g=re(),b=T(g);oe(b,()=>o.children??se),m(c,g)},$$slots:{default:!0}})),O()}var At=x('<span class="text-sm text-emerald-400"> </span>'),Dt=x('<button class="px-3 py-1.5 text-sm bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors flex items-center gap-2"><!> Reset</button> <button class="px-4 py-1.5 text-sm bg-emerald-600 hover:bg-emerald-500 rounded-lg transition-colors flex items-center gap-2 font-medium"><!> Save Changes</button>',1),Rt=x('<span class="px-1.5 py-0.5 text-[10px] bg-amber-500/20 text-amber-400 rounded">modified</span>'),zt=x('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-blue-400 hover:text-blue-300 truncate group"><!> <span class="truncate"> </span> <!></a>'),Bt=x('<span class="text-gray-600">No custom domain</span>'),Ht=x('<div><button><span></span></button> <div class="flex-1 min-w-0"><div class="flex items-center gap-2"><span class="font-medium text-sm truncate"> </span> <!></div> <div class="text-xs text-gray-500 font-mono truncate"> </div></div> <div class="w-64 text-sm"><!></div> <div class="flex items-center gap-2"><button class="p-2 hover:bg-gray-700 rounded-lg transition-colors text-gray-400 hover:text-white" title="Open GCP Console"><!></button></div></div>'),Jt=x('<div class="bg-gray-900 rounded-xl border border-gray-800 overflow-hidden"><div class="px-4 py-3 bg-gray-800/50 border-b border-gray-800 flex items-center justify-between"><div class="flex items-center gap-3"><!> <span class="font-medium"> </span> <span class="text-sm text-gray-500"> </span></div> <div class="flex items-center gap-2"><button class="px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded transition-colors">Enable All</button> <button class="px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded transition-colors">Disable All</button></div></div> <div class="divide-y divide-gray-800"></div></div>'),Vt=x(`<div class="min-h-screen bg-gray-950 text-gray-100"><div class="sticky top-0 z-10 bg-gray-900/95 backdrop-blur-sm border-b border-gray-800"><div class="max-w-6xl mx-auto px-4 py-3"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><a href="/infrastructure/map" class="p-2 hover:bg-gray-800 rounded-lg transition-colors"><!></a> <div><h1 class="text-lg font-semibold">Infrastructure Settings</h1> <p class="text-xs text-gray-500">Manage GCP projects visibility in the infrastructure map</p></div></div> <div class="flex items-center gap-3"><!> <!></div></div></div></div> <div class="bg-gray-900/50 border-b border-gray-800"><div class="max-w-6xl mx-auto px-4 py-3"><div class="flex items-center gap-6 text-sm"><div class="flex items-center gap-2"><span class="text-gray-500">Total:</span> <span class="font-medium"> </span></div> <div class="flex items-center gap-2"><span class="text-gray-500">Enabled:</span> <span class="font-medium text-emerald-400"> </span></div> <div class="w-px h-4 bg-gray-700"></div> <div class="flex items-center gap-1.5"><!> <span class="text-gray-400"> </span></div> <div class="flex items-center gap-1.5"><!> <span class="text-gray-400"> </span></div> <div class="flex items-center gap-1.5"><!> <span class="text-gray-400"> </span></div> <div class="flex items-center gap-1.5"><!> <span class="text-gray-400"> </span></div> <div class="flex items-center gap-1.5"><!> <span class="text-gray-400"> </span></div></div></div></div> <div class="max-w-6xl mx-auto px-4 py-6 space-y-6"><!> <div class="bg-gray-900/50 rounded-xl border border-gray-800 p-4"><h3 class="font-medium mb-2">How this works</h3> <ul class="text-sm text-gray-400 space-y-1"><li>Toggle projects to show/hide them in the Infrastructure Map's Ownership view</li> <li>Changes are saved to your browser's localStorage</li> <li>Click the external link icon to open the project in GCP Console</li> <li>Projects marked "Old / Deprecated" are safe to delete from GCP if unused</li></ul></div></div></div>`);function la(h,o){N(o,!0);let i=te(It({})),p=te(!1),c=te(null);jt(()=>{if(typeof window<"u"){const a=localStorage.getItem("gcp-project-overrides");if(a)try{u(i,JSON.parse(a),!0)}catch{u(i,{},!0)}}});function y(a,n){return a in r(i)?r(i)[a]:n}function g(a,n){const v=y(a,n);r(i)[a]=!v,u(p,!0)}function b(){typeof window<"u"&&(localStorage.setItem("gcp-project-overrides",JSON.stringify(r(i))),u(p,!1),u(c,"Changes saved! Refresh the Infrastructure Map to see updates."),setTimeout(()=>u(c,null),5e3))}function qe(){u(i,{},!0),typeof window<"u"&&localStorage.removeItem("gcp-project-overrides"),u(p,!1),u(c,"Reset to config defaults."),setTimeout(()=>u(c,null),3e3)}function Ke(a){return a.filter(n=>y(n.projectId,n.enabled)).length}function de(a,n){for(const v of a)r(i)[v.projectId]=n;u(p,!0)}function Le(a){switch(a){case"campus":return Be;case"org-portal":return He;case"testing":return Fe;case"infrastructure":return We;default:return Ve}}function Qe(a){switch(a){case"campus":return"text-blue-400";case"org-portal":return"text-emerald-400";case"testing":return"text-amber-400";case"infrastructure":return"text-purple-400";default:return"text-gray-500"}}function Ue(a){window.open(`https://console.cloud.google.com/home/dashboard?project=${a}`,"_blank")}var E=Vt();Pt("17crefa",a=>{Ct(()=>{St.title="Infrastructure Settings | Orchon"})});var G=t(E),ce=t(G),ve=t(ce),A=t(ve),pe=t(A),Xe=t(pe);Ot(Xe,{class:"w-5 h-5"}),e(pe),P(2),e(A);var ue=s(A,2),me=t(ue);{var Ye=a=>{var n=At(),v=t(n,!0);e(n),C(()=>d(v,r(c))),m(a,n)};M(me,a=>{r(c)&&a(Ye)})}var Ze=s(me,2);{var et=a=>{var n=Dt(),v=T(n);v.__click=qe;var F=t(v);Tt(F,{class:"w-4 h-4"}),P(),e(v);var w=s(v,2);w.__click=b;var k=t(w);Et(k,{class:"w-4 h-4"}),P(),e(w),m(a,n)};M(Ze,a=>{r(p)&&a(et)})}e(ue),e(ve),e(ce),e(G);var D=s(G,2),ge=t(D),fe=t(ge),R=t(fe),_e=s(t(R),2),tt=t(_e,!0);e(_e),e(R);var z=s(R,2),xe=s(t(z),2),at=t(xe,!0);e(xe),e(z);var B=s(z,4),he=t(B);Be(he,{class:"w-3.5 h-3.5 text-blue-400"});var be=s(he,2),rt=t(be,!0);e(be),e(B);var H=s(B,2),ye=t(H);He(ye,{class:"w-3.5 h-3.5 text-emerald-400"});var we=s(ye,2),st=t(we,!0);e(we),e(H);var J=s(H,2),ke=t(J);Fe(ke,{class:"w-3.5 h-3.5 text-amber-400"});var Ie=s(ke,2),nt=t(Ie,!0);e(Ie),e(J);var V=s(J,2),je=t(V);We(je,{class:"w-3.5 h-3.5 text-purple-400"});var Ce=s(je,2),ot=t(Ce,!0);e(Ce),e(V);var Se=s(V,2),$e=t(Se);Ve($e,{class:"w-3.5 h-3.5 text-gray-500"});var Pe=s($e,2),it=t(Pe,!0);e(Pe),e(Se),e(fe),e(ge),e(D);var Me=s(D,2),lt=t(Me);ze(lt,17,()=>o.data.groupedProjects,a=>a.type,(a,n)=>{const v=S(()=>Le(r(n).type)),F=S(()=>Qe(r(n).type)),w=S(()=>Ke(r(n).projects));var k=Jt(),W=t(k),q=t(W),Ne=t(q);$t(Ne,()=>r(v),(I,l)=>{l(I,{get class(){return`w-5 h-5 ${r(F)??""}`}})});var K=s(Ne,2),dt=t(K,!0);e(K);var Oe=s(K,2),ct=t(Oe);e(Oe),e(q);var Te=s(q,2),Ee=t(Te);Ee.__click=()=>de(r(n).projects,!0);var vt=s(Ee,2);vt.__click=()=>de(r(n).projects,!1),e(Te),e(W);var Ge=s(W,2);ze(Ge,21,()=>r(n).projects,I=>I.projectId,(I,l)=>{const L=S(()=>y(r(l).projectId,r(l).enabled)),pt=S(()=>r(l).projectId in r(i));var $=Ht(),j=t($);j.__click=()=>g(r(l).projectId,r(l).enabled);var ut=t(j);e(j);var Q=s(j,2),U=t(Q),X=t(U),mt=t(X,!0);e(X);var gt=s(X,2);{var ft=f=>{var _=Rt();m(f,_)};M(gt,f=>{r(pt)&&f(ft)})}e(U);var Ae=s(U,2),_t=t(Ae,!0);e(Ae),e(Q);var Y=s(Q,2),xt=t(Y);{var ht=f=>{var _=zt(),Re=t(_);Gt(Re,{class:"w-3.5 h-3.5 shrink-0"});var ee=s(Re,2),wt=t(ee,!0);e(ee);var kt=s(ee,2);Je(kt,{class:"w-3 h-3 shrink-0 opacity-0 group-hover:opacity-100"}),e(_),C(()=>{Mt(_,"href",`https://${r(l).customDomain??""}`),d(wt,r(l).customDomain)}),m(f,_)},bt=f=>{var _=Bt();m(f,_)};M(xt,f=>{r(l).customDomain?f(ht):f(bt,!1)})}e(Y);var De=s(Y,2),Z=t(De);Z.__click=()=>Ue(r(l).projectId);var yt=t(Z);Je(yt,{class:"w-4 h-4"}),e(Z),e(De),e($),C(()=>{ae($,1,`px-4 py-3 flex items-center gap-4 hover:bg-gray-800/30 transition-colors ${r(L)?"":"opacity-50"}`),ae(j,1,`w-10 h-6 rounded-full transition-colors relative ${r(L)?"bg-emerald-600":"bg-gray-700"}`),ae(ut,1,`absolute top-1 w-4 h-4 rounded-full bg-white transition-all ${r(L)?"left-5":"left-1"}`),d(mt,r(l).displayName),d(_t,r(l).projectId)}),m(I,$)}),e(Ge),e(k),C(()=>{d(dt,r(n).displayType),d(ct,`(${r(w)??""}/${r(n).projects.length??""} enabled)`)}),m(a,k)}),P(2),e(Me),e(E),C(a=>{d(tt,o.data.stats.total),d(at,a),d(rt,o.data.stats.campuses),d(st,o.data.stats.orgPortals),d(nt,o.data.stats.testing),d(ot,o.data.stats.infrastructure),d(it,o.data.stats.other)},[()=>Object.values(r(i)).filter(a=>a).length+o.data.projects.filter(a=>!(a.projectId in r(i))&&a.enabled).length]),m(h,E),O()}Nt(["click"]);export{la as component};
