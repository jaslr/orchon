import"../chunks/DsnmJJEf.js";import{p as Qt,c as St,b as jt,n as _e,a as I,d as Zt,as as At,O as w,Q as D,P as m,N as K,K as t,an as F,ac as R,ao as ft,ab as Kt,f as nt,am as Ft,at as Se,G as Wt,j as Ae,ap as De}from"../chunks/CkbQ0fmx.js";import{s as be,d as ie,a as dt,e as Ht,r as Ce}from"../chunks/DoutiFXv.js";import{i as et}from"../chunks/2F6J5UoK.js";import{I as we,e as kt,s as A,i as zt,a as yt,h as ne}from"../chunks/mpq541RX.js";import{c as ce}from"../chunks/CUrudJvY.js";import{h as Ie}from"../chunks/DXjPty3v.js";import{p as $e}from"../chunks/BX5ABeLh.js";import{b as ze,c as Ee,C as Re,A as ue,S as fe,a as Le,M as Oe,G as de,H as Te,I as Ge}from"../chunks/C1pnOiYD.js";import{o as Fe,a as He}from"../chunks/ZnW9umad.js";import{b as Be}from"../chunks/Dzl4k0mm.js";import{R as ve}from"../chunks/D8wHWX2U.js";import{t as Xe,d as Ue}from"../chunks/DWAvo6M8.js";import{E as Ye}from"../chunks/6Ay1lpaz.js";import{A as Je}from"../chunks/BNCkX0gk.js";import{s as Ne,r as ke}from"../chunks/BA5TQFIO.js";import{C as ge}from"../chunks/B2wd7ytj.js";import{S as ae}from"../chunks/Cyn51Uu8.js";import{T as he,D as ee}from"../chunks/DYOf4VSx.js";import{G as pe}from"../chunks/Bt3tuVPd.js";import{C as Gt}from"../chunks/ccRZTSYy.js";function Ve(e,r){Qt(r,!0);let a=ke(r,["$$slots","$$events","$$legacy"]);const u=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];we(e,Ne({name:"layout-grid"},()=>a,{get iconNode(){return u},children:(c,o)=>{var f=St(),n=jt(f);be(n,()=>r.children??_e),I(c,f)},$$slots:{default:!0}})),Zt()}function We(e,r){Qt(r,!0);let a=ke(r,["$$slots","$$events","$$legacy"]);const u=[["path",{d:"M3 5h.01"}],["path",{d:"M3 12h.01"}],["path",{d:"M3 19h.01"}],["path",{d:"M8 5h13"}],["path",{d:"M8 12h13"}],["path",{d:"M8 19h13"}]];we(e,Ne({name:"list"},()=>a,{get iconNode(){return u},children:(c,o)=>{var f=St(),n=jt(f);be(n,()=>r.children??_e),I(c,f)},$$slots:{default:!0}})),Zt()}var Ke=At('<radialGradient cx="30%" cy="30%"><stop offset="0%" stop-opacity="0.9"></stop><stop offset="100%" stop-opacity="0.4"></stop></radialGradient>'),Qe=At('<path fill="none" class="transition-all duration-150"></path>'),Ze=At('<g class="cursor-pointer" role="listitem"><circle cx="0" cy="0" r="2" stroke-width="0.5" class="transition-all duration-150"></circle><text x="-6" y="1.5" text-anchor="end"> </text></g>'),qe=At('<circle cx="0" cy="0" fill="none" stroke-width="0.3" opacity="0.4"></circle>'),tr=At('<image preserveAspectRatio="xMidYMid meet"></image>'),er=At('<text x="0" y="1.5" text-anchor="middle" class="text-[3px] fill-white font-bold"> </text>'),rr=At('<g><circle cx="0" cy="0" r="1.5" fill="#ef4444"></circle><text x="0" y="1" text-anchor="middle" class="text-[2px] fill-white font-bold">!</text></g>'),ar=At('<g class="cursor-pointer" role="button" tabindex="0"><circle cx="0" cy="0" class="transition-all duration-150"></circle><!><!><text y="-1" text-anchor="start"> </text><text y="3" text-anchor="start" class="text-[2.5px] font-medium"> </text><!></g>'),nr=At('<svg class="w-full h-full"><defs></defs><text y="18" text-anchor="middle" class="text-[3px] fill-gray-500 uppercase tracking-wider font-semibold">Projects</text><text y="18" text-anchor="middle" class="text-[3px] fill-gray-500 uppercase tracking-wider font-semibold">Providers</text><!><!><!><g><text x="0" y="0" class="text-[2.5px] fill-gray-500 uppercase tracking-wider">Vendor Risk</text><g transform="translate(0, 5)"><circle cx="2" cy="0" r="1.5" fill="#4b5563"></circle><text x="6" y="1" class="text-[2.5px] fill-gray-400">Low</text></g><g transform="translate(22, 5)"><circle cx="2.5" cy="0" r="2.5" fill="#6b7280"></circle><text x="7" y="1" class="text-[2.5px] fill-gray-400">Med</text></g><g transform="translate(45, 5)"><circle cx="3.5" cy="0" r="3.5" fill="#9ca3af"></circle><circle cx="0.5" cy="-2.5" r="1.5" fill="#ef4444"></circle><text x="0" y="-1.5" class="text-[2px] fill-white font-bold">!</text><text x="9" y="1" class="text-[2.5px] fill-gray-400">High (50%+)</text></g></g></svg>');function ir(e,r){Qt(r,!0);let a=F(()=>{const i=new Map;for(const l of r.projects)i.set(l.id,new Set);for(const l of r.categories)for(const k of l.providers)for(const $ of k.projects)i.get($.id)?.add(k.provider);return i}),u=F(()=>{const i=new Map;for(const l of r.categories)for(const k of l.providers){const $=i.get(k.provider);if($){$.categories.includes(l.category)||$.categories.push(l.category);for(const T of k.projects)$.projectIds.has(T.id)||($.projectIds.add(T.id),$.projects.push(T));$.inDegree=$.projects.length}else i.set(k.provider,{provider:k.provider,categories:[l.category],inDegree:k.projects.length,projectIds:new Set(k.projects.map(T=>T.id)),projects:[...k.projects]})}return Array.from(i.values()).sort((l,k)=>k.inDegree-l.inDegree)}),c=F(()=>Math.max(...t(u).map(i=>i.inDegree),1));const f=20+100,n=450,v=40,s=22,b=38,M=2,_=5,h={hosting:"#f97316",database:"#22c55e",auth:"#eab308",storage:"#ec4899",ci:"#6b7280",monitoring:"#ef4444",dns:"#06b6d4",email:"#8b5cf6",analytics:"#3b82f6",cdn:"#14b8a6",secrets:"#a855f7"},S={cloudflare:"Cloudflare",flyio:"Fly.io",supabase:"Supabase",github:"GitHub",sentry:"Sentry",aws:"AWS",vercel:"Vercel",netlify:"Netlify",google:"Google",gcp:"GCP"};let g=F(()=>{const i=new Map;let l=v;for(const k of r.projects)i.set(k.id,{x:f,y:l}),l+=s;return i}),d=F(()=>{const i=new Map;let l=v;for(const k of t(u))i.set(k.provider,{x:n,y:l,categories:k.categories,inDegree:k.inDegree}),l+=b;return i});function x(i){const l=i/t(c);return M+(_-M)*l}function N(i){return .4+.6*(i/t(c))}let E=F(()=>{const i=r.projects.length*s+v+50,l=t(u).length*b+v+50;return Math.max(i,l,300)});function P(i){return S[i]||i}function B(i){return h[i]||"#6b7280"}function lt(i){return["cloudflare","flyio","supabase","github","sentry","vercel","netlify"].includes(i)?`/api/logos/infra/${i}.svg`:null}let U=ft(null),O=ft(null);function gt(i,l){return!!(r.selectedProvider===l||t(O)===l||t(U)===i&&(t(a).get(i)?.has(l)??!1))}function rt(i,l){return!r.selectedProvider&&!t(U)&&!t(O)?!1:r.selectedProvider?l!==r.selectedProvider:t(O)?l!==t(O):t(U)?!(t(a).get(t(U))?.has(l)??!1):!1}function ht(i){return!!(t(U)===i||t(O)&&(t(a).get(i)?.has(t(O))??!1)||r.selectedProvider&&(t(a).get(i)?.has(r.selectedProvider)??!1))}function pt(i){return!!(r.selectedProvider&&!(t(a).get(i)?.has(r.selectedProvider)??!1)||t(O)&&!(t(a).get(i)?.has(t(O))??!1))}function xt(i){return!!(t(O)===i||r.selectedProvider===i||t(U)&&(t(a).get(t(U))?.has(i)??!1))}function $t(i){return!!(r.selectedProvider&&r.selectedProvider!==i||t(O)&&t(O)!==i||t(U)&&!(t(a).get(t(U))?.has(i)??!1))}function Dt(i,l){const k=t(g).get(i),$=t(d).get(l);if(!k||!$)return"";const T=k.x+3,G=k.y,tt=$.x-x($.inDegree)-1,W=$.y,ot=(T+tt)/2;return`M ${T} ${G} C ${ot} ${G}, ${ot} ${W}, ${tt} ${W}`}function Ct(i){return i[0]||"hosting"}var Pt=nr(),Et=w(Pt);kt(Et,21,()=>t(u),zt,(i,l)=>{const k=F(()=>B(Ct(t(l).categories)));var $=Ke(),T=w($),G=D(T);m($),K(()=>{A($,"id",`grad-${t(l).provider??""}`),A(T,"stop-color",t(k)),A(G,"stop-color",t(k))}),I(i,$)}),m(Et);var Tt=D(Et);A(Tt,"x",f);var Bt=D(Tt);A(Bt,"x",n);var Rt=D(Bt);kt(Rt,17,()=>r.projects,zt,(i,l)=>{const k=F(()=>t(a).get(t(l).id));var $=St(),T=jt($);{var G=tt=>{var W=St(),ot=jt(W);kt(ot,17,()=>[...t(k)],zt,(p,y)=>{const j=F(()=>t(d).get(t(y))),C=F(()=>gt(t(l).id,t(y))),L=F(()=>rt(t(l).id,t(y)));var X=St(),H=jt(X);{var J=Z=>{var z=Qe();K((Q,vt)=>{A(z,"d",Q),A(z,"stroke",vt),A(z,"stroke-width",t(C)?.5:.25),A(z,"opacity",t(L)?.08:t(C)?.9:.25)},[()=>Dt(t(l).id,t(y)),()=>t(C)?B(Ct(t(j).categories)):"#374151"]),I(Z,z)};et(H,Z=>{t(j)&&Z(J)})}I(p,X)}),I(tt,W)};et(T,tt=>{t(k)&&tt(G)})}I(i,$)});var It=D(Rt);kt(It,17,()=>r.projects,zt,(i,l)=>{const k=F(()=>t(g).get(t(l).id)),$=F(()=>ht(t(l).id)),T=F(()=>pt(t(l).id));var G=St(),tt=jt(G);{var W=ot=>{var p=Ze(),y=w(p),j=D(y),C=w(j,!0);m(j),m(p),K(L=>{A(p,"transform",`translate(${t(k).x??""}, ${t(k).y??""})`),A(p,"opacity",t(T)?.15:1),A(y,"fill",t($)?"#3b82f6":"#4b5563"),A(y,"stroke",t($)?"#60a5fa":"transparent"),yt(j,0,`text-[3px] ${t($)?"fill-white font-medium":"fill-gray-400"} transition-colors`),dt(C,L)},[()=>t(l).displayName.length>18?t(l).displayName.slice(0,17)+"..":t(l).displayName]),Ht("mouseenter",p,()=>R(U,t(l).id,!0)),Ht("mouseleave",p,()=>R(U,null)),I(ot,p)};et(tt,ot=>{t(k)&&ot(W)})}I(i,G)});var Xt=D(It);kt(Xt,17,()=>t(u),zt,(i,l)=>{const k=F(()=>t(d).get(t(l).provider)),$=F(()=>xt(t(l).provider)),T=F(()=>$t(t(l).provider)),G=F(()=>x(t(l).inDegree)),tt=F(()=>N(t(l).inDegree)),W=F(()=>lt(t(l).provider));var ot=St(),p=jt(ot);{var y=j=>{var C=ar();C.__click=()=>r.onProviderClick(t(l).provider),C.__keydown=Y=>Y.key==="Enter"&&r.onProviderClick(t(l).provider);var L=w(C),X=D(L);{var H=Y=>{var V=qe();K(it=>{A(V,"r",t(G)-1),A(V,"stroke",it)},[()=>B(Ct(t(l).categories))]),I(Y,V)};et(X,Y=>{t(l).inDegree>t(c)*.5&&Y(H)})}var J=D(X);{var Z=Y=>{var V=tr();K(()=>{A(V,"x",-t(G)*.55),A(V,"y",-t(G)*.55),A(V,"width",t(G)*1.1),A(V,"height",t(G)*1.1),A(V,"href",t(W))}),I(Y,V)},z=Y=>{var V=er(),it=w(V,!0);m(V),K(Mt=>dt(it,Mt),[()=>t(l).provider.charAt(0).toUpperCase()]),I(Y,V)};et(J,Y=>{t(W)?Y(Z):Y(z,!1)})}var Q=D(J),vt=w(Q,!0);m(Q);var ct=D(Q),ut=w(ct);m(ct);var q=D(ct);{var wt=Y=>{var V=rr();K(()=>A(V,"transform",`translate(${-t(G)-2}, ${-t(G)+1})`)),I(Y,V)};et(q,Y=>{t(l).inDegree>=Math.ceil(r.projects.length*.5)&&Y(wt)})}m(C),K((Y,V,it)=>{A(C,"transform",`translate(${t(k).x??""}, ${t(k).y??""})`),A(C,"opacity",t(T)?.15:1),A(L,"r",t(G)),A(L,"fill",`url(#grad-${t(l).provider??""})`),A(L,"stroke",Y),A(L,"stroke-width",t($)?.75:.5),A(L,"opacity",t(tt)),A(Q,"x",t(G)+3),yt(Q,0,`text-[3px] ${t($)?"fill-white font-medium":"fill-gray-300"} transition-colors`),dt(vt,V),A(ct,"x",t(G)+3),A(ct,"fill",it),dt(ut,`${t(l).inDegree??""} ${t(l).inDegree===1?"project":"projects"}`)},[()=>t($)?B(Ct(t(l).categories)):"#374151",()=>P(t(l).provider),()=>B(Ct(t(l).categories))]),Ht("mouseenter",C,()=>R(O,t(l).provider,!0)),Ht("mouseleave",C,()=>R(O,null)),I(j,C)};et(p,j=>{t(k)&&j(y)})}I(i,ot)});var Yt=D(Xt);m(Pt),K(i=>{A(Pt,"viewBox",`0 0 600 ${t(E)??""}`),ne(Pt,`min-height: ${i??""}px;`),A(Yt,"transform",`translate(20, ${t(E)-15})`)},[()=>Math.min(t(E),450)]),I(e,Pt),Zt()}ie(["click","keydown"]);function or(e,r){var a,u=1;e==null&&(e=0),r==null&&(r=0);function c(){var o,f=a.length,n,v=0,s=0;for(o=0;o<f;++o)n=a[o],v+=n.x,s+=n.y;for(v=(v/f-e)*u,s=(s/f-r)*u,o=0;o<f;++o)n=a[o],n.x-=v,n.y-=s}return c.initialize=function(o){a=o},c.x=function(o){return arguments.length?(e=+o,c):e},c.y=function(o){return arguments.length?(r=+o,c):r},c.strength=function(o){return arguments.length?(u=+o,c):u},c}function sr(e){const r=+this._x.call(null,e),a=+this._y.call(null,e);return je(this.cover(r,a),r,a,e)}function je(e,r,a,u){if(isNaN(r)||isNaN(a))return e;var c,o=e._root,f={data:u},n=e._x0,v=e._y0,s=e._x1,b=e._y1,M,_,h,S,g,d,x,N;if(!o)return e._root=f,e;for(;o.length;)if((g=r>=(M=(n+s)/2))?n=M:s=M,(d=a>=(_=(v+b)/2))?v=_:b=_,c=o,!(o=o[x=d<<1|g]))return c[x]=f,e;if(h=+e._x.call(null,o.data),S=+e._y.call(null,o.data),r===h&&a===S)return f.next=o,c?c[x]=f:e._root=f,e;do c=c?c[x]=new Array(4):e._root=new Array(4),(g=r>=(M=(n+s)/2))?n=M:s=M,(d=a>=(_=(v+b)/2))?v=_:b=_;while((x=d<<1|g)===(N=(S>=_)<<1|h>=M));return c[N]=o,c[x]=f,e}function lr(e){var r,a,u=e.length,c,o,f=new Array(u),n=new Array(u),v=1/0,s=1/0,b=-1/0,M=-1/0;for(a=0;a<u;++a)isNaN(c=+this._x.call(null,r=e[a]))||isNaN(o=+this._y.call(null,r))||(f[a]=c,n[a]=o,c<v&&(v=c),c>b&&(b=c),o<s&&(s=o),o>M&&(M=o));if(v>b||s>M)return this;for(this.cover(v,s).cover(b,M),a=0;a<u;++a)je(this,f[a],n[a],e[a]);return this}function cr(e,r){if(isNaN(e=+e)||isNaN(r=+r))return this;var a=this._x0,u=this._y0,c=this._x1,o=this._y1;if(isNaN(a))c=(a=Math.floor(e))+1,o=(u=Math.floor(r))+1;else{for(var f=c-a||1,n=this._root,v,s;a>e||e>=c||u>r||r>=o;)switch(s=(r<u)<<1|e<a,v=new Array(4),v[s]=n,n=v,f*=2,s){case 0:c=a+f,o=u+f;break;case 1:a=c-f,o=u+f;break;case 2:c=a+f,u=o-f;break;case 3:a=c-f,u=o-f;break}this._root&&this._root.length&&(this._root=n)}return this._x0=a,this._y0=u,this._x1=c,this._y1=o,this}function ur(){var e=[];return this.visit(function(r){if(!r.length)do e.push(r.data);while(r=r.next)}),e}function fr(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function mt(e,r,a,u,c){this.node=e,this.x0=r,this.y0=a,this.x1=u,this.y1=c}function dr(e,r,a){var u,c=this._x0,o=this._y0,f,n,v,s,b=this._x1,M=this._y1,_=[],h=this._root,S,g;for(h&&_.push(new mt(h,c,o,b,M)),a==null?a=1/0:(c=e-a,o=r-a,b=e+a,M=r+a,a*=a);S=_.pop();)if(!(!(h=S.node)||(f=S.x0)>b||(n=S.y0)>M||(v=S.x1)<c||(s=S.y1)<o))if(h.length){var d=(f+v)/2,x=(n+s)/2;_.push(new mt(h[3],d,x,v,s),new mt(h[2],f,x,d,s),new mt(h[1],d,n,v,x),new mt(h[0],f,n,d,x)),(g=(r>=x)<<1|e>=d)&&(S=_[_.length-1],_[_.length-1]=_[_.length-1-g],_[_.length-1-g]=S)}else{var N=e-+this._x.call(null,h.data),E=r-+this._y.call(null,h.data),P=N*N+E*E;if(P<a){var B=Math.sqrt(a=P);c=e-B,o=r-B,b=e+B,M=r+B,u=h.data}}return u}function vr(e){if(isNaN(b=+this._x.call(null,e))||isNaN(M=+this._y.call(null,e)))return this;var r,a=this._root,u,c,o,f=this._x0,n=this._y0,v=this._x1,s=this._y1,b,M,_,h,S,g,d,x;if(!a)return this;if(a.length)for(;;){if((S=b>=(_=(f+v)/2))?f=_:v=_,(g=M>=(h=(n+s)/2))?n=h:s=h,r=a,!(a=a[d=g<<1|S]))return this;if(!a.length)break;(r[d+1&3]||r[d+2&3]||r[d+3&3])&&(u=r,x=d)}for(;a.data!==e;)if(c=a,!(a=a.next))return this;return(o=a.next)&&delete a.next,c?(o?c.next=o:delete c.next,this):r?(o?r[d]=o:delete r[d],(a=r[0]||r[1]||r[2]||r[3])&&a===(r[3]||r[2]||r[1]||r[0])&&!a.length&&(u?u[x]=a:this._root=a),this):(this._root=o,this)}function gr(e){for(var r=0,a=e.length;r<a;++r)this.remove(e[r]);return this}function hr(){return this._root}function pr(){var e=0;return this.visit(function(r){if(!r.length)do++e;while(r=r.next)}),e}function xr(e){var r=[],a,u=this._root,c,o,f,n,v;for(u&&r.push(new mt(u,this._x0,this._y0,this._x1,this._y1));a=r.pop();)if(!e(u=a.node,o=a.x0,f=a.y0,n=a.x1,v=a.y1)&&u.length){var s=(o+n)/2,b=(f+v)/2;(c=u[3])&&r.push(new mt(c,s,b,n,v)),(c=u[2])&&r.push(new mt(c,o,b,s,v)),(c=u[1])&&r.push(new mt(c,s,f,n,b)),(c=u[0])&&r.push(new mt(c,o,f,s,b))}return this}function yr(e){var r=[],a=[],u;for(this._root&&r.push(new mt(this._root,this._x0,this._y0,this._x1,this._y1));u=r.pop();){var c=u.node;if(c.length){var o,f=u.x0,n=u.y0,v=u.x1,s=u.y1,b=(f+v)/2,M=(n+s)/2;(o=c[0])&&r.push(new mt(o,f,n,b,M)),(o=c[1])&&r.push(new mt(o,b,n,v,M)),(o=c[2])&&r.push(new mt(o,f,M,b,s)),(o=c[3])&&r.push(new mt(o,b,M,v,s))}a.push(u)}for(;u=a.pop();)e(u.node,u.x0,u.y0,u.x1,u.y1);return this}function mr(e){return e[0]}function _r(e){return arguments.length?(this._x=e,this):this._x}function br(e){return e[1]}function wr(e){return arguments.length?(this._y=e,this):this._y}function oe(e,r,a){var u=new se(r??mr,a??br,NaN,NaN,NaN,NaN);return e==null?u:u.addAll(e)}function se(e,r,a,u,c,o){this._x=e,this._y=r,this._x0=a,this._y0=u,this._x1=c,this._y1=o,this._root=void 0}function xe(e){for(var r={data:e.data},a=r;e=e.next;)a=a.next={data:e.data};return r}var bt=oe.prototype=se.prototype;bt.copy=function(){var e=new se(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,a,u;if(!r)return e;if(!r.length)return e._root=xe(r),e;for(a=[{source:r,target:e._root=new Array(4)}];r=a.pop();)for(var c=0;c<4;++c)(u=r.source[c])&&(u.length?a.push({source:u,target:r.target[c]=new Array(4)}):r.target[c]=xe(u));return e};bt.add=sr;bt.addAll=lr;bt.cover=cr;bt.data=ur;bt.extent=fr;bt.find=dr;bt.remove=vr;bt.removeAll=gr;bt.root=hr;bt.size=pr;bt.visit=xr;bt.visitAfter=yr;bt.x=_r;bt.y=wr;function _t(e){return function(){return e}}function Ot(e){return(e()-.5)*1e-6}function Nr(e){return e.x+e.vx}function kr(e){return e.y+e.vy}function jr(e){var r,a,u,c=1,o=1;typeof e!="function"&&(e=_t(e==null?1:+e));function f(){for(var s,b=r.length,M,_,h,S,g,d,x=0;x<o;++x)for(M=oe(r,Nr,kr).visitAfter(n),s=0;s<b;++s)_=r[s],g=a[_.index],d=g*g,h=_.x+_.vx,S=_.y+_.vy,M.visit(N);function N(E,P,B,lt,U){var O=E.data,gt=E.r,rt=g+gt;if(O){if(O.index>_.index){var ht=h-O.x-O.vx,pt=S-O.y-O.vy,xt=ht*ht+pt*pt;xt<rt*rt&&(ht===0&&(ht=Ot(u),xt+=ht*ht),pt===0&&(pt=Ot(u),xt+=pt*pt),xt=(rt-(xt=Math.sqrt(xt)))/xt*c,_.vx+=(ht*=xt)*(rt=(gt*=gt)/(d+gt)),_.vy+=(pt*=xt)*rt,O.vx-=ht*(rt=1-rt),O.vy-=pt*rt)}return}return P>h+rt||lt<h-rt||B>S+rt||U<S-rt}}function n(s){if(s.data)return s.r=a[s.data.index];for(var b=s.r=0;b<4;++b)s[b]&&s[b].r>s.r&&(s.r=s[b].r)}function v(){if(r){var s,b=r.length,M;for(a=new Array(b),s=0;s<b;++s)M=r[s],a[M.index]=+e(M,s,r)}}return f.initialize=function(s,b){r=s,u=b,v()},f.iterations=function(s){return arguments.length?(o=+s,f):o},f.strength=function(s){return arguments.length?(c=+s,f):c},f.radius=function(s){return arguments.length?(e=typeof s=="function"?s:_t(+s),v(),f):e},f}function Pr(e){return e.index}function ye(e,r){var a=e.get(r);if(!a)throw new Error("node not found: "+r);return a}function Mr(e){var r=Pr,a=M,u,c=_t(30),o,f,n,v,s,b=1;e==null&&(e=[]);function M(d){return 1/Math.min(n[d.source.index],n[d.target.index])}function _(d){for(var x=0,N=e.length;x<b;++x)for(var E=0,P,B,lt,U,O,gt,rt;E<N;++E)P=e[E],B=P.source,lt=P.target,U=lt.x+lt.vx-B.x-B.vx||Ot(s),O=lt.y+lt.vy-B.y-B.vy||Ot(s),gt=Math.sqrt(U*U+O*O),gt=(gt-o[E])/gt*d*u[E],U*=gt,O*=gt,lt.vx-=U*(rt=v[E]),lt.vy-=O*rt,B.vx+=U*(rt=1-rt),B.vy+=O*rt}function h(){if(f){var d,x=f.length,N=e.length,E=new Map(f.map((B,lt)=>[r(B,lt,f),B])),P;for(d=0,n=new Array(x);d<N;++d)P=e[d],P.index=d,typeof P.source!="object"&&(P.source=ye(E,P.source)),typeof P.target!="object"&&(P.target=ye(E,P.target)),n[P.source.index]=(n[P.source.index]||0)+1,n[P.target.index]=(n[P.target.index]||0)+1;for(d=0,v=new Array(N);d<N;++d)P=e[d],v[d]=n[P.source.index]/(n[P.source.index]+n[P.target.index]);u=new Array(N),S(),o=new Array(N),g()}}function S(){if(f)for(var d=0,x=e.length;d<x;++d)u[d]=+a(e[d],d,e)}function g(){if(f)for(var d=0,x=e.length;d<x;++d)o[d]=+c(e[d],d,e)}return _.initialize=function(d,x){f=d,s=x,h()},_.links=function(d){return arguments.length?(e=d,h(),_):e},_.id=function(d){return arguments.length?(r=d,_):r},_.iterations=function(d){return arguments.length?(b=+d,_):b},_.strength=function(d){return arguments.length?(a=typeof d=="function"?d:_t(+d),S(),_):a},_.distance=function(d){return arguments.length?(c=typeof d=="function"?d:_t(+d),g(),_):c},_}const Sr=1664525,Ar=1013904223,me=4294967296;function Dr(){let e=1;return()=>(e=(Sr*e+Ar)%me)/me}function Cr(e){return e.x}function Ir(e){return e.y}var $r=10,zr=Math.PI*(3-Math.sqrt(5));function Er(e){var r,a=1,u=.001,c=1-Math.pow(u,1/300),o=0,f=.6,n=new Map,v=Xe(M),s=Ue("tick","end"),b=Dr();e==null&&(e=[]);function M(){_(),s.call("tick",r),a<u&&(v.stop(),s.call("end",r))}function _(g){var d,x=e.length,N;g===void 0&&(g=1);for(var E=0;E<g;++E)for(a+=(o-a)*c,n.forEach(function(P){P(a)}),d=0;d<x;++d)N=e[d],N.fx==null?N.x+=N.vx*=f:(N.x=N.fx,N.vx=0),N.fy==null?N.y+=N.vy*=f:(N.y=N.fy,N.vy=0);return r}function h(){for(var g=0,d=e.length,x;g<d;++g){if(x=e[g],x.index=g,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var N=$r*Math.sqrt(.5+g),E=g*zr;x.x=N*Math.cos(E),x.y=N*Math.sin(E)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function S(g){return g.initialize&&g.initialize(e,b),g}return h(),r={tick:_,restart:function(){return v.restart(M),r},stop:function(){return v.stop(),r},nodes:function(g){return arguments.length?(e=g,h(),n.forEach(S),r):e},alpha:function(g){return arguments.length?(a=+g,r):a},alphaMin:function(g){return arguments.length?(u=+g,r):u},alphaDecay:function(g){return arguments.length?(c=+g,r):+c},alphaTarget:function(g){return arguments.length?(o=+g,r):o},velocityDecay:function(g){return arguments.length?(f=1-g,r):1-f},randomSource:function(g){return arguments.length?(b=g,n.forEach(S),r):b},force:function(g,d){return arguments.length>1?(d==null?n.delete(g):n.set(g,S(d)),r):n.get(g)},find:function(g,d,x){var N=0,E=e.length,P,B,lt,U,O;for(x==null?x=1/0:x*=x,N=0;N<E;++N)U=e[N],P=g-U.x,B=d-U.y,lt=P*P+B*B,lt<x&&(O=U,x=lt);return O},on:function(g,d){return arguments.length>1?(s.on(g,d),r):s.on(g)}}}function Rr(){var e,r,a,u,c=_t(-30),o,f=1,n=1/0,v=.81;function s(h){var S,g=e.length,d=oe(e,Cr,Ir).visitAfter(M);for(u=h,S=0;S<g;++S)r=e[S],d.visit(_)}function b(){if(e){var h,S=e.length,g;for(o=new Array(S),h=0;h<S;++h)g=e[h],o[g.index]=+c(g,h,e)}}function M(h){var S=0,g,d,x=0,N,E,P;if(h.length){for(N=E=P=0;P<4;++P)(g=h[P])&&(d=Math.abs(g.value))&&(S+=g.value,x+=d,N+=d*g.x,E+=d*g.y);h.x=N/x,h.y=E/x}else{g=h,g.x=g.data.x,g.y=g.data.y;do S+=o[g.data.index];while(g=g.next)}h.value=S}function _(h,S,g,d){if(!h.value)return!0;var x=h.x-r.x,N=h.y-r.y,E=d-S,P=x*x+N*N;if(E*E/v<P)return P<n&&(x===0&&(x=Ot(a),P+=x*x),N===0&&(N=Ot(a),P+=N*N),P<f&&(P=Math.sqrt(f*P)),r.vx+=x*h.value*u/P,r.vy+=N*h.value*u/P),!0;if(h.length||P>=n)return;(h.data!==r||h.next)&&(x===0&&(x=Ot(a),P+=x*x),N===0&&(N=Ot(a),P+=N*N),P<f&&(P=Math.sqrt(f*P)));do h.data!==r&&(E=o[h.data.index]*u/P,r.vx+=x*E,r.vy+=N*E);while(h=h.next)}return s.initialize=function(h,S){e=h,a=S,b()},s.strength=function(h){return arguments.length?(c=typeof h=="function"?h:_t(+h),b(),s):c},s.distanceMin=function(h){return arguments.length?(f=h*h,s):Math.sqrt(f)},s.distanceMax=function(h){return arguments.length?(n=h*h,s):Math.sqrt(n)},s.theta=function(h){return arguments.length?(v=h*h,s):Math.sqrt(v)},s}function Lr(e){var r=_t(.1),a,u,c;typeof e!="function"&&(e=_t(e==null?0:+e));function o(n){for(var v=0,s=a.length,b;v<s;++v)b=a[v],b.vx+=(c[v]-b.x)*u[v]*n}function f(){if(a){var n,v=a.length;for(u=new Array(v),c=new Array(v),n=0;n<v;++n)u[n]=isNaN(c[n]=+e(a[n],n,a))?0:+r(a[n],n,a)}}return o.initialize=function(n){a=n,f()},o.strength=function(n){return arguments.length?(r=typeof n=="function"?n:_t(+n),f(),o):r},o.x=function(n){return arguments.length?(e=typeof n=="function"?n:_t(+n),f(),o):e},o}function Or(e){var r=_t(.1),a,u,c;typeof e!="function"&&(e=_t(e==null?0:+e));function o(n){for(var v=0,s=a.length,b;v<s;++v)b=a[v],b.vy+=(c[v]-b.y)*u[v]*n}function f(){if(a){var n,v=a.length;for(u=new Array(v),c=new Array(v),n=0;n<v;++n)u[n]=isNaN(c[n]=+e(a[n],n,a))?0:+r(a[n],n,a)}}return o.initialize=function(n){a=n,f()},o.strength=function(n){return arguments.length?(r=typeof n=="function"?n:_t(+n),f(),o):r},o.y=function(n){return arguments.length?(e=typeof n=="function"?n:_t(+n),f(),o):e},o}var Tr=nt('<div class="absolute inset-0 flex items-center justify-center bg-gray-900/80 z-10"><div class="flex items-center gap-2 text-gray-400"><!> <span>Loading infrastructure status...</span></div></div>'),Gr=nt('<div class="absolute top-4 left-4 right-4 bg-red-900/50 border border-red-700 rounded px-3 py-2 text-sm text-red-300 z-10"> </div>'),Fr=nt('<span class="text-xs text-gray-500"> </span>'),Hr=At('<path fill="none" stroke="#374151" stroke-width="1.5" stroke-opacity="0.5" marker-end="url(#arrowhead)"></path>'),Br=At('<circle opacity="0.15"></circle>'),Xr=At('<g class="cursor-pointer" role="button" tabindex="0"><!><circle class="transition-all duration-150"></circle><circle r="5"></circle><text text-anchor="middle" class="text-[11px] fill-gray-300 font-medium pointer-events-none"> </text><text text-anchor="middle" class="text-[9px] fill-gray-500 uppercase pointer-events-none"> </text></g>'),Ur=nt('<div class="flex justify-between"><span class="text-gray-400">Parent</span> <span class="text-gray-200"> </span></div>'),Yr=nt('<div class="flex justify-between"><span class="text-gray-400"> </span> <span class="text-gray-200"> </span></div>'),Jr=nt('<a target="_blank" rel="noopener noreferrer" class="flex items-center gap-1 text-blue-400 hover:text-blue-300 mt-3"><!> Open</a>'),Vr=nt('<div class="absolute bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-20"><div class="p-4"><div class="flex items-center justify-between mb-3"><h3 class="font-medium text-white"> </h3> <button class="text-gray-400 hover:text-gray-200 cursor-pointer">&times;</button></div> <div class="space-y-2 text-sm"><div class="flex justify-between"><span class="text-gray-400">Status</span> <span class="px-2 py-0.5 rounded text-xs font-medium"> </span></div> <div class="flex justify-between"><span class="text-gray-400">Type</span> <span class="text-gray-200 capitalize"> </span></div> <!> <!> <!></div></div></div>'),Wr=nt('<div class="flex items-center gap-1.5"><div class="w-3 h-3 rounded-full"></div> <span class="text-gray-400 capitalize"> </span></div>'),Kr=nt('<div class="relative w-full h-full min-h-[400px] bg-gray-900 rounded-lg overflow-hidden"><!> <!> <div class="absolute top-4 right-4 flex items-center gap-2 z-10"><button class="flex items-center gap-1.5 px-3 py-1.5 bg-gray-800 hover:bg-gray-700 rounded text-xs text-gray-300 transition-colors disabled:opacity-50 cursor-pointer"><!> Refresh</button> <!></div> <svg role="img" aria-label="Infrastructure map visualization"><g><!><!></g><defs><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#374151"></polygon></marker></defs></svg> <!> <div><div class="flex items-center gap-4"></div></div></div>');function Qr(e,r){Qt(r,!0);let a=ft(Kt([])),u=ft(Kt([])),c=ft(""),o=ft(!0),f=ft(null),n=ft(null),v=null,s,b=ft(800),M=ft(600),_=ft(Kt({x:0,y:0,k:1})),h=ft(!1),S=ft(null);const g={healthy:{border:"#22c55e",bg:"rgba(34, 197, 94, 0.1)",glow:"#22c55e"},degraded:{border:"#eab308",bg:"rgba(234, 179, 8, 0.1)",glow:"#eab308"},down:{border:"#ef4444",bg:"rgba(239, 68, 68, 0.1)",glow:"#ef4444"},unknown:{border:"#6b7280",bg:"rgba(107, 114, 128, 0.1)",glow:"#6b7280"}},d={platform:45,service:30,external:35,app:28};async function x(p=!1){R(o,!0),R(f,null);try{const y=`${r.apiUrl}/health/ecosystem${p?"?refresh=true":""}`,j=await fetch(y,{headers:{Authorization:`Bearer ${r.apiSecret}`,Accept:"application/json"}});if(!j.ok)throw new Error(`HTTP ${j.status}`);const C=await j.json(),L=C.nodes.map(H=>({...H,x:void 0,y:void 0})),X=C.edges.map(H=>({source:H.from,target:H.to,label:H.label}));if(t(a).length>0){const H=new Map(t(a).map(J=>[J.id,{x:J.x,y:J.y}]));L.forEach(J=>{const Z=H.get(J.id);Z&&(J.x=Z.x,J.y=Z.y)})}R(a,L,!0),R(u,X,!0),R(c,C.lastCheck,!0),N()}catch(y){R(f,y instanceof Error?y.message:"Failed to fetch",!0)}finally{R(o,!1)}}function N(){v&&v.stop(),v=Er(t(a)).force("link",Mr(t(u)).id(p=>p.id).distance(120).strength(.5)).force("charge",Rr().strength(-300)).force("center",or(t(b)/2,t(M)/2)).force("collision",jr().radius(p=>d[p.type]+10)).force("x",Lr().x(p=>p.type==="platform"?t(b)*.5:p.type==="service"?t(b)*.5:p.type==="external"?t(b)*.8:p.type==="app"?t(b)*.2:t(b)/2).strength(.1)).force("y",Or().y(p=>p.parent?t(M)*.6:t(M)*.4).strength(.05)).on("tick",()=>{R(a,[...t(a)],!0),R(u,[...t(u)],!0)}),v.alpha(1).restart(),setTimeout(()=>v?.stop(),3e3)}function E(p,y){v&&(R(h,!0),R(S,y,!0),v.alphaTarget(.3).restart(),y.fx=y.x,y.fy=y.y)}function P(p){if(!t(h)||!t(S))return;const y=s.getBoundingClientRect();t(S).fx=(p.clientX-y.left-t(_).x)/t(_).k,t(S).fy=(p.clientY-y.top-t(_).y)/t(_).k,R(a,[...t(a)],!0)}function B(){!v||!t(S)||(R(h,!1),v.alphaTarget(0),t(S).fx=null,t(S).fy=null,R(S,null))}function lt(p){p.preventDefault();const y=p.deltaY>0?.9:1.1,j=Math.max(.3,Math.min(3,t(_).k*y)),C=s.getBoundingClientRect(),L=p.clientX-C.left,X=p.clientY-C.top;R(_,{k:j,x:L-(L-t(_).x)*j/t(_).k,y:X-(X-t(_).y)*j/t(_).k},!0)}let U=ft(!1),O=ft(Kt({x:0,y:0}));function gt(p){t(h)||(R(U,!0),R(O,{x:p.clientX-t(_).x,y:p.clientY-t(_).y},!0))}function rt(p){t(U)&&R(_,{...t(_),x:p.clientX-t(O).x,y:p.clientY-t(O).y},!0)}function ht(){R(U,!1)}function pt(p){R(n,t(n)?.id===p.id?null:p,!0)}function xt(p){const y=typeof p.source=="string"?t(a).find(H=>H.id===p.source):p.source,j=typeof p.target=="string"?t(a).find(H=>H.id===p.target):p.target;if(!y?.x||!y?.y||!j?.x||!j?.y)return"";const C=j.x-y.x,L=j.y-y.y,X=Math.sqrt(C*C+L*L)*.8;return`M${y.x},${y.y}A${X},${X} 0 0,1 ${j.x},${j.y}`}function $t(){if(s){const p=s.parentElement?.getBoundingClientRect();p&&(R(b,p.width,!0),R(M,p.height,!0))}}let Dt;Fe(()=>{$t(),x(),Dt=setInterval(()=>x(),3e4),window.addEventListener("resize",$t)}),He(()=>{Dt&&clearInterval(Dt),v&&v.stop(),window.removeEventListener("resize",$t)});var Ct=Kr(),Pt=w(Ct);{var Et=p=>{var y=Tr(),j=w(y),C=w(j);ve(C,{class:"w-5 h-5 animate-spin"}),Ft(2),m(j),m(y),I(p,y)};et(Pt,p=>{t(o)&&t(a).length===0&&p(Et)})}var Tt=D(Pt,2);{var Bt=p=>{var y=Gr(),j=w(y);m(y),K(()=>dt(j,`Failed to load: ${t(f)??""}`)),I(p,y)};et(Tt,p=>{t(f)&&p(Bt)})}var Rt=D(Tt,2),It=w(Rt);It.__click=()=>x(!0);var Xt=w(It);{let p=F(()=>t(o)?"animate-spin":"");ve(Xt,{get class(){return`w-3.5 h-3.5 ${t(p)??""}`}})}Ft(),m(It);var Yt=D(It,2);{var i=p=>{var y=Fr(),j=w(y);m(y),K(C=>dt(j,`Last: ${C??""}`),[()=>new Date(t(c)).toLocaleTimeString()]),I(p,y)};et(Yt,p=>{t(c)&&p(i)})}m(Rt);var l=D(Rt,2);l.__mousedown=gt,l.__mousemove=p=>{rt(p),P(p)},l.__mouseup=()=>{ht(),B()};var k=w(l),$=w(k);kt($,17,()=>t(u),zt,(p,y)=>{const j=F(()=>xt(t(y)));var C=St(),L=jt(C);{var X=H=>{var J=Hr();K(()=>A(J,"d",t(j))),I(H,J)};et(L,H=>{t(j)&&H(X)})}I(p,C)});var T=D($);kt(T,17,()=>t(a),zt,(p,y)=>{const j=F(()=>d[t(y).type]),C=F(()=>g[t(y).status]),L=F(()=>t(n)?.id===t(y).id);var X=St(),H=jt(X);{var J=Z=>{var z=Xr();z.__mousedown=it=>{it.stopPropagation(),E(it,t(y))},z.__click=()=>pt(t(y)),z.__keydown=it=>it.key==="Enter"&&pt(t(y));var Q=w(z);{var vt=it=>{var Mt=Br();K(()=>{A(Mt,"r",t(j)+4),A(Mt,"fill",t(C).glow)}),I(it,Mt)};et(Q,it=>{t(y).status==="healthy"&&it(vt)})}var ct=D(Q),ut=D(ct),q=D(ut),wt=w(q,!0);m(q);var Y=D(q),V=w(Y,!0);m(Y),m(z),K(()=>{A(z,"transform",`translate(${t(y).x??""}, ${t(y).y??""})`),A(z,"aria-label",`${t(y).label??""} - ${t(y).status??""}`),A(ct,"r",t(j)),A(ct,"fill",t(C).bg),A(ct,"stroke",t(C).border),A(ct,"stroke-width",t(L)?3:2),A(ut,"cx",t(j)-5),A(ut,"cy",-t(j)+5),A(ut,"fill",t(C).border),A(q,"y",t(j)+14),dt(wt,t(y).label),A(Y,"y",t(j)+26),dt(V,t(y).type)}),I(Z,z)};et(H,Z=>{t(y).x!==void 0&&t(y).y!==void 0&&Z(J)})}I(p,X)}),m(k),Ft(),m(l),Be(l,p=>s=p,()=>s);var G=D(l,2);{var tt=p=>{var y=Vr(),j=w(y),C=w(j),L=w(C),X=w(L,!0);m(L);var H=D(L,2);H.__click=()=>R(n,null),m(C);var J=D(C,2),Z=w(J),z=D(w(Z),2),Q=w(z,!0);m(z),m(Z);var vt=D(Z,2),ct=D(w(vt),2),ut=w(ct,!0);m(ct),m(vt);var q=D(vt,2);{var wt=at=>{var st=Ur(),Nt=D(w(st),2),Jt=w(Nt,!0);m(Nt),m(st),K(()=>dt(Jt,t(n).parent)),I(at,st)};et(q,at=>{t(n).parent&&at(wt)})}var Y=D(q,2);{var V=at=>{var st=St(),Nt=jt(st);kt(Nt,17,()=>Object.entries(t(n).meta),zt,(Jt,qt)=>{var Lt=F(()=>Se(t(qt),2));let te=()=>t(Lt)[0],Ut=()=>t(Lt)[1];var Vt=Yr(),re=w(Vt),Pe=w(re,!0);m(re);var le=D(re,2),Me=w(le,!0);m(le),m(Vt),K(()=>{dt(Pe,te()),dt(Me,Ut())}),I(Jt,Vt)}),I(at,st)};et(Y,at=>{t(n).meta&&at(V)})}var it=D(Y,2);{var Mt=at=>{var st=Jr(),Nt=w(st);Ye(Nt,{class:"w-3.5 h-3.5"}),Ft(),m(st),K(()=>A(st,"href",t(n).url)),I(at,st)};et(it,at=>{t(n).url&&at(Mt)})}m(J),m(j),m(y),K(()=>{dt(X,t(n).label),ne(z,`background-color: ${g[t(n).status].bg??""}; color: ${g[t(n).status].border??""};`),dt(Q,t(n).status),dt(ut,t(n).type)}),I(p,y)};et(G,p=>{t(n)&&p(tt)})}var W=D(G,2),ot=w(W);kt(ot,20,()=>["healthy","degraded","down","unknown"],zt,(p,y)=>{var j=Wr(),C=w(j),L=D(C,2),X=w(L,!0);m(L),m(j),K(()=>{ne(C,`background-color: ${g[y].border??""}`),dt(X,y)}),I(p,j)}),m(ot),m(W),m(Ct),K(()=>{It.disabled=t(o),yt(l,0,`w-full h-full cursor-grab ${t(U)?"cursor-grabbing":""}`),A(k,"transform",`translate(${t(_).x??""}, ${t(_).y??""}) scale(${t(_).k??""})`),yt(W,1,`absolute bottom-4 left-4 bg-gray-800/90 border border-gray-700 rounded px-3 py-2 text-xs ${t(n)?"hidden md:block":""}`)}),Ht("mouseleave",l,()=>{ht(),B()}),Ht("wheel",l,lt),I(e,Ct),Zt()}ie(["click","mousedown","mousemove","mouseup","keydown"]);var Zr=nt('<div class="absolute top-full right-0 mt-1 bg-gray-800 border border-gray-700 rounded shadow-lg z-10 min-w-[100px]"><button><!> <span>A-Z</span></button> <button><!> <span>Recent</span></button></div>'),qr=nt('<div class="flex items-center gap-3 sm:gap-4"><button class="p-2 text-gray-400 hover:text-gray-200 transition-colors cursor-pointer rounded hover:bg-gray-800"><!></button> <div class="relative sort-dropdown"><button class="flex items-center gap-1 p-1.5 text-gray-400 hover:text-gray-200 cursor-pointer transition-colors"><!> <!></button> <!></div> <div class="flex gap-1 sm:gap-2"><button title="Show jaslr projects">jaslr</button> <button title="Show Vast Puddle projects">VP</button> <button title="Show Junipa projects only">Junipa</button></div></div>'),ta=nt('<button class="text-xs text-gray-400 hover:text-gray-200 transition-colors cursor-pointer">Clear filter</button>'),ea=nt('<div class="flex-1 overflow-hidden p-4 sm:p-6"><!></div>'),ra=nt('<div class="text-center text-gray-500 py-8"><p>No projects match the current filters.</p></div>'),aa=nt('<span class="text-gray-300"> </span>'),na=nt('<div><img class="w-4 h-4 object-contain"/> <span><!></span> <!></div>'),ia=nt('<div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 px-4 py-3 bg-gray-800 hover:bg-gray-750 rounded-lg transition-colors"><a class="font-medium text-gray-200 hover:text-white sm:min-w-[160px] truncate shrink-0"> </a> <div class="flex flex-wrap gap-1.5 sm:gap-2 flex-1"></div></div>'),oa=nt('<div class="space-y-2"></div>'),sa=nt('<div class="flex-1 overflow-y-auto p-4 sm:p-6"><!></div>'),la=nt('<a class="text-xs px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors text-gray-300 hover:text-white"> </a>'),ca=nt('<div><button class="w-full text-left group cursor-pointer"><div class="flex items-center justify-between mb-1"><span> </span> <span class="text-xs text-gray-500"> </span></div></button> <div class="flex flex-wrap gap-1.5 mt-2"></div></div>'),ua=nt('<div class="bg-gray-800 rounded-lg p-4"><div class="flex items-center gap-2 text-xs text-gray-500 uppercase tracking-wider mb-4"><!> <span> </span></div> <div class="space-y-4"></div></div>'),fa=nt('<div class="shrink-0 border-b border-gray-800 bg-gray-850 svelte-1ny0ztv"><div class="px-6 py-4"><div class="flex items-center justify-between mb-3"><div class="text-xs text-gray-500 uppercase tracking-wider">Ecosystem Flow</div></div> <div class="bg-gray-900 rounded-lg p-4 min-h-[300px]"><!></div></div></div> <div class="flex-1 overflow-y-auto p-6"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div></div>',1),da=nt('<div class="flex-1 flex flex-col overflow-hidden"><div class="shrink-0 border-b border-gray-800 bg-gray-900 px-4 sm:px-6 py-3"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"><div class="flex gap-1"><button><!> Infrastructure</button> <button>Projects</button> <button>Flow Diagram</button></div> <!></div></div> <!></div>');function za(e,r){Qt(r,!0);const a="https://observatory-backend.fly.dev";let u=F(()=>$e.data.apiSecret||"");const c=ze(),o=Ee();let f=ft("infrastructure");Wt(()=>{const i=localStorage.getItem("ecosystem-active-tab");(i==="projects"||i==="diagram"||i==="infrastructure")&&R(f,i,!0)});function n(i){R(f,i,!0),localStorage.setItem("ecosystem-active-tab",i)}let v=ft("name"),s=ft(!1);function b(i){const l=i.target;t(s)&&!l.closest(".sort-dropdown")&&R(s,!1)}Wt(()=>{if(t(s))return document.addEventListener("click",b),()=>document.removeEventListener("click",b)}),Wt(()=>{const i=localStorage.getItem("ecosystem-sort");(i==="name"||i==="recent")&&R(v,i,!0)});let M=ft(Kt({jaslr:!0,vp:!0,junipa:!0}));Wt(()=>{const i=localStorage.getItem("ecosystem-owner-filters");if(i)try{const l=JSON.parse(i);R(M,{jaslr:!0,vp:!0,junipa:!0,...l},!0)}catch{}});function _(i){t(M)[i]=!t(M)[i],localStorage.setItem("ecosystem-owner-filters",JSON.stringify(t(M)))}let h=ft("compact");Wt(()=>{const i=localStorage.getItem("ecosystem-display-mode");(i==="compact"||i==="detailed")&&R(h,i,!0)});function S(){R(h,t(h)==="compact"?"detailed":"compact",!0),localStorage.setItem("ecosystem-display-mode",t(h))}let g=ft(null);function d(i){R(g,t(g)===i?null:i,!0)}function x(){R(g,null)}const N=["hosting","database","auth","storage","monitoring","ci","dns","email","analytics","cdn","secrets"];let E=F(()=>{const i=[];for(const l of o){const k=Ge[l.id];if(!k)continue;const $=[...k.services].sort((T,G)=>{const tt=N.indexOf(T.category),W=N.indexOf(G.category);return(tt===-1?999:tt)-(W===-1?999:W)});i.push({id:l.id,displayName:k.displayName,identity:k.identity,services:$.map(T=>({category:T.category,provider:T.provider,serviceName:T.serviceName}))})}return i});function P(i){return i.filter(l=>{const k=l.identity==="jaslr",$=l.identity==="jvp-ux",T=l.id.toLowerCase().includes("junipa")||l.displayName.toLowerCase().includes("junipa");return!!(t(M).junipa&&T||k&&t(M).jaslr&&!T||$&&t(M).vp&&!T)})}let B=F(()=>{const l=[...P(t(E))];return t(v)==="name"&&l.sort((k,$)=>k.displayName.localeCompare($.displayName)),l});const lt={hosting:Gt,database:ee,auth:fe,storage:Te,dns:de,domain:de,email:Oe,ci:pe,monitoring:he,analytics:Le,cdn:ae,secrets:fe},U={cloudflare:"Cloudflare",flyio:"Fly.io",supabase:"Supabase",github:"GitHub",sentry:"Sentry",aws:"AWS",vercel:"Vercel",netlify:"Netlify",google:"Google",gcp:"GCP",pocketbase:"PocketBase"},O={cloudflare:"text-orange-400",supabase:"text-green-400",sentry:"text-purple-400",github:"text-gray-300",aws:"text-yellow-400",vercel:"text-white",flyio:"text-violet-400",google:"text-blue-400",gcp:"text-blue-400",netlify:"text-teal-400",pocketbase:"text-gray-300"};function gt(i){return U[i]||i}const rt={cloudflare:Gt,flyio:Gt,supabase:ee,github:pe,sentry:he,firebase:ee,gcp:Gt,aws:Gt,pocketbase:ee,vercel:Gt,netlify:Gt};var ht=da();Ie("1ny0ztv",i=>{Ae(()=>{De.title="Ecosystem | Orchon"})});var pt=w(ht),xt=w(pt),$t=w(xt),Dt=w($t);Dt.__click=()=>n("infrastructure");var Ct=w(Dt);Je(Ct,{class:"w-4 h-4"}),Ft(),m(Dt);var Pt=D(Dt,2);Pt.__click=()=>n("projects");var Et=D(Pt,2);Et.__click=()=>n("diagram"),m($t);var Tt=D($t,2);{var Bt=i=>{var l=qr(),k=w(l);k.__click=S;var $=w(k);{var T=z=>{We(z,{class:"w-4 h-4"})},G=z=>{Ve(z,{class:"w-4 h-4"})};et($,z=>{t(h)==="compact"?z(T):z(G,!1)})}m(k);var tt=D(k,2),W=w(tt);W.__click=()=>R(s,!t(s));var ot=w(W);{var p=z=>{ue(z,{class:"w-4 h-4"})},y=z=>{ge(z,{class:"w-4 h-4"})};et(ot,z=>{t(v)==="name"?z(p):z(y,!1)})}var j=D(ot,2);Re(j,{class:"w-3 h-3"}),m(W);var C=D(W,2);{var L=z=>{var Q=Zr(),vt=w(Q);vt.__click=()=>{R(v,"name"),R(s,!1),localStorage.setItem("ecosystem-sort","name")};var ct=w(vt);ue(ct,{class:"w-4 h-4"}),Ft(2),m(vt);var ut=D(vt,2);ut.__click=()=>{R(v,"recent"),R(s,!1),localStorage.setItem("ecosystem-sort","recent")};var q=w(ut);ge(q,{class:"w-4 h-4"}),Ft(2),m(ut),m(Q),K(()=>{yt(vt,1,`w-full flex items-center gap-2 px-3 py-2 text-xs text-left cursor-pointer hover:bg-gray-700 transition-colors ${t(v)==="name"?"text-white":"text-gray-400"}`),yt(ut,1,`w-full flex items-center gap-2 px-3 py-2 text-xs text-left cursor-pointer hover:bg-gray-700 transition-colors ${t(v)==="recent"?"text-white":"text-gray-400"}`)}),I(z,Q)};et(C,z=>{t(s)&&z(L)})}m(tt);var X=D(tt,2),H=w(X);H.__click=()=>_("jaslr");var J=D(H,2);J.__click=()=>_("vp");var Z=D(J,2);Z.__click=()=>_("junipa"),m(X),m(l),K(()=>{A(k,"title",t(h)==="compact"?"Show service names":"Hide service names"),A(W,"title",t(v)==="name"?"Sorted A-Z":"Sorted by Recent"),yt(H,1,`px-2 py-1 text-xs cursor-pointer transition-colors rounded ${t(M).jaslr?"text-gray-200 bg-gray-800":"text-gray-500 hover:text-gray-400"}`),yt(J,1,`px-2 py-1 text-xs cursor-pointer transition-colors rounded ${t(M).vp?"text-gray-200 bg-gray-800":"text-gray-500 hover:text-gray-400"}`),yt(Z,1,`px-2 py-1 text-xs cursor-pointer transition-colors rounded ${t(M).junipa?"text-gray-200 bg-gray-800":"text-gray-500 hover:text-gray-400"}`)}),I(i,l)},Rt=i=>{var l=St(),k=jt(l);{var $=T=>{var G=ta();G.__click=x,I(T,G)};et(k,T=>{t(g)&&T($)},!0)}I(i,l)};et(Tt,i=>{t(f)==="projects"?i(Bt):i(Rt,!1)})}m(xt),m(pt);var It=D(pt,2);{var Xt=i=>{var l=ea(),k=w(l);Qr(k,{get apiSecret(){return t(u)},apiUrl:a}),m(l),I(i,l)},Yt=i=>{var l=St(),k=jt(l);{var $=G=>{var tt=sa(),W=w(tt);{var ot=y=>{var j=ra();I(y,j)},p=y=>{var j=oa();kt(j,21,()=>t(B),C=>C.id,(C,L)=>{var X=ia(),H=w(X),J=w(H,!0);m(H);var Z=D(H,2);kt(Z,23,()=>t(L).services,(z,Q)=>z.provider+"-"+z.category+"-"+Q,(z,Q)=>{const vt=F(()=>`/api/logos/infra/${t(Q).provider}.svg`),ct=F(()=>rt[t(Q).provider]||ae),ut=F(()=>O[t(Q).provider]||"text-gray-400");var q=na(),wt=w(q),Y=D(wt,2),V=w(Y);ce(V,()=>t(ct),(at,st)=>{st(at,{class:"w-4 h-4"})}),m(Y);var it=D(Y,2);{var Mt=at=>{var st=aa(),Nt=w(st,!0);m(st),K(()=>dt(Nt,t(Q).serviceName)),I(at,st)};et(it,at=>{t(h)==="detailed"&&at(Mt)})}m(q),K(()=>{yt(q,1,`inline-flex items-center gap-1.5 px-2 py-1 bg-gray-700 rounded text-xs ${t(h)==="compact"?"px-1.5":""}`),A(q,"title",t(Q).serviceName),A(wt,"src",t(vt)),A(wt,"alt",t(Q).provider),yt(Y,1,`hidden ${t(ut)??""}`,"svelte-1ny0ztv")}),Ht("error",wt,at=>{const st=at.target;st.style.display="none";const Nt=st.nextElementSibling;Nt&&Nt.classList.remove("hidden")}),Ce(wt),I(z,q)}),m(Z),m(X),K(()=>{A(H,"href",`/projects?project=${t(L).id??""}`),dt(J,t(L).displayName)}),I(C,X)}),m(j),I(y,j)};et(W,y=>{t(B).length===0?y(ot):y(p,!1)})}m(tt),I(G,tt)},T=G=>{var tt=fa(),W=jt(tt),ot=w(W),p=D(w(ot),2),y=w(p);ir(y,{get projects(){return o},get categories(){return c},get selectedProvider(){return t(g)},onProviderClick:d}),m(p),m(ot),m(W);var j=D(W,2),C=w(j);kt(C,21,()=>c,L=>L.category,(L,X)=>{const H=F(()=>lt[t(X).category]||ae);var J=ua(),Z=w(J),z=w(Z);ce(z,()=>t(H),(ut,q)=>{q(ut,{class:"w-4 h-4"})});var Q=D(z,2),vt=w(Q,!0);m(Q),m(Z);var ct=D(Z,2);kt(ct,21,()=>t(X).providers,ut=>ut.provider,(ut,q)=>{const wt=F(()=>t(g)===t(q).provider),Y=F(()=>t(g)&&!t(wt));var V=ca(),it=w(V);it.__click=()=>d(t(q).provider);var Mt=w(it),at=w(Mt),st=w(at,!0);m(at);var Nt=D(at,2),Jt=w(Nt);m(Nt),m(Mt),m(it);var qt=D(it,2);kt(qt,21,()=>t(q).projects,Lt=>Lt.id,(Lt,te)=>{var Ut=la(),Vt=w(Ut,!0);m(Ut),K(()=>{A(Ut,"href",`/projects?project=${t(te).id??""}`),dt(Vt,t(te).displayName)}),I(Lt,Ut)}),m(qt),m(V),K(Lt=>{yt(V,1,`transition-opacity ${t(Y)?"opacity-30":""}`),yt(at,1,`font-medium ${(O[t(q).provider]||"text-gray-300")??""} ${t(wt)?"underline":"group-hover:underline"}`,"svelte-1ny0ztv"),dt(st,Lt),dt(Jt,`${t(q).projects.length??""} project${t(q).projects.length!==1?"s":""}`)},[()=>gt(t(q).provider)]),I(ut,V)}),m(ct),m(J),K(()=>dt(vt,t(X).category)),I(L,J)}),m(C),m(j),I(G,tt)};et(k,G=>{t(f)==="projects"?G($):G(T,!1)},!0)}I(i,l)};et(It,i=>{t(f)==="infrastructure"?i(Xt):i(Yt,!1)})}m(ht),K(()=>{yt(Dt,1,`px-4 py-2 text-sm font-medium transition-colors cursor-pointer rounded-t flex items-center gap-1.5 ${t(f)==="infrastructure"?"text-white bg-gray-800 border-b-2 border-green-500":"text-gray-400 hover:text-gray-200"}`),yt(Pt,1,`px-4 py-2 text-sm font-medium transition-colors cursor-pointer rounded-t ${t(f)==="projects"?"text-white bg-gray-800 border-b-2 border-blue-500":"text-gray-400 hover:text-gray-200"}`),yt(Et,1,`px-4 py-2 text-sm font-medium transition-colors cursor-pointer rounded-t ${t(f)==="diagram"?"text-white bg-gray-800 border-b-2 border-blue-500":"text-gray-400 hover:text-gray-200"}`)}),I(e,ht),Zt()}ie(["click"]);export{za as component};
